import"../chunks/DsnmJJEf.js";import{i as mt}from"../chunks/DiCiF57C.js";import{b0 as _t,L as Q,ao as yt,B as Ot,A as wt,h as Et,b1 as Ct,p as I,ap as N,f as w,a as m,b as D,Z as d,ar as g,c as P,aY as j,d as k,aX as M,r as F,a$ as Nt,b2 as Ft,b3 as kt,G as ze,aj as Tt,am as xt,a_ as Ve,aa as Pt,F as Oe,ab as ee,I as It,t as ie,b4 as Dt,_ as B,s as S,J as Ze,aq as Rt,e as le,K as St,$ as At}from"../chunks/tUfXnmxI.js";import{h as Gt}from"../chunks/DDKT7HJS.js";import{a as Bt}from"../chunks/BL-u_vav.js";import{q as $t,r as Lt,s as Pe,u as Je,v as Mt,x as Kt,y as Vt,z as Wt,A as te,B as X,C as we,D as ce,E as de,F as jt,G as Ht,H as qt,J as Ee,K as Ut,L as Qe,N as Xt,O as We,P as Yt,Q as zt,R as Zt,S as Jt,f as C,c as Qt}from"../chunks/CgmJnNFi.js";import{c as es,s as T,m as H,a as ts,u as ss,n as as,e as je,i as He}from"../chunks/BKiH9g9x.js";import{h as os}from"../chunks/CRM8gmPs.js";import{b as rs,c as se}from"../chunks/B2qPcPY0.js";import{a as q,s as qe,r as ns,c as is}from"../chunks/DkfzOG-3.js";import{s as Ce}from"../chunks/54knkZjx.js";import{r as ls,b as cs}from"../chunks/DhxihCwL.js";import{i as K,r as V}from"../chunks/9lQ3pMiW.js";function ds(e,s,o=s){var t=new WeakSet;_t(e,"input",async a=>{var i=a?e.defaultValue:e.value;if(i=Ne(e)?Fe(i):i,o(i),Q!==null&&t.add(Q),await yt(),i!==(i=s())){var r=e.selectionStart,l=e.selectionEnd,f=e.value.length;if(e.value=i??"",l!==null){var c=e.value.length;r===l&&l===f&&c>f?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=r,e.selectionEnd=Math.min(l,c))}}}),(Et&&e.defaultValue!==e.value||Ot(s)==null&&e.value)&&(o(Ne(e)?Fe(e.value):e.value),Q!==null&&t.add(Q)),wt(()=>{var a=s();if(e===document.activeElement){var i=Ct??Q;if(t.has(i))return}Ne(e)&&a===Fe(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function Ne(e){var s=e.type;return s==="number"||s==="range"}function Fe(e){return e===""?null:+e}const A=es();var us=P("<div></div>");function fs(e,s){I(s,!0);const o=V(s,["$$slots","$$events","$$legacy"]),t=A.consume(),a=g(()=>s.element),i=g(()=>j(o,["element"])),r=g(()=>H(t().getBackdropProps(),d(i)));var l=N(),f=w(l);{var c=b=>{var u=N(),n=w(u);T(n,()=>d(a),()=>d(r)),m(b,u)},h=b=>{var u=us();q(u,()=>({...d(r)})),m(b,u)};K(f,b=>{d(a)?b(c):b(h,!1)})}m(e,l),D()}var hs=P("<button><!></button>");function ps(e,s){I(s,!0);const o=V(s,["$$slots","$$events","$$legacy"]),t=A.consume(),a=g(()=>s.element),i=g(()=>s.children),r=g(()=>j(o,["element","children"])),l=g(()=>H(t().getCloseTriggerProps(),d(r)));var f=N(),c=w(f);{var h=u=>{var n=N(),p=w(n);T(p,()=>d(a),()=>d(l)),m(u,n)},b=u=>{var n=hs();q(n,()=>({...d(l)}));var p=k(n);T(p,()=>d(i)??M),F(n),m(u,n)};K(c,u=>{d(a)?u(h):u(b,!1)})}m(e,f),D()}var vs=P("<div><!></div>");function bs(e,s){I(s,!0);const o=V(s,["$$slots","$$events","$$legacy"]),t=A.consume(),a=g(()=>s.element),i=g(()=>s.children),r=g(()=>j(o,["element","children"])),l=g(()=>H(t().getContentProps(),d(r)));var f=N(),c=w(f);{var h=u=>{var n=N(),p=w(n);T(p,()=>d(a),()=>d(l)),m(u,n)},b=u=>{var n=vs();q(n,()=>({...d(l)}));var p=k(n);T(p,()=>d(i)??M),F(n),m(u,n)};K(c,u=>{d(a)?u(h):u(b,!1)})}m(e,f),D()}var gs=P("<div><!></div>");function ms(e,s){I(s,!0);const o=V(s,["$$slots","$$events","$$legacy"]),t=A.consume(),a=g(()=>s.element),i=g(()=>s.children),r=g(()=>j(o,["element","children"])),l=g(()=>H(t().getDescriptionProps(),d(r)));var f=N(),c=w(f);{var h=u=>{var n=N(),p=w(n);T(p,()=>d(a),()=>d(l)),m(u,n)},b=u=>{var n=gs();q(n,()=>({...d(l)}));var p=k(n);T(p,()=>d(i)??M),F(n),m(u,n)};K(c,u=>{d(a)?u(h):u(b,!1)})}m(e,f),D()}var _s=P("<div><!></div>");function ys(e,s){I(s,!0);const o=V(s,["$$slots","$$events","$$legacy"]),t=A.consume(),a=g(()=>s.element),i=g(()=>s.children),r=g(()=>j(o,["element","children"])),l=g(()=>H(t().getPositionerProps(),d(r)));var f=N(),c=w(f);{var h=u=>{var n=N(),p=w(n);T(p,()=>d(a),()=>d(l)),m(u,n)},b=u=>{var n=_s();q(n,()=>({...d(l)}));var p=k(n);T(p,()=>d(i)??M),F(n),m(u,n)};K(c,u=>{d(a)?u(h):u(b,!1)})}m(e,f),D()}function Os(e,s){I(s,!0);const o=A.consume(),t=g(()=>s.children);var a=N(),i=w(a);T(i,()=>d(t),()=>o),m(e,a),D()}function ws(e,s){I(s,!0);const o=g(()=>s.children),t=g(()=>s.value);A.provide(()=>d(t)());var a=N(),i=w(a);T(i,()=>d(o)??M),m(e,a),D()}var Y=new WeakMap,ue=new WeakMap,fe={},ke=0,et=e=>e&&(e.host||et(e.parentNode)),Es=(e,s)=>s.map(o=>{if(e.contains(o))return o;const t=et(o);return t&&e.contains(t)?t:(console.error("[zag-js > ariaHidden] target",o,"in not contained inside",e,". Doing nothing"),null)}).filter(o=>!!o),Cs=new Set(["script","output","status","next-route-announcer"]),Ns=e=>Cs.has(e.localName)||e.role==="status"||e.hasAttribute("aria-live")?!0:e.matches("[data-live-announcer]"),Fs=(e,s)=>{const{parentNode:o,markerName:t,controlAttribute:a,followControlledElements:i=!0}=s,r=Es(o,Array.isArray(e)?e:[e]);fe[t]||(fe[t]=new WeakMap);const l=fe[t],f=[],c=new Set,h=new Set(r),b=n=>{!n||c.has(n)||(c.add(n),b(n.parentNode))};r.forEach(n=>{b(n),i&&$t(n)&&Lt(n,p=>{b(p)})});const u=n=>{!n||h.has(n)||Array.prototype.forEach.call(n.children,p=>{if(c.has(p))u(p);else try{if(Ns(p))return;const $=p.getAttribute(a)==="true",L=(Y.get(p)||0)+1,G=(l.get(p)||0)+1;Y.set(p,L),l.set(p,G),f.push(p),L===1&&$&&ue.set(p,!0),G===1&&p.setAttribute(t,""),$||p.setAttribute(a,"true")}catch(R){console.error("[zag-js > ariaHidden] cannot operate on ",p,R)}})};return u(o),c.clear(),ke++,()=>{f.forEach(n=>{const p=Y.get(n)-1,R=l.get(n)-1;Y.set(n,p),l.set(n,R),p||(ue.has(n)||n.removeAttribute(a),ue.delete(n)),R||n.removeAttribute(t)}),ke--,ke||(Y=new WeakMap,Y=new WeakMap,ue=new WeakMap,fe={})}},ks=e=>(Array.isArray(e)?e[0]:e).ownerDocument.body,Ts=(e,s=ks(e),o="data-aria-hidden",t=!0)=>{if(s)return Fs(e,{parentNode:s,markerName:o,controlAttribute:"aria-hidden",followControlledElements:t})},xs=e=>{const s=requestAnimationFrame(()=>e());return()=>cancelAnimationFrame(s)};function Ps(e,s={}){const{defer:o=!0}=s,t=o?xs:i=>i(),a=[];return a.push(t(()=>{const r=(typeof e=="function"?e():e).filter(Boolean);r.length!==0&&a.push(Ts(r))})),()=>{a.forEach(i=>i?.())}}var Is=Object.defineProperty,Ds=(e,s,o)=>s in e?Is(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,O=(e,s,o)=>Ds(e,typeof s!="symbol"?s+"":s,o),Ue={activateTrap(e,s){if(e.length>0){const t=e[e.length-1];t!==s&&t.pause()}const o=e.indexOf(s);o===-1||e.splice(o,1),e.push(s)},deactivateTrap(e,s){const o=e.indexOf(s);o!==-1&&e.splice(o,1),e.length>0&&e[e.length-1].unpause()}},Rs=[],Ss=class{constructor(e,s){O(this,"trapStack"),O(this,"config"),O(this,"doc"),O(this,"state",{containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0}),O(this,"portalContainers",new Set),O(this,"listenerCleanups",[]),O(this,"handleFocus",t=>{const a=de(t),i=this.findContainerIndex(a,t)>=0;if(i||jt(a))i&&(this.state.mostRecentlyFocusedNode=a);else{t.stopImmediatePropagation();let r,l=!0;if(this.state.mostRecentlyFocusedNode)if(te(this.state.mostRecentlyFocusedNode)>0){const f=this.findContainerIndex(this.state.mostRecentlyFocusedNode),{tabbableNodes:c}=this.state.containerGroups[f];if(c.length>0){const h=c.findIndex(b=>b===this.state.mostRecentlyFocusedNode);h>=0&&(this.config.isKeyForward(this.state.recentNavEvent)?h+1<c.length&&(r=c[h+1],l=!1):h-1>=0&&(r=c[h-1],l=!1))}}else this.state.containerGroups.some(f=>f.tabbableNodes.some(c=>te(c)>0))||(l=!1);else l=!1;l&&(r=this.findNextNavNode({target:this.state.mostRecentlyFocusedNode,isBackward:this.config.isKeyBackward(this.state.recentNavEvent)})),r?this.tryFocus(r):this.tryFocus(this.state.mostRecentlyFocusedNode||this.getInitialFocusNode())}this.state.recentNavEvent=void 0}),O(this,"handlePointerDown",t=>{const a=de(t);if(!(this.findContainerIndex(a,t)>=0)){if(ae(this.config.clickOutsideDeactivates,t)){this.deactivate({returnFocus:this.config.returnFocusOnDeactivate});return}ae(this.config.allowOutsideClick,t)||t.preventDefault()}}),O(this,"handleClick",t=>{const a=de(t);this.findContainerIndex(a,t)>=0||ae(this.config.clickOutsideDeactivates,t)||ae(this.config.allowOutsideClick,t)||(t.preventDefault(),t.stopImmediatePropagation())}),O(this,"handleTabKey",t=>{if(this.config.isKeyForward(t)||this.config.isKeyBackward(t)){this.state.recentNavEvent=t;const a=this.config.isKeyBackward(t),i=this.findNextNavNode({event:t,isBackward:a});if(!i)return;Te(t)&&t.preventDefault(),this.tryFocus(i)}}),O(this,"handleEscapeKey",t=>{Bs(t)&&ae(this.config.escapeDeactivates,t)!==!1&&(t.preventDefault(),this.deactivate())}),O(this,"_mutationObserver"),O(this,"setupMutationObserver",()=>{const t=this.doc.defaultView||window;this._mutationObserver=new t.MutationObserver(a=>{a.some(l=>Array.from(l.removedNodes).some(c=>c===this.state.mostRecentlyFocusedNode))&&this.tryFocus(this.getInitialFocusNode()),a.some(l=>l.type==="attributes"&&(l.attributeName==="aria-controls"||l.attributeName==="aria-expanded")?!0:l.type==="childList"&&l.addedNodes.length>0?Array.from(l.addedNodes).some(f=>{if(f.nodeType!==Node.ELEMENT_NODE)return!1;const c=f;return Ht(c)?!0:c.id&&!this.state.containers.some(h=>h.contains(c))?qt(c):!1}):!1)&&this.state.active&&!this.state.paused&&(this.updateTabbableNodes(),this.updatePortalContainers())})}),O(this,"updateObservedNodes",()=>{this._mutationObserver?.disconnect(),this.state.active&&!this.state.paused&&(this.state.containers.map(t=>{this._mutationObserver?.observe(t,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["aria-controls","aria-expanded"]})}),this.portalContainers.forEach(t=>{this.observePortalContainer(t)}))}),O(this,"getInitialFocusNode",()=>{let t=this.getNodeForOption("initialFocus",{hasFallback:!0});if(t===!1)return!1;if(t===void 0||t&&!Ee(t)){const a=we(this.doc);if(a&&this.findContainerIndex(a)>=0)t=a;else{const i=this.state.tabbableGroups[0];t=i&&i.firstTabbableNode||this.getNodeForOption("fallbackFocus")}}else t===null&&(t=this.getNodeForOption("fallbackFocus"));if(!t)throw new Error("Your focus-trap needs to have at least one focusable element");return t.isConnected||(t=this.getNodeForOption("fallbackFocus")),t}),O(this,"tryFocus",t=>{if(t!==!1&&t!==we(this.doc)){if(!t||!t.focus){this.tryFocus(this.getInitialFocusNode());return}t.focus({preventScroll:!!this.config.preventScroll}),this.state.mostRecentlyFocusedNode=t,$s(t)&&t.select()}}),O(this,"deactivate",t=>{if(!this.state.active)return this;const a={onDeactivate:this.config.onDeactivate,onPostDeactivate:this.config.onPostDeactivate,checkCanReturnFocus:this.config.checkCanReturnFocus,...t};clearTimeout(this.state.delayInitialFocusTimer),this.state.delayInitialFocusTimer=void 0,this.removeListeners(),this.state.active=!1,this.state.paused=!1,this.updateObservedNodes(),Ue.deactivateTrap(this.trapStack,this),this.portalContainers.clear();const i=this.getOption(a,"onDeactivate"),r=this.getOption(a,"onPostDeactivate"),l=this.getOption(a,"checkCanReturnFocus"),f=this.getOption(a,"returnFocus","returnFocusOnDeactivate");i?.();const c=()=>{Xe(()=>{if(f){const h=this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation);this.tryFocus(h)}r?.()})};if(f&&l){const h=this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation);return l(h).then(c,c),this}return c(),this}),O(this,"pause",t=>{if(this.state.paused||!this.state.active)return this;const a=this.getOption(t,"onPause"),i=this.getOption(t,"onPostPause");return this.state.paused=!0,a?.(),this.removeListeners(),this.updateObservedNodes(),i?.(),this}),O(this,"unpause",t=>{if(!this.state.paused||!this.state.active)return this;const a=this.getOption(t,"onUnpause"),i=this.getOption(t,"onPostUnpause");return this.state.paused=!1,a?.(),this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),i?.(),this}),O(this,"updateContainerElements",t=>(this.state.containers=Array.isArray(t)?t.filter(Boolean):[t].filter(Boolean),this.state.active&&this.updateTabbableNodes(),this.updateObservedNodes(),this)),O(this,"getReturnFocusNode",t=>{const a=this.getNodeForOption("setReturnFocus",{params:[t]});return a||(a===!1?!1:t)}),O(this,"getOption",(t,a,i)=>t&&t[a]!==void 0?t[a]:this.config[i||a]),O(this,"getNodeForOption",(t,{hasFallback:a=!1,params:i=[]}={})=>{let r=this.config[t];if(typeof r=="function"&&(r=r(...i)),r===!0&&(r=void 0),!r){if(r===void 0||r===!1)return r;throw new Error(`\`${t}\` was specified but was not a node, or did not return a node`)}let l=r;if(typeof r=="string"){try{l=this.doc.querySelector(r)}catch(f){throw new Error(`\`${t}\` appears to be an invalid selector; error="${f.message}"`)}if(!l&&!a)throw new Error(`\`${t}\` as selector refers to no known node`)}return l}),O(this,"findNextNavNode",t=>{const{event:a,isBackward:i=!1}=t,r=t.target||de(a);this.updateTabbableNodes();let l=null;if(this.state.tabbableGroups.length>0){const f=this.findContainerIndex(r,a),c=f>=0?this.state.containerGroups[f]:void 0;if(f<0)i?l=this.state.tabbableGroups[this.state.tabbableGroups.length-1].lastTabbableNode:l=this.state.tabbableGroups[0].firstTabbableNode;else if(i){let h=this.state.tabbableGroups.findIndex(({firstTabbableNode:b})=>r===b);if(h<0&&(c?.container===r||Ee(r)&&!ce(r)&&!c?.nextTabbableNode(r,!1))&&(h=f),h>=0){const b=h===0?this.state.tabbableGroups.length-1:h-1,u=this.state.tabbableGroups[b];l=te(r)>=0?u.lastTabbableNode:u.lastDomTabbableNode}else Te(a)||(l=c?.nextTabbableNode(r,!1))}else{let h=this.state.tabbableGroups.findIndex(({lastTabbableNode:b})=>r===b);if(h<0&&(c?.container===r||Ee(r)&&!ce(r)&&!c?.nextTabbableNode(r))&&(h=f),h>=0){const b=h===this.state.tabbableGroups.length-1?0:h+1,u=this.state.tabbableGroups[b];l=te(r)>=0?u.firstTabbableNode:u.firstDomTabbableNode}else Te(a)||(l=c?.nextTabbableNode(r))}}else l=this.getNodeForOption("fallbackFocus");return l}),this.trapStack=s.trapStack||Rs;const o={returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,followControlledElements:!0,isKeyForward:As,isKeyBackward:Gs,...s};this.doc=o.document||Je(Array.isArray(e)?e[0]:e),this.config=o,this.updateContainerElements(e),this.setupMutationObserver()}addPortalContainer(e){const s=e.parentElement;s&&!this.portalContainers.has(s)&&(this.portalContainers.add(s),this.state.active&&!this.state.paused&&this.observePortalContainer(s))}observePortalContainer(e){this._mutationObserver?.observe(e,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["aria-controls","aria-expanded"]})}updatePortalContainers(){this.config.followControlledElements&&this.state.containers.forEach(e=>{Mt(e).forEach(o=>{this.addPortalContainer(o)})})}get active(){return this.state.active}get paused(){return this.state.paused}findContainerIndex(e,s){const o=typeof s?.composedPath=="function"?s.composedPath():void 0;return this.state.containerGroups.findIndex(({container:t,tabbableNodes:a})=>t.contains(e)||o?.includes(t)||a.find(i=>i===e)||this.isControlledElement(t,e))}isControlledElement(e,s){return this.config.followControlledElements?Kt(e,s):!1}updateTabbableNodes(){if(this.state.containerGroups=this.state.containers.map(e=>{const s=Vt(e,{getShadowRoot:this.config.getShadowRoot}),o=Wt(e,{getShadowRoot:this.config.getShadowRoot}),t=s[0],a=s[s.length-1],i=t,r=a;let l=!1;for(let c=0;c<s.length;c++)if(te(s[c])>0){l=!0;break}function f(c,h=!0){const b=s.indexOf(c);if(b>=0)return s[b+(h?1:-1)];const u=o.indexOf(c);if(!(u<0)){if(h){for(let n=u+1;n<o.length;n++)if(ce(o[n]))return o[n]}else for(let n=u-1;n>=0;n--)if(ce(o[n]))return o[n]}}return{container:e,tabbableNodes:s,focusableNodes:o,posTabIndexesFound:l,firstTabbableNode:t,lastTabbableNode:a,firstDomTabbableNode:i,lastDomTabbableNode:r,nextTabbableNode:f}}),this.state.tabbableGroups=this.state.containerGroups.filter(e=>e.tabbableNodes.length>0),this.state.tabbableGroups.length<=0&&!this.getNodeForOption("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(this.state.containerGroups.find(e=>e.posTabIndexesFound)&&this.state.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")}addListeners(){if(this.state.active)return Ue.activateTrap(this.trapStack,this),this.state.delayInitialFocusTimer=this.config.delayInitialFocus?Xe(()=>{this.tryFocus(this.getInitialFocusNode())}):this.tryFocus(this.getInitialFocusNode()),this.listenerCleanups.push(X(this.doc,"focusin",this.handleFocus,!0),X(this.doc,"mousedown",this.handlePointerDown,{capture:!0,passive:!1}),X(this.doc,"touchstart",this.handlePointerDown,{capture:!0,passive:!1}),X(this.doc,"click",this.handleClick,{capture:!0,passive:!1}),X(this.doc,"keydown",this.handleTabKey,{capture:!0,passive:!1}),X(this.doc,"keydown",this.handleEscapeKey)),this}removeListeners(){if(this.state.active)return this.listenerCleanups.forEach(e=>e()),this.listenerCleanups=[],this}activate(e){if(this.state.active)return this;const s=this.getOption(e,"onActivate"),o=this.getOption(e,"onPostActivate"),t=this.getOption(e,"checkCanFocusTrap");t||this.updateTabbableNodes(),this.state.active=!0,this.state.paused=!1,this.state.nodeFocusedBeforeActivation=we(this.doc),s?.();const a=()=>{t&&this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),o?.()};return t?(t(this.state.containers.concat()).then(a,a),this):(a(),this)}},Se=e=>e.type==="keydown",Te=e=>Se(e)&&e?.key==="Tab",As=e=>Se(e)&&e.key==="Tab"&&!e?.shiftKey,Gs=e=>Se(e)&&e.key==="Tab"&&e?.shiftKey,ae=(e,...s)=>typeof e=="function"?e(...s):e,Bs=e=>!e.isComposing&&e.key==="Escape",Xe=e=>setTimeout(e,0),$s=e=>e.localName==="input"&&"select"in e&&typeof e.select=="function";function Ls(e,s={}){let o;const t=Pe(()=>{const i=(Array.isArray(e)?e:[e]).map(l=>typeof l=="function"?l():l).filter(l=>l!=null);if(i.length===0)return;const r=i[0];o=new Ss(i,{escapeDeactivates:!1,allowOutsideClick:!0,preventScroll:!0,returnFocusOnDeactivate:!0,delayInitialFocus:!1,fallbackFocus:r,...s,document:Je(r)});try{o.activate()}catch{}});return function(){o?.deactivate(),t()}}var xe="data-scroll-lock";function Ms(e){const s=e.getBoundingClientRect().left;return Math.round(s)+e.scrollLeft?"paddingLeft":"paddingRight"}function Ye(e){const o=Qe(e)?.scrollbarGutter;return o==="stable"||o?.startsWith("stable ")===!0}function Ks(e){const s=e??document,o=s.defaultView??window,{documentElement:t,body:a}=s;if(a.hasAttribute(xe))return;const r=Ye(t)||Ye(a),l=o.innerWidth-t.clientWidth;a.setAttribute(xe,"");const f=()=>Xt(t,"--scrollbar-width",`${l}px`),c=Ms(t),h=()=>{const n={overflow:"hidden"};return!r&&l>0&&(n[c]=`${l}px`),We(a,n)},b=()=>{const{scrollX:n,scrollY:p,visualViewport:R}=o,$=R?.offsetLeft??0,L=R?.offsetTop??0,G={position:"fixed",overflow:"hidden",top:`${-(p-Math.floor(L))}px`,left:`${-(n-Math.floor($))}px`,right:"0"};!r&&l>0&&(G[c]=`${l}px`);const oe=We(a,G);return()=>{oe?.(),o.scrollTo({left:n,top:p,behavior:"instant"})}},u=[f(),Ut()?b():h()];return()=>{u.forEach(n=>n?.()),a.removeAttribute(xe)}}var Vs=zt("dialog").parts("trigger","backdrop","positioner","content","title","description","closeTrigger"),W=Vs.build(),tt=e=>e.ids?.positioner??`dialog:${e.id}:positioner`,st=e=>e.ids?.backdrop??`dialog:${e.id}:backdrop`,Ie=e=>e.ids?.content??`dialog:${e.id}:content`,at=e=>e.ids?.trigger??`dialog:${e.id}:trigger`,De=e=>e.ids?.title??`dialog:${e.id}:title`,Re=e=>e.ids?.description??`dialog:${e.id}:description`,ot=e=>e.ids?.closeTrigger??`dialog:${e.id}:close`,he=e=>e.getById(Ie(e)),Ws=e=>e.getById(tt(e)),js=e=>e.getById(st(e)),Hs=e=>e.getById(at(e)),qs=e=>e.getById(De(e)),Us=e=>e.getById(Re(e)),Xs=e=>e.getById(ot(e));function Ys(e,s){const{state:o,send:t,context:a,prop:i,scope:r}=e,l=i("aria-label"),f=o.matches("open");return{open:f,setOpen(c){o.matches("open")!==c&&t({type:c?"OPEN":"CLOSE"})},getTriggerProps(){return s.button({...W.trigger.attrs,dir:i("dir"),id:at(r),"aria-haspopup":"dialog",type:"button","aria-expanded":f,"data-state":f?"open":"closed","aria-controls":Ie(r),onClick(c){c.defaultPrevented||t({type:"TOGGLE"})}})},getBackdropProps(){return s.element({...W.backdrop.attrs,dir:i("dir"),hidden:!f,id:st(r),"data-state":f?"open":"closed"})},getPositionerProps(){return s.element({...W.positioner.attrs,dir:i("dir"),id:tt(r),style:{pointerEvents:f?void 0:"none"}})},getContentProps(){const c=a.get("rendered");return s.element({...W.content.attrs,dir:i("dir"),role:i("role"),hidden:!f,id:Ie(r),tabIndex:-1,"data-state":f?"open":"closed","aria-modal":!0,"aria-label":l||void 0,"aria-labelledby":l||!c.title?void 0:De(r),"aria-describedby":c.description?Re(r):void 0})},getTitleProps(){return s.element({...W.title.attrs,dir:i("dir"),id:De(r)})},getDescriptionProps(){return s.element({...W.description.attrs,dir:i("dir"),id:Re(r)})},getCloseTriggerProps(){return s.button({...W.closeTrigger.attrs,dir:i("dir"),id:ot(r),type:"button",onClick(c){c.defaultPrevented||(c.stopPropagation(),t({type:"CLOSE"}))}})}}}var zs=Yt({props({props:e,scope:s}){const o=e.role==="alertdialog",t=o?()=>Xs(s):void 0,a=typeof e.modal=="boolean"?e.modal:!0;return{role:"dialog",modal:a,trapFocus:a,preventScroll:a,closeOnInteractOutside:!o,closeOnEscape:!0,restoreFocus:!0,initialFocusEl:t,...e}},initialState({prop:e}){return e("open")||e("defaultOpen")?"open":"closed"},context({bindable:e}){return{rendered:e(()=>({defaultValue:{title:!0,description:!0}}))}},watch({track:e,action:s,prop:o}){e([()=>o("open")],()=>{s(["toggleVisibility"])})},states:{open:{entry:["checkRenderedElements","syncZIndex"],effects:["trackDismissableElement","trapFocus","preventScroll","hideContentBelow"],on:{"CONTROLLED.CLOSE":{target:"closed"},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}]}},closed:{on:{"CONTROLLED.OPEN":{target:"open"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}]}}},implementations:{guards:{isOpenControlled:({prop:e})=>e("open")!=null},effects:{trackDismissableElement({scope:e,send:s,prop:o}){return Zt(()=>he(e),{type:"dialog",defer:!0,pointerBlocking:o("modal"),exclude:[Hs(e)],onInteractOutside(a){o("onInteractOutside")?.(a),o("closeOnInteractOutside")||a.preventDefault()},persistentElements:o("persistentElements"),onFocusOutside:o("onFocusOutside"),onPointerDownOutside:o("onPointerDownOutside"),onRequestDismiss:o("onRequestDismiss"),onEscapeKeyDown(a){o("onEscapeKeyDown")?.(a),o("closeOnEscape")||a.preventDefault()},onDismiss(){s({type:"CLOSE",src:"interact-outside"})}})},preventScroll({scope:e,prop:s}){if(s("preventScroll"))return Ks(e.getDoc())},trapFocus({scope:e,prop:s}){return s("trapFocus")?Ls(()=>he(e),{preventScroll:!0,returnFocusOnDeactivate:!!s("restoreFocus"),initialFocus:s("initialFocusEl"),setReturnFocus:t=>s("finalFocusEl")?.()??t,getShadowRoot:!0}):void 0},hideContentBelow({scope:e,prop:s}){return s("modal")?Ps(()=>[he(e)],{defer:!0}):void 0}},actions:{checkRenderedElements({context:e,scope:s}){Pe(()=>{e.set("rendered",{title:!!qs(s),description:!!Us(s)})})},syncZIndex({scope:e}){Pe(()=>{const s=he(e);if(!s)return;const o=Qe(s);[Ws(e),js(e)].forEach(a=>{a?.style.setProperty("--z-index",o.zIndex),a?.style.setProperty("--layer-index",o.getPropertyValue("--layer-index"))})})},invokeOnClose({prop:e}){e("onOpenChange")?.({open:!1})},invokeOnOpen({prop:e}){e("onOpenChange")?.({open:!0})},toggleVisibility({prop:e,send:s,event:o}){s({type:e("open")?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:o})}}}}),Zs=ts()(["aria-label","closeOnEscape","closeOnInteractOutside","dir","finalFocusEl","getRootNode","getRootNode","id","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","onRequestDismiss","defaultOpen","open","persistentElements","preventScroll","restoreFocus","role","trapFocus"]),Js=Jt(Zs);function Qs(e){const s=ss(zs,e),o=g(()=>Ys(s,as));return()=>d(o)}function ea(e,s){const o=Nt();I(s,!0);const t=V(s,["$$slots","$$events","$$legacy"]),a=g(()=>Js(t)),i=g(()=>Ft(d(a),2)),r=g(()=>d(i)[0]),l=g(()=>d(i)[1]),f=g(()=>d(l).children),c=Qs(()=>({...d(r),id:o}));A.provide(()=>c());var h=N(),b=w(h);T(b,()=>d(f)??M),m(e,h),D()}var ta=P("<div><!></div>");function sa(e,s){I(s,!0);const o=V(s,["$$slots","$$events","$$legacy"]),t=A.consume(),a=g(()=>s.element),i=g(()=>s.children),r=g(()=>j(o,["element","children"])),l=g(()=>H(t().getTitleProps(),d(r)));var f=N(),c=w(f);{var h=u=>{var n=N(),p=w(n);T(p,()=>d(a),()=>d(l)),m(u,n)},b=u=>{var n=ta();q(n,()=>({...d(l)}));var p=k(n);T(p,()=>d(i)??M),F(n),m(u,n)};K(c,u=>{d(a)?u(h):u(b,!1)})}m(e,f),D()}var aa=P("<button><!></button>");function oa(e,s){I(s,!0);const o=V(s,["$$slots","$$events","$$legacy"]),t=A.consume(),a=g(()=>s.element),i=g(()=>s.children),r=g(()=>j(o,["element","children"])),l=g(()=>H(t().getTriggerProps(),d(r)));var f=N(),c=w(f);{var h=u=>{var n=N(),p=w(n);T(p,()=>d(a),()=>d(l)),m(u,n)},b=u=>{var n=aa();q(n,()=>({...d(l)}));var p=k(n);T(p,()=>d(i)??M),F(n),m(u,n)};K(c,u=>{d(a)?u(h):u(b,!1)})}m(e,f),D()}const z=Object.assign(ea,{Provider:ws,Context:Os,Trigger:oa,Backdrop:fs,Positioner:ys,Content:bs,Title:sa,Description:ms,CloseTrigger:ps});function ra(e,s){I(s,!0);const o=kt(),t=g(()=>s.children),a=g(()=>Ve(s.disabled,!1)),i=g(()=>Ve(s.target,()=>typeof window>"u"?void 0:document.body,!0));ze(()=>{if(d(a)||!d(i))return;const c=Tt(d(t),{target:d(i),context:o});return()=>xt(c)});var r=N(),l=w(r);{var f=c=>{var h=N(),b=w(h);T(b,()=>d(t)),m(c,h)};K(l,c=>{(d(a)||!d(i))&&c(f)})}m(e,r),D()}const na=ra,ia=!0,la=!0,ca=!1,Ra=Object.freeze(Object.defineProperty({__proto__:null,csr:la,prerender:ia,ssr:ca},Symbol.toStringTag,{value:"Module"}));var da=P("<option> </option>"),ua=P('<button class="history-btn break break-ellipsis svelte-gu0rof"> </button>'),fa=P('<header class="flex justify-between items-center pywebview-drag-region can-drag"><!></header> <!> <footer class="flex justify-center gap-10 select-none  px-[10px] py-[10px]"><button title="Cancel" class="btn btn-base preset-tonal font-title"> </button> <button title="Update" type="button" class="btn btn-base preset-filled-primary-500 font-title"> </button></footer>',1),ha=P("<!> <!>",1),pa=P('<div><div class="search-div-input font-text svelte-gu0rof"><label class="label"><select></select></label> <label class="label"><input class=" input-style w-full border-radius font-text select-text" type="search" maxlength="1200"/></label></div> <div class="search-div-btn font-title svelte-gu0rof"><button class="svelte-gu0rof">删除历史</button> <button class="svelte-gu0rof">重新输入</button> <button class="svelte-gu0rof">搜 索</button></div> <div class="search-div-history font-text font-blue svelte-gu0rof"></div></div> <!>',1);function va(e,s){I(s,!0);let o=Oe(C.get_route()),t=ee("");const a=Qt.app.app_class+"search_selected",i=a+"_history",r="#@#"+i+"#@#";let l=ee(Oe([])),f=ee(Oe([])),c=ee(!1),h,b=ee(0);const u={close_dialog(){B(c,!1)},open_dialog(){B(c,!0)},create_select(){B(l,[{name:"Bing",value:"bing",url:"https://www.bing.com/?ensearch=1&q=",selected:"selected"}],!0),C.get_db_data(a).then(v=>{v||(v="bing");let _=Ce[v];_?(_.name,_.url,B(l,[],!0),Object.keys(Ce).forEach(E=>{let y=Ce[E],x=v===E?"selected":"";d(l).push({name:y.name,value:E,url:y.url,selected:x})})):C.notice("DB Error")})},update_select(v){let _=v.target.value;C.set_db_data(a,_).then(E=>{C.console_log("update_select=",_,E)})},filter_array(v=""){return v},show_history(v=""){if(console.log("show=",v),B(f,[],!0),v.length>0&&v.indexOf(r)!==-1){let _=v.split(r);for(let E=0;E<_.length;E++){let y=_[E];y.trim()&&d(f).push(y)}}else v.length>0&&v.indexOf(r)===-1&&d(f).push(v)},input_history(v=""){let _=this;return new Promise(E=>{C.get_db_data(i).then(y=>{if(v.trim().length>0){y?y=y+r+v:y=r+v;let x=_.filter_array(y);C.set_db_data(i,x).then(ve=>{_.show_history(x),E(x)})}else _.show_history(y)})})},input_enter(v){let _=this;v.key==="Enter"&&(console.log("Enter pressed:",d(t)),_.input_run_search())},input_run_search(){let v=this,_=d(t).trim();_?(clearTimeout(d(b)),C.loading_show(),v.input_history(_).then(E=>{v.input_auto_write(""),C.get_db_data(a).then(y=>{B(b,setTimeout(function(){C.loading_hide()},1500),!0),y||(y="bing");let x="./search?word="+encodeURIComponent(_)+"&engine="+y+"&url_timeout="+C.url_timeout_encode("search",360*60)+"&ap=ipt";window.open(x,"_blank")})})):(h.focus(),C.notice(C.get_translate("input_null")))},input_auto_write(v=""){B(t,v,!0)},input_clear_write(){this.input_auto_write(""),h.focus()},input_del_history(){C.loading_show(),C.del_db_data(a).then(v=>{B(c,!1),C.loading_hide()})}};function n(){console.log("page_start()=",o),u.create_select(),u.input_history("")}ze(()=>{}),Bt(()=>{!ls()||!cs()||n()}),It(()=>{});var p=pa(),R=w(p),$=k(R),L=k($),G=k(L);G.__change=v=>u.update_select(v),je(G,21,()=>d(l),He,(v,_)=>{var E=da(),y=k(E,!0);F(E);var x={};ie(()=>{is(E,d(_).selected),le(y,d(_).name),x!==(x=d(_).value)&&(E.value=(E.__value=d(_).value)??"")}),m(v,E)}),F(G),F(L);var oe=S(L,2),U=k(oe);ns(U),U.__keydown=v=>u.input_enter(v),rs(U,v=>h=v,()=>h),F(oe),F($);var pe=S($,2),Ae=k(pe);Ae.__click=()=>u.open_dialog();var Ge=S(Ae,2);Ge.__click=()=>u.input_clear_write();var rt=S(Ge,2);rt.__click=()=>u.input_run_search(),F(pe);var Be=S(pe,2);je(Be,21,()=>d(f),He,(v,_,E)=>{var y=ua();y.__click=()=>u.input_auto_write(d(_));var x=k(y,!0);F(y),ie(()=>{qe(y,"title",d(_)),le(x,"#"+(E+1)+" "+d(_)+" ")}),m(v,y)}),F(Be),F(R);var nt=S(R,2);z(nt,{closeOnInteractOutside:!1,closeOnEscape:!1,get open(){return d(c)},onOpenChange:()=>{},children:(v,_)=>{na(v,{children:(E,y)=>{var x=ha(),ve=w(x);se(ve,()=>z.Backdrop,(be,ge)=>{ge(be,{class:"fixed inset-0 z-50 bg-surface-50-950/80  select-none"})});var it=S(ve,2);se(it,()=>z.Positioner,(be,ge)=>{ge(be,{class:"fixed inset-0 z-50 flex justify-center items-center font-text select-none",children:(lt,ma)=>{var $e=N(),ct=w($e);se(ct,()=>z.Content,(dt,ut)=>{ut(dt,{class:"card bg-neutral-100 dark:bg-neutral-800 w-full max-w-xs p-4 space-y-4 shadow-xl transition transition-discrete opacity-0 translate-y-[100px] starting:data-[state=open]:opacity-0 starting:data-[state=open]:translate-y-[100px] data-[state=open]:opacity-100 data-[state=open]:translate-y-0  px-[10px] py-[10px] border-radius",children:(ft,_a)=>{var Le=fa(),me=w(Le),ht=k(me);se(ht,()=>z.Title,(Z,J)=>{J(Z,{class:"font-title font-bold",children:(ye,bt)=>{Ze();var ne=Rt("⚠️");m(ye,ne)},$$slots:{default:!0}})}),F(me);var Me=S(me,2);se(Me,()=>z.Description,(Z,J)=>{J(Z,{class:"font-text select-text",children:(ye,bt)=>{var ne=N(),gt=w(ne);os(gt,()=>C.get_translate("remove_help_2")),m(ye,ne)},$$slots:{default:!0}})});var Ke=S(Me,2),re=k(Ke);re.__click=()=>u.close_dialog();var pt=k(re,!0);F(re);var _e=S(re,2);_e.__click=()=>u.input_del_history();var vt=k(_e,!0);F(_e),F(Ke),ie((Z,J)=>{le(pt,Z),le(vt,J)},[()=>C.get_translate("btn_cancel"),()=>C.get_translate("remove")]),m(ft,Le)},$$slots:{default:!0}})}),m(lt,$e)},$$slots:{default:!0}})}),m(E,x)},$$slots:{default:!0}})},$$slots:{default:!0}}),ie(v=>qe(U,"placeholder",v),[()=>C.get_translate("input_placeholder_search")]),Dt("mouseenter",U,v=>v.currentTarget.focus()),ds(U,()=>d(t),v=>B(t,v)),m(e,p),D()}Pt(["change","keydown","click"]);var ba=P('<meta name="keywords" content=""/> <meta name="description" content=""/>',1),ga=P('<section class="section-main scroll-y-style bg-neutral-100 dark:bg-neutral-900"><!></section>');function Sa(e,s){I(s,!1),mt();var o=ga();Gt("1j6ictg",a=>{var i=ba();Ze(2),St(r=>{At.title=r??""},[()=>C.get_translate("Home")]),m(a,i)});var t=k(o);va(t,{}),F(o),m(e,o),D()}export{Sa as component,Ra as universal};
