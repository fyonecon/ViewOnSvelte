import"../chunks/DsnmJJEf.js";import{i as Ot}from"../chunks/CHttiA86.js";import{b0 as Ct,L as te,ao as Et,B as Nt,A as Ft,h as kt,b1 as xt,p as S,ap as N,f as C,a as m,b as A,Z as d,ar as b,c as I,aY as j,d as P,aX as K,r as F,a$ as Tt,b2 as Pt,b3 as It,G as Qe,aj as Dt,am as St,a_ as je,aa as At,F as le,ab as M,I as Rt,t as ce,b4 as Ee,_ as D,s as B,J as et,aq as Bt,e as de,K as Gt,$ as $t}from"../chunks/tUfXnmxI.js";import{h as Lt}from"../chunks/DDKT7HJS.js";import{a as Mt}from"../chunks/Cunj01dY.js";import{r as Kt,s as Vt,u as Se,v as tt,x as Wt,y as Ht,z as jt,A as qt,B as se,C as Y,D as Ne,E as ue,F as he,G as zt,H as Ut,J as Xt,K as Fe,L as Yt,N as st,O as Zt,P as qe,Q as Jt,R as Qt,S as es,T as ts,f as E,c as ss}from"../chunks/cesGV9A3.js";import{c as rs,s as x,m as q,a as as,u as os,n as ns,e as ze,i as Ue}from"../chunks/DjMvUou2.js";import{h as is}from"../chunks/CRM8gmPs.js";import{b as ls,c as re}from"../chunks/B2qPcPY0.js";import{a as z,c as cs,s as Xe,b as ds,r as us,d as hs}from"../chunks/D30d_LF5.js";import{s as ke}from"../chunks/54knkZjx.js";import{r as fs,b as ps}from"../chunks/DhxihCwL.js";import{i as V,r as W}from"../chunks/9lQ3pMiW.js";function vs(e,s,a=s){var t=new WeakSet;Ct(e,"input",async r=>{var i=r?e.defaultValue:e.value;if(i=xe(e)?Te(i):i,a(i),te!==null&&t.add(te),await Et(),i!==(i=s())){var o=e.selectionStart,l=e.selectionEnd,u=e.value.length;if(e.value=i??"",l!==null){var c=e.value.length;o===l&&l===u&&c>u?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=o,e.selectionEnd=Math.min(l,c))}}}),(kt&&e.defaultValue!==e.value||Nt(s)==null&&e.value)&&(a(xe(e)?Te(e.value):e.value),te!==null&&t.add(te)),Ft(()=>{var r=s();if(e===document.activeElement){var i=xt??te;if(t.has(i))return}xe(e)&&r===Te(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function xe(e){var s=e.type;return s==="number"||s==="range"}function Te(e){return e===""?null:+e}const G=rs();var gs=I("<div></div>");function bs(e,s){S(s,!0);const a=W(s,["$$slots","$$events","$$legacy"]),t=G.consume(),r=b(()=>s.element),i=b(()=>j(a,["element"])),o=b(()=>q(t().getBackdropProps(),d(i)));var l=N(),u=C(l);{var c=g=>{var h=N(),n=C(h);x(n,()=>d(r),()=>d(o)),m(g,h)},f=g=>{var h=gs();z(h,()=>({...d(o)})),m(g,h)};V(u,g=>{d(r)?g(c):g(f,!1)})}m(e,l),A()}var ms=I("<button><!></button>");function _s(e,s){S(s,!0);const a=W(s,["$$slots","$$events","$$legacy"]),t=G.consume(),r=b(()=>s.element),i=b(()=>s.children),o=b(()=>j(a,["element","children"])),l=b(()=>q(t().getCloseTriggerProps(),d(o)));var u=N(),c=C(u);{var f=h=>{var n=N(),v=C(n);x(v,()=>d(r),()=>d(l)),m(h,n)},g=h=>{var n=ms();z(n,()=>({...d(l)}));var v=P(n);x(v,()=>d(i)??K),F(n),m(h,n)};V(c,h=>{d(r)?h(f):h(g,!1)})}m(e,u),A()}var ys=I("<div><!></div>");function ws(e,s){S(s,!0);const a=W(s,["$$slots","$$events","$$legacy"]),t=G.consume(),r=b(()=>s.element),i=b(()=>s.children),o=b(()=>j(a,["element","children"])),l=b(()=>q(t().getContentProps(),d(o)));var u=N(),c=C(u);{var f=h=>{var n=N(),v=C(n);x(v,()=>d(r),()=>d(l)),m(h,n)},g=h=>{var n=ys();z(n,()=>({...d(l)}));var v=P(n);x(v,()=>d(i)??K),F(n),m(h,n)};V(c,h=>{d(r)?h(f):h(g,!1)})}m(e,u),A()}var Os=I("<div><!></div>");function Cs(e,s){S(s,!0);const a=W(s,["$$slots","$$events","$$legacy"]),t=G.consume(),r=b(()=>s.element),i=b(()=>s.children),o=b(()=>j(a,["element","children"])),l=b(()=>q(t().getDescriptionProps(),d(o)));var u=N(),c=C(u);{var f=h=>{var n=N(),v=C(n);x(v,()=>d(r),()=>d(l)),m(h,n)},g=h=>{var n=Os();z(n,()=>({...d(l)}));var v=P(n);x(v,()=>d(i)??K),F(n),m(h,n)};V(c,h=>{d(r)?h(f):h(g,!1)})}m(e,u),A()}var Es=I("<div><!></div>");function Ns(e,s){S(s,!0);const a=W(s,["$$slots","$$events","$$legacy"]),t=G.consume(),r=b(()=>s.element),i=b(()=>s.children),o=b(()=>j(a,["element","children"])),l=b(()=>q(t().getPositionerProps(),d(o)));var u=N(),c=C(u);{var f=h=>{var n=N(),v=C(n);x(v,()=>d(r),()=>d(l)),m(h,n)},g=h=>{var n=Es();z(n,()=>({...d(l)}));var v=P(n);x(v,()=>d(i)??K),F(n),m(h,n)};V(c,h=>{d(r)?h(f):h(g,!1)})}m(e,u),A()}function Fs(e,s){S(s,!0);const a=G.consume(),t=b(()=>s.children);var r=N(),i=C(r);x(i,()=>d(t),()=>a),m(e,r),A()}function ks(e,s){S(s,!0);const a=b(()=>s.children),t=b(()=>s.value);G.provide(()=>d(t)());var r=N(),i=C(r);x(i,()=>d(a)??K),m(e,r),A()}var Z=new WeakMap,fe=new WeakMap,pe={},Pe=0,rt=e=>e&&(e.host||rt(e.parentNode)),xs=(e,s)=>s.map(a=>{if(e.contains(a))return a;const t=rt(a);return t&&e.contains(t)?t:(console.error("[zag-js > ariaHidden] target",a,"in not contained inside",e,". Doing nothing"),null)}).filter(a=>!!a),Ts=new Set(["script","output","status","next-route-announcer"]),Ps=e=>Ts.has(e.localName)||e.role==="status"||e.hasAttribute("aria-live")?!0:e.matches("[data-live-announcer]"),Is=(e,s)=>{const{parentNode:a,markerName:t,controlAttribute:r,followControlledElements:i=!0}=s,o=xs(a,Array.isArray(e)?e:[e]);pe[t]||(pe[t]=new WeakMap);const l=pe[t],u=[],c=new Set,f=new Set(o),g=n=>{!n||c.has(n)||(c.add(n),g(n.parentNode))};o.forEach(n=>{g(n),i&&Kt(n)&&Vt(n,v=>{g(v)})});const h=n=>{!n||f.has(n)||Array.prototype.forEach.call(n.children,v=>{if(c.has(v))h(v);else try{if(Ps(v))return;const k=v.getAttribute(r)==="true",U=(Z.get(v)||0)+1,L=(l.get(v)||0)+1;Z.set(v,U),l.set(v,L),u.push(v),U===1&&k&&fe.set(v,!0),L===1&&v.setAttribute(t,""),k||v.setAttribute(r,"true")}catch(R){console.error("[zag-js > ariaHidden] cannot operate on ",v,R)}})};return h(a),c.clear(),Pe++,()=>{u.forEach(n=>{const v=Z.get(n)-1,R=l.get(n)-1;Z.set(n,v),l.set(n,R),v||(fe.has(n)||n.removeAttribute(r),fe.delete(n)),R||n.removeAttribute(t)}),Pe--,Pe||(Z=new WeakMap,Z=new WeakMap,fe=new WeakMap,pe={})}},Ds=e=>(Array.isArray(e)?e[0]:e).ownerDocument.body,Ss=(e,s=Ds(e),a="data-aria-hidden",t=!0)=>{if(s)return Is(e,{parentNode:s,markerName:a,controlAttribute:"aria-hidden",followControlledElements:t})},As=e=>{const s=requestAnimationFrame(()=>e());return()=>cancelAnimationFrame(s)};function Rs(e,s={}){const{defer:a=!0}=s,t=a?As:i=>i(),r=[];return r.push(t(()=>{const o=(typeof e=="function"?e():e).filter(Boolean);o.length!==0&&r.push(Ss(o))})),()=>{r.forEach(i=>i?.())}}var Bs=Object.defineProperty,Gs=(e,s,a)=>s in e?Bs(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,O=(e,s,a)=>Gs(e,typeof s!="symbol"?s+"":s,a),Ye={activateTrap(e,s){if(e.length>0){const t=e[e.length-1];t!==s&&t.pause()}const a=e.indexOf(s);a===-1||e.splice(a,1),e.push(s)},deactivateTrap(e,s){const a=e.indexOf(s);a!==-1&&e.splice(a,1),e.length>0&&e[e.length-1].unpause()}},$s=[],Ls=class{constructor(e,s){O(this,"trapStack"),O(this,"config"),O(this,"doc"),O(this,"state",{containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0}),O(this,"portalContainers",new Set),O(this,"listenerCleanups",[]),O(this,"handleFocus",t=>{const r=he(t),i=this.findContainerIndex(r,t)>=0;if(i||zt(r))i&&(this.state.mostRecentlyFocusedNode=r);else{t.stopImmediatePropagation();let o,l=!0;if(this.state.mostRecentlyFocusedNode)if(se(this.state.mostRecentlyFocusedNode)>0){const u=this.findContainerIndex(this.state.mostRecentlyFocusedNode),{tabbableNodes:c}=this.state.containerGroups[u];if(c.length>0){const f=c.findIndex(g=>g===this.state.mostRecentlyFocusedNode);f>=0&&(this.config.isKeyForward(this.state.recentNavEvent)?f+1<c.length&&(o=c[f+1],l=!1):f-1>=0&&(o=c[f-1],l=!1))}}else this.state.containerGroups.some(u=>u.tabbableNodes.some(c=>se(c)>0))||(l=!1);else l=!1;l&&(o=this.findNextNavNode({target:this.state.mostRecentlyFocusedNode,isBackward:this.config.isKeyBackward(this.state.recentNavEvent)})),o?this.tryFocus(o):this.tryFocus(this.state.mostRecentlyFocusedNode||this.getInitialFocusNode())}this.state.recentNavEvent=void 0}),O(this,"handlePointerDown",t=>{const r=he(t);if(!(this.findContainerIndex(r,t)>=0)){if(ae(this.config.clickOutsideDeactivates,t)){this.deactivate({returnFocus:this.config.returnFocusOnDeactivate});return}ae(this.config.allowOutsideClick,t)||t.preventDefault()}}),O(this,"handleClick",t=>{const r=he(t);this.findContainerIndex(r,t)>=0||ae(this.config.clickOutsideDeactivates,t)||ae(this.config.allowOutsideClick,t)||(t.preventDefault(),t.stopImmediatePropagation())}),O(this,"handleTabKey",t=>{if(this.config.isKeyForward(t)||this.config.isKeyBackward(t)){this.state.recentNavEvent=t;const r=this.config.isKeyBackward(t),i=this.findNextNavNode({event:t,isBackward:r});if(!i)return;Ie(t)&&t.preventDefault(),this.tryFocus(i)}}),O(this,"handleEscapeKey",t=>{Vs(t)&&ae(this.config.escapeDeactivates,t)!==!1&&(t.preventDefault(),this.deactivate())}),O(this,"_mutationObserver"),O(this,"setupMutationObserver",()=>{const t=this.doc.defaultView||window;this._mutationObserver=new t.MutationObserver(r=>{r.some(l=>Array.from(l.removedNodes).some(c=>c===this.state.mostRecentlyFocusedNode))&&this.tryFocus(this.getInitialFocusNode()),r.some(l=>l.type==="attributes"&&(l.attributeName==="aria-controls"||l.attributeName==="aria-expanded")?!0:l.type==="childList"&&l.addedNodes.length>0?Array.from(l.addedNodes).some(u=>{if(u.nodeType!==Node.ELEMENT_NODE)return!1;const c=u;return Ut(c)?!0:c.id&&!this.state.containers.some(f=>f.contains(c))?Xt(c):!1}):!1)&&this.state.active&&!this.state.paused&&(this.updateTabbableNodes(),this.updatePortalContainers())})}),O(this,"updateObservedNodes",()=>{this._mutationObserver?.disconnect(),this.state.active&&!this.state.paused&&(this.state.containers.map(t=>{this._mutationObserver?.observe(t,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["aria-controls","aria-expanded"]})}),this.portalContainers.forEach(t=>{this.observePortalContainer(t)}))}),O(this,"getInitialFocusNode",()=>{let t=this.getNodeForOption("initialFocus",{hasFallback:!0});if(t===!1)return!1;if(t===void 0||t&&!Fe(t)){const r=Ne(this.doc);if(r&&this.findContainerIndex(r)>=0)t=r;else{const i=this.state.tabbableGroups[0];t=i&&i.firstTabbableNode||this.getNodeForOption("fallbackFocus")}}else t===null&&(t=this.getNodeForOption("fallbackFocus"));if(!t)throw new Error("Your focus-trap needs to have at least one focusable element");return t.isConnected||(t=this.getNodeForOption("fallbackFocus")),t}),O(this,"tryFocus",t=>{if(t!==!1&&t!==Ne(this.doc)){if(!t||!t.focus){this.tryFocus(this.getInitialFocusNode());return}t.focus({preventScroll:!!this.config.preventScroll}),this.state.mostRecentlyFocusedNode=t,Ws(t)&&t.select()}}),O(this,"deactivate",t=>{if(!this.state.active)return this;const r={onDeactivate:this.config.onDeactivate,onPostDeactivate:this.config.onPostDeactivate,checkCanReturnFocus:this.config.checkCanReturnFocus,...t};clearTimeout(this.state.delayInitialFocusTimer),this.state.delayInitialFocusTimer=void 0,this.removeListeners(),this.state.active=!1,this.state.paused=!1,this.updateObservedNodes(),Ye.deactivateTrap(this.trapStack,this),this.portalContainers.clear();const i=this.getOption(r,"onDeactivate"),o=this.getOption(r,"onPostDeactivate"),l=this.getOption(r,"checkCanReturnFocus"),u=this.getOption(r,"returnFocus","returnFocusOnDeactivate");i?.();const c=()=>{Ze(()=>{if(u){const f=this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation);this.tryFocus(f)}o?.()})};if(u&&l){const f=this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation);return l(f).then(c,c),this}return c(),this}),O(this,"pause",t=>{if(this.state.paused||!this.state.active)return this;const r=this.getOption(t,"onPause"),i=this.getOption(t,"onPostPause");return this.state.paused=!0,r?.(),this.removeListeners(),this.updateObservedNodes(),i?.(),this}),O(this,"unpause",t=>{if(!this.state.paused||!this.state.active)return this;const r=this.getOption(t,"onUnpause"),i=this.getOption(t,"onPostUnpause");return this.state.paused=!1,r?.(),this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),i?.(),this}),O(this,"updateContainerElements",t=>(this.state.containers=Array.isArray(t)?t.filter(Boolean):[t].filter(Boolean),this.state.active&&this.updateTabbableNodes(),this.updateObservedNodes(),this)),O(this,"getReturnFocusNode",t=>{const r=this.getNodeForOption("setReturnFocus",{params:[t]});return r||(r===!1?!1:t)}),O(this,"getOption",(t,r,i)=>t&&t[r]!==void 0?t[r]:this.config[i||r]),O(this,"getNodeForOption",(t,{hasFallback:r=!1,params:i=[]}={})=>{let o=this.config[t];if(typeof o=="function"&&(o=o(...i)),o===!0&&(o=void 0),!o){if(o===void 0||o===!1)return o;throw new Error(`\`${t}\` was specified but was not a node, or did not return a node`)}let l=o;if(typeof o=="string"){try{l=this.doc.querySelector(o)}catch(u){throw new Error(`\`${t}\` appears to be an invalid selector; error="${u.message}"`)}if(!l&&!r)throw new Error(`\`${t}\` as selector refers to no known node`)}return l}),O(this,"findNextNavNode",t=>{const{event:r,isBackward:i=!1}=t,o=t.target||he(r);this.updateTabbableNodes();let l=null;if(this.state.tabbableGroups.length>0){const u=this.findContainerIndex(o,r),c=u>=0?this.state.containerGroups[u]:void 0;if(u<0)i?l=this.state.tabbableGroups[this.state.tabbableGroups.length-1].lastTabbableNode:l=this.state.tabbableGroups[0].firstTabbableNode;else if(i){let f=this.state.tabbableGroups.findIndex(({firstTabbableNode:g})=>o===g);if(f<0&&(c?.container===o||Fe(o)&&!ue(o)&&!c?.nextTabbableNode(o,!1))&&(f=u),f>=0){const g=f===0?this.state.tabbableGroups.length-1:f-1,h=this.state.tabbableGroups[g];l=se(o)>=0?h.lastTabbableNode:h.lastDomTabbableNode}else Ie(r)||(l=c?.nextTabbableNode(o,!1))}else{let f=this.state.tabbableGroups.findIndex(({lastTabbableNode:g})=>o===g);if(f<0&&(c?.container===o||Fe(o)&&!ue(o)&&!c?.nextTabbableNode(o))&&(f=u),f>=0){const g=f===this.state.tabbableGroups.length-1?0:f+1,h=this.state.tabbableGroups[g];l=se(o)>=0?h.firstTabbableNode:h.firstDomTabbableNode}else Ie(r)||(l=c?.nextTabbableNode(o))}}else l=this.getNodeForOption("fallbackFocus");return l}),this.trapStack=s.trapStack||$s;const a={returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,followControlledElements:!0,isKeyForward:Ms,isKeyBackward:Ks,...s};this.doc=a.document||tt(Array.isArray(e)?e[0]:e),this.config=a,this.updateContainerElements(e),this.setupMutationObserver()}addPortalContainer(e){const s=e.parentElement;s&&!this.portalContainers.has(s)&&(this.portalContainers.add(s),this.state.active&&!this.state.paused&&this.observePortalContainer(s))}observePortalContainer(e){this._mutationObserver?.observe(e,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["aria-controls","aria-expanded"]})}updatePortalContainers(){this.config.followControlledElements&&this.state.containers.forEach(e=>{Wt(e).forEach(a=>{this.addPortalContainer(a)})})}get active(){return this.state.active}get paused(){return this.state.paused}findContainerIndex(e,s){const a=typeof s?.composedPath=="function"?s.composedPath():void 0;return this.state.containerGroups.findIndex(({container:t,tabbableNodes:r})=>t.contains(e)||a?.includes(t)||r.find(i=>i===e)||this.isControlledElement(t,e))}isControlledElement(e,s){return this.config.followControlledElements?Ht(e,s):!1}updateTabbableNodes(){if(this.state.containerGroups=this.state.containers.map(e=>{const s=jt(e,{getShadowRoot:this.config.getShadowRoot}),a=qt(e,{getShadowRoot:this.config.getShadowRoot}),t=s[0],r=s[s.length-1],i=t,o=r;let l=!1;for(let c=0;c<s.length;c++)if(se(s[c])>0){l=!0;break}function u(c,f=!0){const g=s.indexOf(c);if(g>=0)return s[g+(f?1:-1)];const h=a.indexOf(c);if(!(h<0)){if(f){for(let n=h+1;n<a.length;n++)if(ue(a[n]))return a[n]}else for(let n=h-1;n>=0;n--)if(ue(a[n]))return a[n]}}return{container:e,tabbableNodes:s,focusableNodes:a,posTabIndexesFound:l,firstTabbableNode:t,lastTabbableNode:r,firstDomTabbableNode:i,lastDomTabbableNode:o,nextTabbableNode:u}}),this.state.tabbableGroups=this.state.containerGroups.filter(e=>e.tabbableNodes.length>0),this.state.tabbableGroups.length<=0&&!this.getNodeForOption("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(this.state.containerGroups.find(e=>e.posTabIndexesFound)&&this.state.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")}addListeners(){if(this.state.active)return Ye.activateTrap(this.trapStack,this),this.state.delayInitialFocusTimer=this.config.delayInitialFocus?Ze(()=>{this.tryFocus(this.getInitialFocusNode())}):this.tryFocus(this.getInitialFocusNode()),this.listenerCleanups.push(Y(this.doc,"focusin",this.handleFocus,!0),Y(this.doc,"mousedown",this.handlePointerDown,{capture:!0,passive:!1}),Y(this.doc,"touchstart",this.handlePointerDown,{capture:!0,passive:!1}),Y(this.doc,"click",this.handleClick,{capture:!0,passive:!1}),Y(this.doc,"keydown",this.handleTabKey,{capture:!0,passive:!1}),Y(this.doc,"keydown",this.handleEscapeKey)),this}removeListeners(){if(this.state.active)return this.listenerCleanups.forEach(e=>e()),this.listenerCleanups=[],this}activate(e){if(this.state.active)return this;const s=this.getOption(e,"onActivate"),a=this.getOption(e,"onPostActivate"),t=this.getOption(e,"checkCanFocusTrap");t||this.updateTabbableNodes(),this.state.active=!0,this.state.paused=!1,this.state.nodeFocusedBeforeActivation=Ne(this.doc),s?.();const r=()=>{t&&this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),a?.()};return t?(t(this.state.containers.concat()).then(r,r),this):(r(),this)}},Ge=e=>e.type==="keydown",Ie=e=>Ge(e)&&e?.key==="Tab",Ms=e=>Ge(e)&&e.key==="Tab"&&!e?.shiftKey,Ks=e=>Ge(e)&&e.key==="Tab"&&e?.shiftKey,ae=(e,...s)=>typeof e=="function"?e(...s):e,Vs=e=>!e.isComposing&&e.key==="Escape",Ze=e=>setTimeout(e,0),Ws=e=>e.localName==="input"&&"select"in e&&typeof e.select=="function";function Hs(e,s={}){let a;const t=Se(()=>{const i=(Array.isArray(e)?e:[e]).map(l=>typeof l=="function"?l():l).filter(l=>l!=null);if(i.length===0)return;const o=i[0];a=new Ls(i,{escapeDeactivates:!1,allowOutsideClick:!0,preventScroll:!0,returnFocusOnDeactivate:!0,delayInitialFocus:!1,fallbackFocus:o,...s,document:tt(o)});try{a.activate()}catch{}});return function(){a?.deactivate(),t()}}var De="data-scroll-lock";function js(e){const s=e.getBoundingClientRect().left;return Math.round(s)+e.scrollLeft?"paddingLeft":"paddingRight"}function Je(e){const a=st(e)?.scrollbarGutter;return a==="stable"||a?.startsWith("stable ")===!0}function qs(e){const s=e??document,a=s.defaultView??window,{documentElement:t,body:r}=s;if(r.hasAttribute(De))return;const o=Je(t)||Je(r),l=a.innerWidth-t.clientWidth;r.setAttribute(De,"");const u=()=>Zt(t,"--scrollbar-width",`${l}px`),c=js(t),f=()=>{const n={overflow:"hidden"};return!o&&l>0&&(n[c]=`${l}px`),qe(r,n)},g=()=>{const{scrollX:n,scrollY:v,visualViewport:R}=a,k=R?.offsetLeft??0,U=R?.offsetTop??0,L={position:"fixed",overflow:"hidden",top:`${-(v-Math.floor(U))}px`,left:`${-(n-Math.floor(k))}px`,right:"0"};!o&&l>0&&(L[c]=`${l}px`);const X=qe(r,L);return()=>{X?.(),a.scrollTo({left:n,top:v,behavior:"instant"})}},h=[u(),Yt()?g():f()];return()=>{h.forEach(n=>n?.()),r.removeAttribute(De)}}var zs=Qt("dialog").parts("trigger","backdrop","positioner","content","title","description","closeTrigger"),H=zs.build(),at=e=>e.ids?.positioner??`dialog:${e.id}:positioner`,ot=e=>e.ids?.backdrop??`dialog:${e.id}:backdrop`,Ae=e=>e.ids?.content??`dialog:${e.id}:content`,nt=e=>e.ids?.trigger??`dialog:${e.id}:trigger`,Re=e=>e.ids?.title??`dialog:${e.id}:title`,Be=e=>e.ids?.description??`dialog:${e.id}:description`,it=e=>e.ids?.closeTrigger??`dialog:${e.id}:close`,ve=e=>e.getById(Ae(e)),Us=e=>e.getById(at(e)),Xs=e=>e.getById(ot(e)),Ys=e=>e.getById(nt(e)),Zs=e=>e.getById(Re(e)),Js=e=>e.getById(Be(e)),Qs=e=>e.getById(it(e));function er(e,s){const{state:a,send:t,context:r,prop:i,scope:o}=e,l=i("aria-label"),u=a.matches("open");return{open:u,setOpen(c){a.matches("open")!==c&&t({type:c?"OPEN":"CLOSE"})},getTriggerProps(){return s.button({...H.trigger.attrs,dir:i("dir"),id:nt(o),"aria-haspopup":"dialog",type:"button","aria-expanded":u,"data-state":u?"open":"closed","aria-controls":Ae(o),onClick(c){c.defaultPrevented||t({type:"TOGGLE"})}})},getBackdropProps(){return s.element({...H.backdrop.attrs,dir:i("dir"),hidden:!u,id:ot(o),"data-state":u?"open":"closed"})},getPositionerProps(){return s.element({...H.positioner.attrs,dir:i("dir"),id:at(o),style:{pointerEvents:u?void 0:"none"}})},getContentProps(){const c=r.get("rendered");return s.element({...H.content.attrs,dir:i("dir"),role:i("role"),hidden:!u,id:Ae(o),tabIndex:-1,"data-state":u?"open":"closed","aria-modal":!0,"aria-label":l||void 0,"aria-labelledby":l||!c.title?void 0:Re(o),"aria-describedby":c.description?Be(o):void 0})},getTitleProps(){return s.element({...H.title.attrs,dir:i("dir"),id:Re(o)})},getDescriptionProps(){return s.element({...H.description.attrs,dir:i("dir"),id:Be(o)})},getCloseTriggerProps(){return s.button({...H.closeTrigger.attrs,dir:i("dir"),id:it(o),type:"button",onClick(c){c.defaultPrevented||(c.stopPropagation(),t({type:"CLOSE"}))}})}}}var tr=Jt({props({props:e,scope:s}){const a=e.role==="alertdialog",t=a?()=>Qs(s):void 0,r=typeof e.modal=="boolean"?e.modal:!0;return{role:"dialog",modal:r,trapFocus:r,preventScroll:r,closeOnInteractOutside:!a,closeOnEscape:!0,restoreFocus:!0,initialFocusEl:t,...e}},initialState({prop:e}){return e("open")||e("defaultOpen")?"open":"closed"},context({bindable:e}){return{rendered:e(()=>({defaultValue:{title:!0,description:!0}}))}},watch({track:e,action:s,prop:a}){e([()=>a("open")],()=>{s(["toggleVisibility"])})},states:{open:{entry:["checkRenderedElements","syncZIndex"],effects:["trackDismissableElement","trapFocus","preventScroll","hideContentBelow"],on:{"CONTROLLED.CLOSE":{target:"closed"},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}]}},closed:{on:{"CONTROLLED.OPEN":{target:"open"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}]}}},implementations:{guards:{isOpenControlled:({prop:e})=>e("open")!=null},effects:{trackDismissableElement({scope:e,send:s,prop:a}){return es(()=>ve(e),{type:"dialog",defer:!0,pointerBlocking:a("modal"),exclude:[Ys(e)],onInteractOutside(r){a("onInteractOutside")?.(r),a("closeOnInteractOutside")||r.preventDefault()},persistentElements:a("persistentElements"),onFocusOutside:a("onFocusOutside"),onPointerDownOutside:a("onPointerDownOutside"),onRequestDismiss:a("onRequestDismiss"),onEscapeKeyDown(r){a("onEscapeKeyDown")?.(r),a("closeOnEscape")||r.preventDefault()},onDismiss(){s({type:"CLOSE",src:"interact-outside"})}})},preventScroll({scope:e,prop:s}){if(s("preventScroll"))return qs(e.getDoc())},trapFocus({scope:e,prop:s}){return s("trapFocus")?Hs(()=>ve(e),{preventScroll:!0,returnFocusOnDeactivate:!!s("restoreFocus"),initialFocus:s("initialFocusEl"),setReturnFocus:t=>s("finalFocusEl")?.()??t,getShadowRoot:!0}):void 0},hideContentBelow({scope:e,prop:s}){return s("modal")?Rs(()=>[ve(e)],{defer:!0}):void 0}},actions:{checkRenderedElements({context:e,scope:s}){Se(()=>{e.set("rendered",{title:!!Zs(s),description:!!Js(s)})})},syncZIndex({scope:e}){Se(()=>{const s=ve(e);if(!s)return;const a=st(s);[Us(e),Xs(e)].forEach(r=>{r?.style.setProperty("--z-index",a.zIndex),r?.style.setProperty("--layer-index",a.getPropertyValue("--layer-index"))})})},invokeOnClose({prop:e}){e("onOpenChange")?.({open:!1})},invokeOnOpen({prop:e}){e("onOpenChange")?.({open:!0})},toggleVisibility({prop:e,send:s,event:a}){s({type:e("open")?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:a})}}}}),sr=as()(["aria-label","closeOnEscape","closeOnInteractOutside","dir","finalFocusEl","getRootNode","getRootNode","id","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","onRequestDismiss","defaultOpen","open","persistentElements","preventScroll","restoreFocus","role","trapFocus"]),rr=ts(sr);function ar(e){const s=os(tr,e),a=b(()=>er(s,ns));return()=>d(a)}function or(e,s){const a=Tt();S(s,!0);const t=W(s,["$$slots","$$events","$$legacy"]),r=b(()=>rr(t)),i=b(()=>Pt(d(r),2)),o=b(()=>d(i)[0]),l=b(()=>d(i)[1]),u=b(()=>d(l).children),c=ar(()=>({...d(o),id:a}));G.provide(()=>c());var f=N(),g=C(f);x(g,()=>d(u)??K),m(e,f),A()}var nr=I("<div><!></div>");function ir(e,s){S(s,!0);const a=W(s,["$$slots","$$events","$$legacy"]),t=G.consume(),r=b(()=>s.element),i=b(()=>s.children),o=b(()=>j(a,["element","children"])),l=b(()=>q(t().getTitleProps(),d(o)));var u=N(),c=C(u);{var f=h=>{var n=N(),v=C(n);x(v,()=>d(r),()=>d(l)),m(h,n)},g=h=>{var n=nr();z(n,()=>({...d(l)}));var v=P(n);x(v,()=>d(i)??K),F(n),m(h,n)};V(c,h=>{d(r)?h(f):h(g,!1)})}m(e,u),A()}var lr=I("<button><!></button>");function cr(e,s){S(s,!0);const a=W(s,["$$slots","$$events","$$legacy"]),t=G.consume(),r=b(()=>s.element),i=b(()=>s.children),o=b(()=>j(a,["element","children"])),l=b(()=>q(t().getTriggerProps(),d(o)));var u=N(),c=C(u);{var f=h=>{var n=N(),v=C(n);x(v,()=>d(r),()=>d(l)),m(h,n)},g=h=>{var n=lr();z(n,()=>({...d(l)}));var v=P(n);x(v,()=>d(i)??K),F(n),m(h,n)};V(c,h=>{d(r)?h(f):h(g,!1)})}m(e,u),A()}const J=Object.assign(or,{Provider:ks,Context:Fs,Trigger:cr,Backdrop:bs,Positioner:Ns,Content:ws,Title:ir,Description:Cs,CloseTrigger:_s});function dr(e,s){S(s,!0);const a=It(),t=b(()=>s.children),r=b(()=>je(s.disabled,!1)),i=b(()=>je(s.target,()=>typeof window>"u"?void 0:document.body,!0));Qe(()=>{if(d(r)||!d(i))return;const c=Dt(d(t),{target:d(i),context:a});return()=>St(c)});var o=N(),l=C(o);{var u=c=>{var f=N(),g=C(f);x(g,()=>d(t)),m(c,f)};V(l,c=>{(d(r)||!d(i))&&c(u)})}m(e,o),A()}const ur=dr,hr=!0,fr=!0,pr=!1,$r=Object.freeze(Object.defineProperty({__proto__:null,csr:fr,prerender:hr,ssr:pr},Symbol.toStringTag,{value:"Module"}));var vr=I("<option> </option>"),gr=I('<button class="history-btn break break-ellipsis svelte-gu0rof"> </button>'),br=I('<header class="flex justify-between items-center pywebview-drag-region can-drag"><!></header> <!> <footer class="flex justify-center gap-10 select-none  px-[10px] py-[10px]"><button title="Cancel" class="btn btn-base preset-tonal font-title"> </button> <button title="Update" type="button" class="btn btn-base preset-filled-primary-500 font-title"> </button></footer>',1),mr=I("<!> <!>",1),_r=I('<div class="search-div  svelte-gu0rof"><div class="search-div-input svelte-gu0rof"><select class="search-div-input-select input-border font-text  svelte-gu0rof"></select> <input class="search-div-input-input input-border w-full font-title select-text svelte-gu0rof" type="search" maxlength="1200"/> <span><svg class="hide" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 20 20"><path fill="currentColor" d="M11.199 4.6c-.6-.8-1.801-.8-2.401 0l-4.496 6.002c-.74.989-.035 2.4 1.2 2.4h8.995c1.236 0 1.941-1.412 1.2-2.4zM4 15a.5.5 0 0 0 0 1h12a.5.5 0 0 0 0-1z"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M12 17a1.72 1.72 0 0 1-1.33-.64l-4.21-5.1a2.1 2.1 0 0 1-.26-2.21A1.76 1.76 0 0 1 7.79 8h8.42a1.76 1.76 0 0 1 1.59 1.05a2.1 2.1 0 0 1-.26 2.21l-4.21 5.1A1.72 1.72 0 0 1 12 17"></path></svg></span></div> <div class="search-div-btn font-text svelte-gu0rof"><button class="search-div-btn-btn break-ellipsis btn-border font-red svelte-gu0rof">删除历史</button> <button class="search-div-btn-btn break-ellipsis btn-border svelte-gu0rof">重新输入</button> <button class="search-div-btn-btn break-ellipsis btn-border svelte-gu0rof">搜 索</button></div> <div class="search-div-history font-text font-blue scroll-y-style svelte-gu0rof"></div></div> <!>',1);function yr(e,s){S(s,!0);let a=le(E.get_route()),t=M("");const r=ss.app.app_class+"search_selected",i=r+"_history",o="#@#"+i+"#@#",l=200;let u=M(le([])),c=M(le([])),f=M(!1),g,h=M(0),n=M(0),v=M("search-div-input-select-blur"),R=M(le(window.innerHeight>window.innerWidth?window.innerHeight:window.innerWidth));const k={close_dialog(){D(f,!1)},open_dialog(){D(f,!0)},create_select(){D(u,[{name:"Bing",value:"bing",url:"https://www.bing.com/?ensearch=1&q=",selected:"selected"}],!0),E.get_db_data(r).then(p=>{p||(p="bing");let _=ke[p];_?(_.name,_.url,D(u,[],!0),Object.keys(ke).forEach(y=>{let w=ke[y],T=p===y?"selected":"";d(u).push({name:w.name,value:y,url:w.url,selected:T})})):E.notice("DB Error")}),window.addEventListener("resize",function(){D(R,window.innerHeight,!0)})},update_select(p){let _=p.target.value;E.set_db_data(r,_).then(y=>{E.console_log("update_select=",_,y)})},filter_array(p=""){let _="";if(p.length>0&&p.indexOf(o)!==-1){let y=p.split(o);y=Array.from(new Set(y));let w=0;y.length>l&&(w=l-y.length),y=y.slice(w),_=y.join(o)}else p.length>0&&p.indexOf(o)===-1&&(_=p);return _},show_history(p=""){if(D(c,[],!0),p.length>0&&p.indexOf(o)!==-1){let _=p.split(o);for(let y=0;y<_.length;y++){let w=_[y];w.trim()&&d(c).push(w)}}else p.length>0&&p.indexOf(o)===-1&&d(c).push(p)},input_history(p=""){let _=this;return new Promise(y=>{E.get_db_data(i).then(w=>{if(p.trim().length>0){w?w=w+o+p:w=o+p;let T=_.filter_array(w);E.set_db_data(i,T).then(me=>{_.show_history(T),y(T)})}else _.show_history(w)})})},input_enter(p){let _=this;p.key==="Enter"&&(console.log("Enter pressed:",d(t)),_.input_run_search())},input_run_search(){let p=this;E.loading_show();let _=d(t).trim();_?(clearTimeout(d(h)),clearTimeout(d(n)),p.input_history(_).then(y=>{p.input_auto_write(""),E.get_db_data(r).then(w=>{D(h,setTimeout(function(){E.loading_hide()},2e3),!0),w||(w="bing");let T="./search?word="+encodeURIComponent(_)+"&engine="+w+"&url_timeout="+E.url_timeout_encode("search",360*60)+"&ap=ipt";D(n,setTimeout(function(){E.is_mobile_screen()?window.open(T,"_self"):window.open(T,"_blank")},400),!0)})})):(g.focus(),E.loading_hide(),E.notice(E.get_translate("input_null"),"",2e3))},input_auto_write(p=""){D(t,p,!0)},input_clear_write(){this.input_auto_write(""),g.focus()},input_del_history(){let p=this;E.loading_show(),E.del_db_data(i).then(_=>{D(f,!1),p.input_auto_write(""),p.show_history(""),E.loading_hide()})},change_arrow_direct_class(p){p?D(v,"search-div-input-select-focus"):D(v,"search-div-input-select-blur")}};function U(){console.log("page_start()=",a),k.create_select(),k.input_history("")}Qe(()=>{}),Mt(()=>{!fs()||!ps()||U()}),Rt(()=>{});var L=_r(),X=C(L),ge=P(X),oe=P(ge);oe.__change=p=>k.update_select(p),ze(oe,21,()=>d(u),Ue,(p,_)=>{var y=vr(),w=P(y,!0);F(y);var T={};ce(()=>{hs(y,d(_).selected),de(w,d(_).name),T!==(T=d(_).value)&&(y.value=(y.__value=d(_).value)??"")}),m(p,y)}),F(oe);var $=B(oe,2);us($),$.__keydown=p=>k.input_enter(p),ls($,p=>g=p,()=>g);var lt=B($,2);F(ge);var be=B(ge,2),$e=P(be);$e.__click=()=>k.open_dialog();var Le=B($e,2);Le.__click=()=>k.input_clear_write();var ct=B(Le,2);ct.__click=()=>k.input_run_search(),F(be);var Me=B(be,2);ze(Me,21,()=>d(c),Ue,(p,_,y)=>{var w=gr();w.__click=()=>k.input_auto_write(d(_));var T=P(w,!0);F(w),ce(()=>{Xe(w,"title",d(_)),de(T,"#"+(y+1)+" "+d(_)+" ")}),m(p,w)}),F(Me),F(X);var dt=B(X,2);J(dt,{closeOnInteractOutside:!1,closeOnEscape:!1,get open(){return d(f)},onOpenChange:()=>{},children:(p,_)=>{ur(p,{children:(y,w)=>{var T=mr(),me=C(T);re(me,()=>J.Backdrop,(_e,ye)=>{ye(_e,{class:"fixed inset-0 z-50 bg-surface-50-950/80  select-none"})});var ut=B(me,2);re(ut,()=>J.Positioner,(_e,ye)=>{ye(_e,{class:"fixed inset-0 z-50 flex justify-center items-center font-text select-none",children:(ht,Cr)=>{var Ke=N(),ft=C(Ke);re(ft,()=>J.Content,(pt,vt)=>{vt(pt,{class:"card bg-neutral-100 dark:bg-neutral-800 w-full max-w-xs p-4 space-y-4 shadow-xl transition transition-discrete opacity-0 translate-y-[100px] starting:data-[state=open]:opacity-0 starting:data-[state=open]:translate-y-[100px] data-[state=open]:opacity-100 data-[state=open]:translate-y-0  px-[10px] py-[10px] border-radius",children:(gt,Er)=>{var Ve=br(),we=C(Ve),bt=P(we);re(bt,()=>J.Title,(Q,ee)=>{ee(Q,{class:"font-title font-bold",children:(Ce,yt)=>{et();var ie=Bt("⚠️");m(Ce,ie)},$$slots:{default:!0}})}),F(we);var We=B(we,2);re(We,()=>J.Description,(Q,ee)=>{ee(Q,{class:"font-text select-text",children:(Ce,yt)=>{var ie=N(),wt=C(ie);is(wt,()=>E.get_translate("remove_help_2")),m(Ce,ie)},$$slots:{default:!0}})});var He=B(We,2),ne=P(He);ne.__click=()=>k.close_dialog();var mt=P(ne,!0);F(ne);var Oe=B(ne,2);Oe.__click=()=>k.input_del_history();var _t=P(Oe,!0);F(Oe),F(He),ce((Q,ee)=>{de(mt,Q),de(_t,ee)},[()=>E.get_translate("btn_cancel"),()=>E.get_translate("remove")]),m(gt,Ve)},$$slots:{default:!0}})}),m(ht,Ke)},$$slots:{default:!0}})}),m(y,T)},$$slots:{default:!0}})},$$slots:{default:!0}}),ce(p=>{cs(X,`min-height: ${d(R)??""}px;`),Xe($,"placeholder",p),ds(lt,1,`search-div-input-arrow ${d(v)??""} `,"svelte-gu0rof")},[()=>E.get_translate("input_placeholder_search")]),Ee("mouseenter",$,p=>p.currentTarget.focus()),Ee("focus",$,()=>k.change_arrow_direct_class(!0)),Ee("blur",$,()=>k.change_arrow_direct_class(!1)),vs($,()=>d(t),p=>D(t,p)),m(e,L),A()}At(["change","keydown","click"]);var wr=I('<meta name="keywords" content=""/> <meta name="description" content=""/>',1),Or=I('<section class="section-main scroll-y-style bg-neutral-100 dark:bg-neutral-900"><!></section>');function Lr(e,s){S(s,!1),Ot();var a=Or();Lt("1j6ictg",r=>{var i=wr();et(2),Gt(o=>{$t.title=o??""},[()=>E.get_translate("Home")]),m(r,i)});var t=P(a);yr(t,{}),F(a),m(e,a),A()}export{Lr as component,$r as universal};
