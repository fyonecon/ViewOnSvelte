import"../chunks/DsnmJJEf.js";import{i as kt}from"../chunks/Yk0aB96a.js";import{b2 as xt,L as se,aG as Tt,B as Pt,A as It,h as Dt,b3 as St,p as S,aH as F,f as C,a as y,b as A,Z as d,aJ as _,c as I,a_ as j,d as k,aZ as K,r as N,b1 as At,b4 as Rt,b5 as Bt,G as st,aB as Gt,aE as Lt,b0 as qe,an as $t,F as he,at as M,I as Mt,t as fe,b6 as xe,_ as D,s as B,e as J,J as rt,aI as Kt,K as Ht,$ as Vt}from"../chunks/DO4fQmKg.js";import{h as Wt}from"../chunks/ol203xzQ.js";import{a as jt}from"../chunks/ChFTLTZf.js";import{r as Ut,s as qt,u as Ge,v as at,x as zt,y as Zt,z as Jt,A as Xt,B as re,C as X,D as Te,E as pe,F as ve,G as Yt,H as Qt,J as es,K as Pe,L as ts,N as nt,O as ss,P as ze,Q as rs,R as as,S as ns,T as os,f as w,U as ae,c as is}from"../chunks/CTIHpWLh.js";import{c as ls,s as T,m as U,a as cs,u as ds,n as us,e as Ze,i as Je}from"../chunks/C7G6i5G5.js";import{h as Xe}from"../chunks/MatDNu8a.js";import{b as hs,c as ne}from"../chunks/WncgdjAG.js";import{a as q,b as fs,s as Ye,r as ps,c as vs}from"../chunks/COMv2baA.js";import{s as gs}from"../chunks/YcTOtKFq.js";import{s as Ie}from"../chunks/ClLFlGOK.js";import{r as bs,b as _s}from"../chunks/DhxihCwL.js";import{i as H,r as V}from"../chunks/CaHodd1y.js";function ms(e,s,a=s){var t=new WeakSet;xt(e,"input",async r=>{var i=r?e.defaultValue:e.value;if(i=De(e)?Se(i):i,a(i),se!==null&&t.add(se),await Tt(),i!==(i=s())){var n=e.selectionStart,l=e.selectionEnd,u=e.value.length;if(e.value=i??"",l!==null){var c=e.value.length;n===l&&l===u&&c>u?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=n,e.selectionEnd=Math.min(l,c))}}}),(Dt&&e.defaultValue!==e.value||Pt(s)==null&&e.value)&&(a(De(e)?Se(e.value):e.value),se!==null&&t.add(se)),It(()=>{var r=s();if(e===document.activeElement){var i=St??se;if(t.has(i))return}De(e)&&r===Se(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function De(e){var s=e.type;return s==="number"||s==="range"}function Se(e){return e===""?null:+e}const G=ls();var ys=I("<div></div>");function ws(e,s){S(s,!0);const a=V(s,["$$slots","$$events","$$legacy"]),t=G.consume(),r=_(()=>s.element),i=_(()=>j(a,["element"])),n=_(()=>U(t().getBackdropProps(),d(i)));var l=F(),u=C(l);{var c=g=>{var h=F(),o=C(h);T(o,()=>d(r),()=>d(n)),y(g,h)},p=g=>{var h=ys();q(h,()=>({...d(n)})),y(g,h)};H(u,g=>{d(r)?g(c):g(p,!1)})}y(e,l),A()}var Os=I("<button><!></button>");function Es(e,s){S(s,!0);const a=V(s,["$$slots","$$events","$$legacy"]),t=G.consume(),r=_(()=>s.element),i=_(()=>s.children),n=_(()=>j(a,["element","children"])),l=_(()=>U(t().getCloseTriggerProps(),d(n)));var u=F(),c=C(u);{var p=h=>{var o=F(),v=C(o);T(v,()=>d(r),()=>d(l)),y(h,o)},g=h=>{var o=Os();q(o,()=>({...d(l)}));var v=k(o);T(v,()=>d(i)??K),N(o),y(h,o)};H(c,h=>{d(r)?h(p):h(g,!1)})}y(e,u),A()}var Cs=I("<div><!></div>");function Ns(e,s){S(s,!0);const a=V(s,["$$slots","$$events","$$legacy"]),t=G.consume(),r=_(()=>s.element),i=_(()=>s.children),n=_(()=>j(a,["element","children"])),l=_(()=>U(t().getContentProps(),d(n)));var u=F(),c=C(u);{var p=h=>{var o=F(),v=C(o);T(v,()=>d(r),()=>d(l)),y(h,o)},g=h=>{var o=Cs();q(o,()=>({...d(l)}));var v=k(o);T(v,()=>d(i)??K),N(o),y(h,o)};H(c,h=>{d(r)?h(p):h(g,!1)})}y(e,u),A()}var Fs=I("<div><!></div>");function ks(e,s){S(s,!0);const a=V(s,["$$slots","$$events","$$legacy"]),t=G.consume(),r=_(()=>s.element),i=_(()=>s.children),n=_(()=>j(a,["element","children"])),l=_(()=>U(t().getDescriptionProps(),d(n)));var u=F(),c=C(u);{var p=h=>{var o=F(),v=C(o);T(v,()=>d(r),()=>d(l)),y(h,o)},g=h=>{var o=Fs();q(o,()=>({...d(l)}));var v=k(o);T(v,()=>d(i)??K),N(o),y(h,o)};H(c,h=>{d(r)?h(p):h(g,!1)})}y(e,u),A()}var xs=I("<div><!></div>");function Ts(e,s){S(s,!0);const a=V(s,["$$slots","$$events","$$legacy"]),t=G.consume(),r=_(()=>s.element),i=_(()=>s.children),n=_(()=>j(a,["element","children"])),l=_(()=>U(t().getPositionerProps(),d(n)));var u=F(),c=C(u);{var p=h=>{var o=F(),v=C(o);T(v,()=>d(r),()=>d(l)),y(h,o)},g=h=>{var o=xs();q(o,()=>({...d(l)}));var v=k(o);T(v,()=>d(i)??K),N(o),y(h,o)};H(c,h=>{d(r)?h(p):h(g,!1)})}y(e,u),A()}function Ps(e,s){S(s,!0);const a=G.consume(),t=_(()=>s.children);var r=F(),i=C(r);T(i,()=>d(t),()=>a),y(e,r),A()}function Is(e,s){S(s,!0);const a=_(()=>s.children),t=_(()=>s.value);G.provide(()=>d(t)());var r=F(),i=C(r);T(i,()=>d(a)??K),y(e,r),A()}var Y=new WeakMap,ge=new WeakMap,be={},Ae=0,ot=e=>e&&(e.host||ot(e.parentNode)),Ds=(e,s)=>s.map(a=>{if(e.contains(a))return a;const t=ot(a);return t&&e.contains(t)?t:(console.error("[zag-js > ariaHidden] target",a,"in not contained inside",e,". Doing nothing"),null)}).filter(a=>!!a),Ss=new Set(["script","output","status","next-route-announcer"]),As=e=>Ss.has(e.localName)||e.role==="status"||e.hasAttribute("aria-live")?!0:e.matches("[data-live-announcer]"),Rs=(e,s)=>{const{parentNode:a,markerName:t,controlAttribute:r,followControlledElements:i=!0}=s,n=Ds(a,Array.isArray(e)?e:[e]);be[t]||(be[t]=new WeakMap);const l=be[t],u=[],c=new Set,p=new Set(n),g=o=>{!o||c.has(o)||(c.add(o),g(o.parentNode))};n.forEach(o=>{g(o),i&&Ut(o)&&qt(o,v=>{g(v)})});const h=o=>{!o||p.has(o)||Array.prototype.forEach.call(o.children,v=>{if(c.has(v))h(v);else try{if(As(v))return;const x=v.getAttribute(r)==="true",z=(Y.get(v)||0)+1,$=(l.get(v)||0)+1;Y.set(v,z),l.set(v,$),u.push(v),z===1&&x&&ge.set(v,!0),$===1&&v.setAttribute(t,""),x||v.setAttribute(r,"true")}catch(R){console.error("[zag-js > ariaHidden] cannot operate on ",v,R)}})};return h(a),c.clear(),Ae++,()=>{u.forEach(o=>{const v=Y.get(o)-1,R=l.get(o)-1;Y.set(o,v),l.set(o,R),v||(ge.has(o)||o.removeAttribute(r),ge.delete(o)),R||o.removeAttribute(t)}),Ae--,Ae||(Y=new WeakMap,Y=new WeakMap,ge=new WeakMap,be={})}},Bs=e=>(Array.isArray(e)?e[0]:e).ownerDocument.body,Gs=(e,s=Bs(e),a="data-aria-hidden",t=!0)=>{if(s)return Rs(e,{parentNode:s,markerName:a,controlAttribute:"aria-hidden",followControlledElements:t})},Ls=e=>{const s=requestAnimationFrame(()=>e());return()=>cancelAnimationFrame(s)};function $s(e,s={}){const{defer:a=!0}=s,t=a?Ls:i=>i(),r=[];return r.push(t(()=>{const n=(typeof e=="function"?e():e).filter(Boolean);n.length!==0&&r.push(Gs(n))})),()=>{r.forEach(i=>i?.())}}var Ms=Object.defineProperty,Ks=(e,s,a)=>s in e?Ms(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,E=(e,s,a)=>Ks(e,typeof s!="symbol"?s+"":s,a),Qe={activateTrap(e,s){if(e.length>0){const t=e[e.length-1];t!==s&&t.pause()}const a=e.indexOf(s);a===-1||e.splice(a,1),e.push(s)},deactivateTrap(e,s){const a=e.indexOf(s);a!==-1&&e.splice(a,1),e.length>0&&e[e.length-1].unpause()}},Hs=[],Vs=class{constructor(e,s){E(this,"trapStack"),E(this,"config"),E(this,"doc"),E(this,"state",{containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0}),E(this,"portalContainers",new Set),E(this,"listenerCleanups",[]),E(this,"handleFocus",t=>{const r=ve(t),i=this.findContainerIndex(r,t)>=0;if(i||Yt(r))i&&(this.state.mostRecentlyFocusedNode=r);else{t.stopImmediatePropagation();let n,l=!0;if(this.state.mostRecentlyFocusedNode)if(re(this.state.mostRecentlyFocusedNode)>0){const u=this.findContainerIndex(this.state.mostRecentlyFocusedNode),{tabbableNodes:c}=this.state.containerGroups[u];if(c.length>0){const p=c.findIndex(g=>g===this.state.mostRecentlyFocusedNode);p>=0&&(this.config.isKeyForward(this.state.recentNavEvent)?p+1<c.length&&(n=c[p+1],l=!1):p-1>=0&&(n=c[p-1],l=!1))}}else this.state.containerGroups.some(u=>u.tabbableNodes.some(c=>re(c)>0))||(l=!1);else l=!1;l&&(n=this.findNextNavNode({target:this.state.mostRecentlyFocusedNode,isBackward:this.config.isKeyBackward(this.state.recentNavEvent)})),n?this.tryFocus(n):this.tryFocus(this.state.mostRecentlyFocusedNode||this.getInitialFocusNode())}this.state.recentNavEvent=void 0}),E(this,"handlePointerDown",t=>{const r=ve(t);if(!(this.findContainerIndex(r,t)>=0)){if(oe(this.config.clickOutsideDeactivates,t)){this.deactivate({returnFocus:this.config.returnFocusOnDeactivate});return}oe(this.config.allowOutsideClick,t)||t.preventDefault()}}),E(this,"handleClick",t=>{const r=ve(t);this.findContainerIndex(r,t)>=0||oe(this.config.clickOutsideDeactivates,t)||oe(this.config.allowOutsideClick,t)||(t.preventDefault(),t.stopImmediatePropagation())}),E(this,"handleTabKey",t=>{if(this.config.isKeyForward(t)||this.config.isKeyBackward(t)){this.state.recentNavEvent=t;const r=this.config.isKeyBackward(t),i=this.findNextNavNode({event:t,isBackward:r});if(!i)return;Re(t)&&t.preventDefault(),this.tryFocus(i)}}),E(this,"handleEscapeKey",t=>{Us(t)&&oe(this.config.escapeDeactivates,t)!==!1&&(t.preventDefault(),this.deactivate())}),E(this,"_mutationObserver"),E(this,"setupMutationObserver",()=>{const t=this.doc.defaultView||window;this._mutationObserver=new t.MutationObserver(r=>{r.some(l=>Array.from(l.removedNodes).some(c=>c===this.state.mostRecentlyFocusedNode))&&this.tryFocus(this.getInitialFocusNode()),r.some(l=>l.type==="attributes"&&(l.attributeName==="aria-controls"||l.attributeName==="aria-expanded")?!0:l.type==="childList"&&l.addedNodes.length>0?Array.from(l.addedNodes).some(u=>{if(u.nodeType!==Node.ELEMENT_NODE)return!1;const c=u;return Qt(c)?!0:c.id&&!this.state.containers.some(p=>p.contains(c))?es(c):!1}):!1)&&this.state.active&&!this.state.paused&&(this.updateTabbableNodes(),this.updatePortalContainers())})}),E(this,"updateObservedNodes",()=>{this._mutationObserver?.disconnect(),this.state.active&&!this.state.paused&&(this.state.containers.map(t=>{this._mutationObserver?.observe(t,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["aria-controls","aria-expanded"]})}),this.portalContainers.forEach(t=>{this.observePortalContainer(t)}))}),E(this,"getInitialFocusNode",()=>{let t=this.getNodeForOption("initialFocus",{hasFallback:!0});if(t===!1)return!1;if(t===void 0||t&&!Pe(t)){const r=Te(this.doc);if(r&&this.findContainerIndex(r)>=0)t=r;else{const i=this.state.tabbableGroups[0];t=i&&i.firstTabbableNode||this.getNodeForOption("fallbackFocus")}}else t===null&&(t=this.getNodeForOption("fallbackFocus"));if(!t)throw new Error("Your focus-trap needs to have at least one focusable element");return t.isConnected||(t=this.getNodeForOption("fallbackFocus")),t}),E(this,"tryFocus",t=>{if(t!==!1&&t!==Te(this.doc)){if(!t||!t.focus){this.tryFocus(this.getInitialFocusNode());return}t.focus({preventScroll:!!this.config.preventScroll}),this.state.mostRecentlyFocusedNode=t,qs(t)&&t.select()}}),E(this,"deactivate",t=>{if(!this.state.active)return this;const r={onDeactivate:this.config.onDeactivate,onPostDeactivate:this.config.onPostDeactivate,checkCanReturnFocus:this.config.checkCanReturnFocus,...t};clearTimeout(this.state.delayInitialFocusTimer),this.state.delayInitialFocusTimer=void 0,this.removeListeners(),this.state.active=!1,this.state.paused=!1,this.updateObservedNodes(),Qe.deactivateTrap(this.trapStack,this),this.portalContainers.clear();const i=this.getOption(r,"onDeactivate"),n=this.getOption(r,"onPostDeactivate"),l=this.getOption(r,"checkCanReturnFocus"),u=this.getOption(r,"returnFocus","returnFocusOnDeactivate");i?.();const c=()=>{et(()=>{if(u){const p=this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation);this.tryFocus(p)}n?.()})};if(u&&l){const p=this.getReturnFocusNode(this.state.nodeFocusedBeforeActivation);return l(p).then(c,c),this}return c(),this}),E(this,"pause",t=>{if(this.state.paused||!this.state.active)return this;const r=this.getOption(t,"onPause"),i=this.getOption(t,"onPostPause");return this.state.paused=!0,r?.(),this.removeListeners(),this.updateObservedNodes(),i?.(),this}),E(this,"unpause",t=>{if(!this.state.paused||!this.state.active)return this;const r=this.getOption(t,"onUnpause"),i=this.getOption(t,"onPostUnpause");return this.state.paused=!1,r?.(),this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),i?.(),this}),E(this,"updateContainerElements",t=>(this.state.containers=Array.isArray(t)?t.filter(Boolean):[t].filter(Boolean),this.state.active&&this.updateTabbableNodes(),this.updateObservedNodes(),this)),E(this,"getReturnFocusNode",t=>{const r=this.getNodeForOption("setReturnFocus",{params:[t]});return r||(r===!1?!1:t)}),E(this,"getOption",(t,r,i)=>t&&t[r]!==void 0?t[r]:this.config[i||r]),E(this,"getNodeForOption",(t,{hasFallback:r=!1,params:i=[]}={})=>{let n=this.config[t];if(typeof n=="function"&&(n=n(...i)),n===!0&&(n=void 0),!n){if(n===void 0||n===!1)return n;throw new Error(`\`${t}\` was specified but was not a node, or did not return a node`)}let l=n;if(typeof n=="string"){try{l=this.doc.querySelector(n)}catch(u){throw new Error(`\`${t}\` appears to be an invalid selector; error="${u.message}"`)}if(!l&&!r)throw new Error(`\`${t}\` as selector refers to no known node`)}return l}),E(this,"findNextNavNode",t=>{const{event:r,isBackward:i=!1}=t,n=t.target||ve(r);this.updateTabbableNodes();let l=null;if(this.state.tabbableGroups.length>0){const u=this.findContainerIndex(n,r),c=u>=0?this.state.containerGroups[u]:void 0;if(u<0)i?l=this.state.tabbableGroups[this.state.tabbableGroups.length-1].lastTabbableNode:l=this.state.tabbableGroups[0].firstTabbableNode;else if(i){let p=this.state.tabbableGroups.findIndex(({firstTabbableNode:g})=>n===g);if(p<0&&(c?.container===n||Pe(n)&&!pe(n)&&!c?.nextTabbableNode(n,!1))&&(p=u),p>=0){const g=p===0?this.state.tabbableGroups.length-1:p-1,h=this.state.tabbableGroups[g];l=re(n)>=0?h.lastTabbableNode:h.lastDomTabbableNode}else Re(r)||(l=c?.nextTabbableNode(n,!1))}else{let p=this.state.tabbableGroups.findIndex(({lastTabbableNode:g})=>n===g);if(p<0&&(c?.container===n||Pe(n)&&!pe(n)&&!c?.nextTabbableNode(n))&&(p=u),p>=0){const g=p===this.state.tabbableGroups.length-1?0:p+1,h=this.state.tabbableGroups[g];l=re(n)>=0?h.firstTabbableNode:h.firstDomTabbableNode}else Re(r)||(l=c?.nextTabbableNode(n))}}else l=this.getNodeForOption("fallbackFocus");return l}),this.trapStack=s.trapStack||Hs;const a={returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,followControlledElements:!0,isKeyForward:Ws,isKeyBackward:js,...s};this.doc=a.document||at(Array.isArray(e)?e[0]:e),this.config=a,this.updateContainerElements(e),this.setupMutationObserver()}addPortalContainer(e){const s=e.parentElement;s&&!this.portalContainers.has(s)&&(this.portalContainers.add(s),this.state.active&&!this.state.paused&&this.observePortalContainer(s))}observePortalContainer(e){this._mutationObserver?.observe(e,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["aria-controls","aria-expanded"]})}updatePortalContainers(){this.config.followControlledElements&&this.state.containers.forEach(e=>{zt(e).forEach(a=>{this.addPortalContainer(a)})})}get active(){return this.state.active}get paused(){return this.state.paused}findContainerIndex(e,s){const a=typeof s?.composedPath=="function"?s.composedPath():void 0;return this.state.containerGroups.findIndex(({container:t,tabbableNodes:r})=>t.contains(e)||a?.includes(t)||r.find(i=>i===e)||this.isControlledElement(t,e))}isControlledElement(e,s){return this.config.followControlledElements?Zt(e,s):!1}updateTabbableNodes(){if(this.state.containerGroups=this.state.containers.map(e=>{const s=Jt(e,{getShadowRoot:this.config.getShadowRoot}),a=Xt(e,{getShadowRoot:this.config.getShadowRoot}),t=s[0],r=s[s.length-1],i=t,n=r;let l=!1;for(let c=0;c<s.length;c++)if(re(s[c])>0){l=!0;break}function u(c,p=!0){const g=s.indexOf(c);if(g>=0)return s[g+(p?1:-1)];const h=a.indexOf(c);if(!(h<0)){if(p){for(let o=h+1;o<a.length;o++)if(pe(a[o]))return a[o]}else for(let o=h-1;o>=0;o--)if(pe(a[o]))return a[o]}}return{container:e,tabbableNodes:s,focusableNodes:a,posTabIndexesFound:l,firstTabbableNode:t,lastTabbableNode:r,firstDomTabbableNode:i,lastDomTabbableNode:n,nextTabbableNode:u}}),this.state.tabbableGroups=this.state.containerGroups.filter(e=>e.tabbableNodes.length>0),this.state.tabbableGroups.length<=0&&!this.getNodeForOption("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(this.state.containerGroups.find(e=>e.posTabIndexesFound)&&this.state.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")}addListeners(){if(this.state.active)return Qe.activateTrap(this.trapStack,this),this.state.delayInitialFocusTimer=this.config.delayInitialFocus?et(()=>{this.tryFocus(this.getInitialFocusNode())}):this.tryFocus(this.getInitialFocusNode()),this.listenerCleanups.push(X(this.doc,"focusin",this.handleFocus,!0),X(this.doc,"mousedown",this.handlePointerDown,{capture:!0,passive:!1}),X(this.doc,"touchstart",this.handlePointerDown,{capture:!0,passive:!1}),X(this.doc,"click",this.handleClick,{capture:!0,passive:!1}),X(this.doc,"keydown",this.handleTabKey,{capture:!0,passive:!1}),X(this.doc,"keydown",this.handleEscapeKey)),this}removeListeners(){if(this.state.active)return this.listenerCleanups.forEach(e=>e()),this.listenerCleanups=[],this}activate(e){if(this.state.active)return this;const s=this.getOption(e,"onActivate"),a=this.getOption(e,"onPostActivate"),t=this.getOption(e,"checkCanFocusTrap");t||this.updateTabbableNodes(),this.state.active=!0,this.state.paused=!1,this.state.nodeFocusedBeforeActivation=Te(this.doc),s?.();const r=()=>{t&&this.updateTabbableNodes(),this.addListeners(),this.updateObservedNodes(),a?.()};return t?(t(this.state.containers.concat()).then(r,r),this):(r(),this)}},Ke=e=>e.type==="keydown",Re=e=>Ke(e)&&e?.key==="Tab",Ws=e=>Ke(e)&&e.key==="Tab"&&!e?.shiftKey,js=e=>Ke(e)&&e.key==="Tab"&&e?.shiftKey,oe=(e,...s)=>typeof e=="function"?e(...s):e,Us=e=>!e.isComposing&&e.key==="Escape",et=e=>setTimeout(e,0),qs=e=>e.localName==="input"&&"select"in e&&typeof e.select=="function";function zs(e,s={}){let a;const t=Ge(()=>{const i=(Array.isArray(e)?e:[e]).map(l=>typeof l=="function"?l():l).filter(l=>l!=null);if(i.length===0)return;const n=i[0];a=new Vs(i,{escapeDeactivates:!1,allowOutsideClick:!0,preventScroll:!0,returnFocusOnDeactivate:!0,delayInitialFocus:!1,fallbackFocus:n,...s,document:at(n)});try{a.activate()}catch{}});return function(){a?.deactivate(),t()}}var Be="data-scroll-lock";function Zs(e){const s=e.getBoundingClientRect().left;return Math.round(s)+e.scrollLeft?"paddingLeft":"paddingRight"}function tt(e){const a=nt(e)?.scrollbarGutter;return a==="stable"||a?.startsWith("stable ")===!0}function Js(e){const s=e??document,a=s.defaultView??window,{documentElement:t,body:r}=s;if(r.hasAttribute(Be))return;const n=tt(t)||tt(r),l=a.innerWidth-t.clientWidth;r.setAttribute(Be,"");const u=()=>ss(t,"--scrollbar-width",`${l}px`),c=Zs(t),p=()=>{const o={overflow:"hidden"};return!n&&l>0&&(o[c]=`${l}px`),ze(r,o)},g=()=>{const{scrollX:o,scrollY:v,visualViewport:R}=a,x=R?.offsetLeft??0,z=R?.offsetTop??0,$={position:"fixed",overflow:"hidden",top:`${-(v-Math.floor(z))}px`,left:`${-(o-Math.floor(x))}px`,right:"0"};!n&&l>0&&($[c]=`${l}px`);const Z=ze(r,$);return()=>{Z?.(),a.scrollTo({left:o,top:v,behavior:"instant"})}},h=[u(),ts()?g():p()];return()=>{h.forEach(o=>o?.()),r.removeAttribute(Be)}}var Xs=as("dialog").parts("trigger","backdrop","positioner","content","title","description","closeTrigger"),W=Xs.build(),it=e=>e.ids?.positioner??`dialog:${e.id}:positioner`,lt=e=>e.ids?.backdrop??`dialog:${e.id}:backdrop`,Le=e=>e.ids?.content??`dialog:${e.id}:content`,ct=e=>e.ids?.trigger??`dialog:${e.id}:trigger`,$e=e=>e.ids?.title??`dialog:${e.id}:title`,Me=e=>e.ids?.description??`dialog:${e.id}:description`,dt=e=>e.ids?.closeTrigger??`dialog:${e.id}:close`,_e=e=>e.getById(Le(e)),Ys=e=>e.getById(it(e)),Qs=e=>e.getById(lt(e)),er=e=>e.getById(ct(e)),tr=e=>e.getById($e(e)),sr=e=>e.getById(Me(e)),rr=e=>e.getById(dt(e));function ar(e,s){const{state:a,send:t,context:r,prop:i,scope:n}=e,l=i("aria-label"),u=a.matches("open");return{open:u,setOpen(c){a.matches("open")!==c&&t({type:c?"OPEN":"CLOSE"})},getTriggerProps(){return s.button({...W.trigger.attrs,dir:i("dir"),id:ct(n),"aria-haspopup":"dialog",type:"button","aria-expanded":u,"data-state":u?"open":"closed","aria-controls":Le(n),onClick(c){c.defaultPrevented||t({type:"TOGGLE"})}})},getBackdropProps(){return s.element({...W.backdrop.attrs,dir:i("dir"),hidden:!u,id:lt(n),"data-state":u?"open":"closed"})},getPositionerProps(){return s.element({...W.positioner.attrs,dir:i("dir"),id:it(n),style:{pointerEvents:u?void 0:"none"}})},getContentProps(){const c=r.get("rendered");return s.element({...W.content.attrs,dir:i("dir"),role:i("role"),hidden:!u,id:Le(n),tabIndex:-1,"data-state":u?"open":"closed","aria-modal":!0,"aria-label":l||void 0,"aria-labelledby":l||!c.title?void 0:$e(n),"aria-describedby":c.description?Me(n):void 0})},getTitleProps(){return s.element({...W.title.attrs,dir:i("dir"),id:$e(n)})},getDescriptionProps(){return s.element({...W.description.attrs,dir:i("dir"),id:Me(n)})},getCloseTriggerProps(){return s.button({...W.closeTrigger.attrs,dir:i("dir"),id:dt(n),type:"button",onClick(c){c.defaultPrevented||(c.stopPropagation(),t({type:"CLOSE"}))}})}}}var nr=rs({props({props:e,scope:s}){const a=e.role==="alertdialog",t=a?()=>rr(s):void 0,r=typeof e.modal=="boolean"?e.modal:!0;return{role:"dialog",modal:r,trapFocus:r,preventScroll:r,closeOnInteractOutside:!a,closeOnEscape:!0,restoreFocus:!0,initialFocusEl:t,...e}},initialState({prop:e}){return e("open")||e("defaultOpen")?"open":"closed"},context({bindable:e}){return{rendered:e(()=>({defaultValue:{title:!0,description:!0}}))}},watch({track:e,action:s,prop:a}){e([()=>a("open")],()=>{s(["toggleVisibility"])})},states:{open:{entry:["checkRenderedElements","syncZIndex"],effects:["trackDismissableElement","trapFocus","preventScroll","hideContentBelow"],on:{"CONTROLLED.CLOSE":{target:"closed"},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}]}},closed:{on:{"CONTROLLED.OPEN":{target:"open"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}]}}},implementations:{guards:{isOpenControlled:({prop:e})=>e("open")!=null},effects:{trackDismissableElement({scope:e,send:s,prop:a}){return ns(()=>_e(e),{type:"dialog",defer:!0,pointerBlocking:a("modal"),exclude:[er(e)],onInteractOutside(r){a("onInteractOutside")?.(r),a("closeOnInteractOutside")||r.preventDefault()},persistentElements:a("persistentElements"),onFocusOutside:a("onFocusOutside"),onPointerDownOutside:a("onPointerDownOutside"),onRequestDismiss:a("onRequestDismiss"),onEscapeKeyDown(r){a("onEscapeKeyDown")?.(r),a("closeOnEscape")||r.preventDefault()},onDismiss(){s({type:"CLOSE",src:"interact-outside"})}})},preventScroll({scope:e,prop:s}){if(s("preventScroll"))return Js(e.getDoc())},trapFocus({scope:e,prop:s}){return s("trapFocus")?zs(()=>_e(e),{preventScroll:!0,returnFocusOnDeactivate:!!s("restoreFocus"),initialFocus:s("initialFocusEl"),setReturnFocus:t=>s("finalFocusEl")?.()??t,getShadowRoot:!0}):void 0},hideContentBelow({scope:e,prop:s}){return s("modal")?$s(()=>[_e(e)],{defer:!0}):void 0}},actions:{checkRenderedElements({context:e,scope:s}){Ge(()=>{e.set("rendered",{title:!!tr(s),description:!!sr(s)})})},syncZIndex({scope:e}){Ge(()=>{const s=_e(e);if(!s)return;const a=nt(s);[Ys(e),Qs(e)].forEach(r=>{r?.style.setProperty("--z-index",a.zIndex),r?.style.setProperty("--layer-index",a.getPropertyValue("--layer-index"))})})},invokeOnClose({prop:e}){e("onOpenChange")?.({open:!1})},invokeOnOpen({prop:e}){e("onOpenChange")?.({open:!0})},toggleVisibility({prop:e,send:s,event:a}){s({type:e("open")?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:a})}}}}),or=cs()(["aria-label","closeOnEscape","closeOnInteractOutside","dir","finalFocusEl","getRootNode","getRootNode","id","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","onRequestDismiss","defaultOpen","open","persistentElements","preventScroll","restoreFocus","role","trapFocus"]),ir=os(or);function lr(e){const s=ds(nr,e),a=_(()=>ar(s,us));return()=>d(a)}function cr(e,s){const a=At();S(s,!0);const t=V(s,["$$slots","$$events","$$legacy"]),r=_(()=>ir(t)),i=_(()=>Rt(d(r),2)),n=_(()=>d(i)[0]),l=_(()=>d(i)[1]),u=_(()=>d(l).children),c=lr(()=>({...d(n),id:a}));G.provide(()=>c());var p=F(),g=C(p);T(g,()=>d(u)??K),y(e,p),A()}var dr=I("<div><!></div>");function ur(e,s){S(s,!0);const a=V(s,["$$slots","$$events","$$legacy"]),t=G.consume(),r=_(()=>s.element),i=_(()=>s.children),n=_(()=>j(a,["element","children"])),l=_(()=>U(t().getTitleProps(),d(n)));var u=F(),c=C(u);{var p=h=>{var o=F(),v=C(o);T(v,()=>d(r),()=>d(l)),y(h,o)},g=h=>{var o=dr();q(o,()=>({...d(l)}));var v=k(o);T(v,()=>d(i)??K),N(o),y(h,o)};H(c,h=>{d(r)?h(p):h(g,!1)})}y(e,u),A()}var hr=I("<button><!></button>");function fr(e,s){S(s,!0);const a=V(s,["$$slots","$$events","$$legacy"]),t=G.consume(),r=_(()=>s.element),i=_(()=>s.children),n=_(()=>j(a,["element","children"])),l=_(()=>U(t().getTriggerProps(),d(n)));var u=F(),c=C(u);{var p=h=>{var o=F(),v=C(o);T(v,()=>d(r),()=>d(l)),y(h,o)},g=h=>{var o=hr();q(o,()=>({...d(l)}));var v=k(o);T(v,()=>d(i)??K),N(o),y(h,o)};H(c,h=>{d(r)?h(p):h(g,!1)})}y(e,u),A()}const Q=Object.assign(cr,{Provider:Is,Context:Ps,Trigger:fr,Backdrop:ws,Positioner:Ts,Content:Ns,Title:ur,Description:ks,CloseTrigger:Es});function pr(e,s){S(s,!0);const a=Bt(),t=_(()=>s.children),r=_(()=>qe(s.disabled,!1)),i=_(()=>qe(s.target,()=>typeof window>"u"?void 0:document.body,!0));st(()=>{if(d(r)||!d(i))return;const c=Gt(d(t),{target:d(i),context:a});return()=>Lt(c)});var n=F(),l=C(n);{var u=c=>{var p=F(),g=C(p);T(g,()=>d(t)),y(c,p)};H(l,c=>{(d(r)||!d(i))&&c(u)})}y(e,n),A()}const vr=pr,gr=!0,br=!0,_r=!1,Vr=Object.freeze(Object.defineProperty({__proto__:null,csr:br,prerender:gr,ssr:_r},Symbol.toStringTag,{value:"Module"}));var mr=I("<option> </option>"),yr=I('<button class="history-btn break break-ellipsis svelte-gu0rof"> </button>'),wr=I('<header class="flex justify-between items-center pywebview-drag-region can-drag"><!></header> <!> <footer class="flex justify-center gap-10 select-none  px-[10px] py-[10px]"><button title="Cancel" class="btn btn-base preset-tonal font-title"> </button> <button title="Update" type="button" class="btn btn-base preset-filled-primary-500 font-title"> </button></footer>',1),Or=I("<!> <!>",1),Er=I('<div class="search-div select-none svelte-gu0rof"><div class="search-div-input svelte-gu0rof"><select class="search-div-input-select input-border font-text  svelte-gu0rof"></select> <input class="search-div-input-input input-border w-full font-title select-text svelte-gu0rof" type="search" maxlength="1200"/> <span><svg class="hide" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 20 20"><path fill="currentColor" d="M11.199 4.6c-.6-.8-1.801-.8-2.401 0l-4.496 6.002c-.74.989-.035 2.4 1.2 2.4h8.995c1.236 0 1.941-1.412 1.2-2.4zM4 15a.5.5 0 0 0 0 1h12a.5.5 0 0 0 0-1z"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M12 17a1.72 1.72 0 0 1-1.33-.64l-4.21-5.1a2.1 2.1 0 0 1-.26-2.21A1.76 1.76 0 0 1 7.79 8h8.42a1.76 1.76 0 0 1 1.59 1.05a2.1 2.1 0 0 1-.26 2.21l-4.21 5.1A1.72 1.72 0 0 1 12 17"></path></svg></span></div> <div class="search-div-btn font-text svelte-gu0rof"><button class="search-div-btn-btn break-ellipsis btn-border click font-red svelte-gu0rof"> </button> <button class="search-div-btn-btn break-ellipsis btn-border click svelte-gu0rof"> </button> <button class="search-div-btn-btn break-ellipsis btn-border click svelte-gu0rof"><!></button></div> <div class="search-div-history font-text font-blue scroll-y-style svelte-gu0rof"></div></div> <!>',1);function Cr(e,s){S(s,!0);let a=he(w.get_route()),t=M("");const r=is.app.app_class+"search_selected",i=r+"_history",n="#@#"+i+"#@#",l=200;let u=M(he([])),c=M(he([])),p=M(!1),g,h=M(0),o=M(0),v=M("search-div-input-select-blur"),R=M(he(window.innerHeight>window.innerWidth?window.innerHeight:window.innerWidth));const x={close_dialog(){D(p,!1)},open_dialog(){D(p,!0)},create_select(){D(u,[{name:"Bing",value:"bing",url:"https://www.bing.com/?ensearch=1&q=",selected:"selected"}],!0),w.get_db_data(r).then(f=>{f||(f="bing");let m=Ie[f];m?(m.name,m.url,D(u,[],!0),Object.keys(Ie).forEach(b=>{let O=Ie[b],P=f===b?"selected":"";d(u).push({name:O.name,value:b,url:O.url,selected:P})})):(w.notice("DB Error"),w.set_db_data(r,f).then(b=>{w.console_log("update_select=",f,b)}))}),window.addEventListener("resize",function(){D(R,window.innerHeight,!0)})},update_select(f){let m=f.target.value;w.set_db_data(r,m).then(b=>{w.console_log("update_select=",m,b)})},show_history(f=""){if(D(c,[],!0),f.length>0&&f.indexOf(n)!==-1){let m=f.split(n);for(let b=0;b<m.length;b++){let O=m[b];O.trim()&&d(c).unshift(O)}}else f.length>0&&f.indexOf(n)===-1&&d(c).unshift(f)},filter_array(f=""){let m="";if(f.length>0&&f.indexOf(n)!==-1){let b=f.split(n);b=Array.from(new Set(b));let O=0;b.length>l&&(O=l-b.length),b=b.slice(O),m=b.join(n)}else f.length>0&&f.indexOf(n)===-1&&(m=f);return m},input_history(f=""){let m=this;return new Promise(b=>{w.get_db_data(i).then(O=>{if(f.trim().length>0){O?O=O+n+f:O=n+f;let P=m.filter_array(O);w.set_db_data(i,P).then(Oe=>{m.show_history(P),b(P)})}else m.show_history(O)})})},input_enter(f){let m=this;f.key==="Enter"&&(ae.input_doing===1||ae.input_doing===2?(w.console_log("输入法输入完成=",ae.input_doing),ae.input_doing=-1,m.input_run_search()):w.console_log("输入法正在输入=",ae.input_doing))},input_run_search(){let f=this;w.loading_show();let m=d(t).trim();m?(clearTimeout(d(h)),clearTimeout(d(o)),f.input_history(m).then(b=>{w.get_db_data(r).then(O=>{D(h,setTimeout(function(){f.input_auto_write(""),w.loading_hide()},1e3),!0),O||(O="bing");let P="./search?word="+encodeURIComponent(m)+"&engine="+O+"&url_timeout="+w.url_timeout_encode("search",360*60)+"&ap=ipt";D(o,setTimeout(function(){w.is_mobile_screen()?window.open(P,"_self"):window.open(P,"_blank")},100),!0)})})):(g.focus(),w.loading_hide())},input_auto_write(f=""){D(t,f,!0)},input_clear_write(){this.input_auto_write(""),g.focus()},input_del_history(){let f=this;w.loading_show(),w.del_db_data(i).then(m=>{D(p,!1),f.input_auto_write(""),f.show_history(""),w.loading_hide()})},change_arrow_direct_class(f=!1){f?D(v,"search-div-input-select-focus"):D(v,"search-div-input-select-blur")}};function z(){w.console_log("page_start()=",a),x.create_select(),x.input_history(""),w.watch_input_enter(g),document.addEventListener("visibilitychange",()=>{document.hidden||x.input_history("")})}st(()=>{}),jt(()=>{!bs()||!_s()||z()}),Mt(()=>{});var $=Er(),Z=C($),me=k(Z),ie=k(me);ie.__change=f=>x.update_select(f),Ze(ie,21,()=>d(u),Je,(f,m)=>{var b=mr(),O=k(b,!0);N(b);var P={};fe(()=>{vs(b,d(m).selected),J(O,d(m).name),P!==(P=d(m).value)&&(b.value=(b.__value=d(m).value)??"")}),y(f,b)}),N(ie);var L=B(ie,2);ps(L),L.__keydown=f=>x.input_enter(f),hs(L,f=>g=f,()=>g);var ut=B(L,2);N(me);var ye=B(me,2),le=k(ye);le.__click=()=>x.open_dialog();var ht=k(le,!0);N(le);var ce=B(le,2);ce.__click=()=>x.input_clear_write();var ft=k(ce,!0);N(ce);var we=B(ce,2);we.__click=()=>x.input_run_search();var pt=k(we);Xe(pt,()=>w.get_translate("search_enter_input")),N(we),N(ye);var He=B(ye,2);Ze(He,21,()=>d(c),Je,(f,m)=>{var b=yr();b.__click=()=>x.input_auto_write(d(m));var O=k(b,!0);N(b),fe(()=>{Ye(b,"title",d(m)),J(O,"# "+d(m)+" ")}),y(f,b)}),N(He),N(Z);var vt=B(Z,2);Q(vt,{closeOnInteractOutside:!1,closeOnEscape:!1,get open(){return d(p)},onOpenChange:()=>{},children:(f,m)=>{vr(f,{children:(b,O)=>{var P=Or(),Oe=C(P);ne(Oe,()=>Q.Backdrop,(Ee,Ce)=>{Ce(Ee,{class:"fixed inset-0 z-50 bg-surface-50-950/80  select-none"})});var gt=B(Oe,2);ne(gt,()=>Q.Positioner,(Ee,Ce)=>{Ce(Ee,{class:"fixed inset-0 z-50 flex justify-center items-center font-text select-none",children:(bt,kr)=>{var Ve=F(),_t=C(Ve);ne(_t,()=>Q.Content,(mt,yt)=>{yt(mt,{class:"card bg-neutral-100 dark:bg-neutral-800 w-full max-w-xs p-4 space-y-4 shadow-xl transition transition-discrete opacity-0 translate-y-[100px] starting:data-[state=open]:opacity-0 starting:data-[state=open]:translate-y-[100px] data-[state=open]:opacity-100 data-[state=open]:translate-y-0  px-[10px] py-[10px] border-radius",children:(wt,xr)=>{var We=wr(),Ne=C(We),Ot=k(Ne);ne(Ot,()=>Q.Title,(ee,te)=>{te(ee,{class:"font-title font-bold",children:(ke,Nt)=>{rt();var ue=Kt("⚠️");y(ke,ue)},$$slots:{default:!0}})}),N(Ne);var je=B(Ne,2);ne(je,()=>Q.Description,(ee,te)=>{te(ee,{class:"font-text select-text",children:(ke,Nt)=>{var ue=F(),Ft=C(ue);Xe(Ft,()=>w.get_translate("remove_help_2")),y(ke,ue)},$$slots:{default:!0}})});var Ue=B(je,2),de=k(Ue);de.__click=()=>x.close_dialog();var Et=k(de,!0);N(de);var Fe=B(de,2);Fe.__click=()=>x.input_del_history();var Ct=k(Fe,!0);N(Fe),N(Ue),fe((ee,te)=>{J(Et,ee),J(Ct,te)},[()=>w.get_translate("btn_cancel"),()=>w.get_translate("remove")]),y(wt,We)},$$slots:{default:!0}})}),y(bt,Ve)},$$slots:{default:!0}})}),y(b,P)},$$slots:{default:!0}})},$$slots:{default:!0}}),fe((f,m,b)=>{fs(Z,`min-height: ${d(R)??""}px;`),Ye(L,"placeholder",f),gs(ut,1,`search-div-input-arrow ${d(v)??""} `,"svelte-gu0rof"),J(ht,m),J(ft,b)},[()=>w.get_translate("input_placeholder_search"),()=>w.get_translate("search_del_history"),()=>w.get_translate("search_clear_input")]),xe("mouseenter",L,f=>f.currentTarget.focus()),xe("focus",L,()=>x.change_arrow_direct_class(!0)),xe("blur",L,()=>x.change_arrow_direct_class(!1)),ms(L,()=>d(t),f=>D(t,f)),y(e,$),A()}$t(["change","keydown","click"]);var Nr=I('<meta name="keywords" content=""/> <meta name="description" content=""/>',1),Fr=I('<section class="section-main scroll-y-style bg-neutral-100 dark:bg-neutral-900"><!></section>');function Wr(e,s){S(s,!1),kt();var a=Fr();Wt("1j6ictg",r=>{var i=Nr();rt(2),Ht(n=>{Vt.title=n??""},[()=>w.get_translate("Home")]),y(r,i)});var t=k(a);Cr(t,{}),N(a),y(e,a),A()}export{Wr as component,Vr as universal};
