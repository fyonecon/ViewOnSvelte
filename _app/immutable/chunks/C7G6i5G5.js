import{v as $,w as re,aK as se,h as D,o as P,u as ce,g as le,Z as y,T as de,U as ge,V as K,y as H,k as V,C as pe,aL as ve,aM as Z,L as he,aN as M,P as W,R as _e,a7 as me,ab as Ee,aO as G,aP as Se,aQ as xe,aF as Ce,aR as Q,aS as Ne,M as ae,O as oe,aT as q,D as we,aU as ye,aV as be,N as Re,l as Te,E as Ae,aW as Me,aX as ke,at as Ie,F as De,B as Fe,av as ze,aC as ue,aJ as X,_ as Oe,aY as ie,G as Ve,I as Le}from"./DO4fQmKg.js";import{B as $e}from"./CaHodd1y.js";import{m as Pe,i as He,a as F,b as qe,e as Be,M as z,t as Je,d as Ue,w as j,I as B,g as We,h as Xe}from"./CTIHpWLh.js";function ft(e,n){return n}function Ye(e,n,t){for(var u=[],p=n.length,o,l=n.length,h=0;h<p;h++){let m=n[h];oe(m,()=>{if(o){if(o.pending.delete(m),o.done.add(m),o.pending.size===0){var v=e.outrogroups;Y(G(o.done)),v.delete(o),v.size===0&&(e.outrogroups=null)}}else l-=1},!1)}if(l===0){var f=u.length===0&&t!==null;if(f){var c=t,i=c.parentNode;be(i),i.append(c),e.items.clear()}Y(n,!f)}else o={pending:new Set(n),done:new Set},(e.outrogroups??=new Set).add(o)}function Y(e,n=!0){for(var t=0;t<e.length;t++)Re(e[t],n)}var ee;function ct(e,n,t,u,p,o=null){var l=e,h=new Map,f=(n&se)!==0;if(f){var c=e;l=D?P(ce(c)):c.appendChild($())}D&&le();var i=null,m=me(()=>{var d=t();return Ee(d)?d:d==null?[]:G(d)}),v,E=!0;function b(){r.fallback=i,Ge(r,v,l,n,u),i!==null&&(v.length===0?(i.f&M)===0?ae(i):(i.f^=M,O(i,null,l)):oe(i,()=>{i=null}))}var N=re(()=>{v=y(m);var d=v.length;let T=!1;if(D){var A=de(l)===ge;A!==(d===0)&&(l=K(),P(l),H(!1),T=!0)}for(var S=new Set,x=he,R=_e(),C=0;C<d;C+=1){D&&V.nodeType===pe&&V.data===ve&&(l=V,T=!0,H(!1));var s=v[C],a=u(s,C),g=E?null:h.get(a);g?(g.v&&Z(g.v,s),g.i&&Z(g.i,C),R&&x.skipped_effects.delete(g.e)):(g=Ke(h,E?l:ee??=$(),s,a,C,p,n,t),E||(g.e.f|=M),h.set(a,g)),S.add(a)}if(d===0&&o&&!i&&(E?i=W(()=>o(l)):(i=W(()=>o(ee??=$())),i.f|=M)),D&&d>0&&P(K()),!E)if(R){for(const[_,w]of h)S.has(_)||x.skipped_effects.add(w.e);x.oncommit(b),x.ondiscard(()=>{})}else b();T&&H(!0),y(m)}),r={effect:N,items:h,outrogroups:null,fallback:i};E=!1,D&&(l=V)}function Ge(e,n,t,u,p){var o=(u&ye)!==0,l=n.length,h=e.items,f=e.effect.first,c,i=null,m,v=[],E=[],b,N,r,d;if(o)for(d=0;d<l;d+=1)b=n[d],N=p(b,d),r=h.get(N).e,(r.f&M)===0&&(r.nodes?.a?.measure(),(m??=new Set).add(r));for(d=0;d<l;d+=1){if(b=n[d],N=p(b,d),r=h.get(N).e,e.outrogroups!==null)for(const g of e.outrogroups)g.pending.delete(r),g.done.delete(r);if((r.f&M)!==0)if(r.f^=M,r===f)O(r,null,t);else{var T=i?i.next:f;r===e.effect.last&&(e.effect.last=r.prev),r.prev&&(r.prev.next=r.next),r.next&&(r.next.prev=r.prev),I(e,i,r),I(e,r,T),O(r,T,t),i=r,v=[],E=[],f=i.next;continue}if((r.f&q)!==0&&(ae(r),o&&(r.nodes?.a?.unfix(),(m??=new Set).delete(r))),r!==f){if(c!==void 0&&c.has(r)){if(v.length<E.length){var A=E[0],S;i=A.prev;var x=v[0],R=v[v.length-1];for(S=0;S<v.length;S+=1)O(v[S],A,t);for(S=0;S<E.length;S+=1)c.delete(E[S]);I(e,x.prev,R.next),I(e,i,x),I(e,R,A),f=A,i=R,d-=1,v=[],E=[]}else c.delete(r),O(r,f,t),I(e,r.prev,r.next),I(e,r,i===null?e.effect.first:i.next),I(e,i,r),i=r;continue}for(v=[],E=[];f!==null&&f!==r;)(c??=new Set).add(f),E.push(f),f=f.next;if(f===null)continue}(r.f&M)===0&&v.push(r),i=r,f=r.next}if(e.outrogroups!==null){for(const g of e.outrogroups)g.pending.size===0&&(Y(G(g.done)),e.outrogroups?.delete(g));e.outrogroups.size===0&&(e.outrogroups=null)}if(f!==null||c!==void 0){var C=[];if(c!==void 0)for(r of c)(r.f&q)===0&&C.push(r);for(;f!==null;)(f.f&q)===0&&f!==e.fallback&&C.push(f),f=f.next;var s=C.length;if(s>0){var a=(u&se)!==0&&l===0?t:null;if(o){for(d=0;d<s;d+=1)C[d].nodes?.a?.measure();for(d=0;d<s;d+=1)C[d].nodes?.a?.fix()}Ye(e,C,a)}}o&&we(()=>{if(m!==void 0)for(r of m)r.nodes?.a?.apply()})}function Ke(e,n,t,u,p,o,l,h){var f=(l&Se)!==0?(l&xe)===0?Ce(t,!1,!1):Q(t):null,c=(l&Ne)!==0?Q(p):null;return{v:f,i:c,e:W(()=>(o(n,f??t,c??p,h),()=>{e.delete(u)}))}}function O(e,n,t){if(e.nodes)for(var u=e.nodes.start,p=e.nodes.end,o=n&&(n.f&M)===0?n.nodes.start:t;u!==null;){var l=Te(u);if(o.before(u),u===p)return;u=l}}function I(e,n,t){n===null?e.effect.first=t:n.next=t,t===null?e.effect.last=n:t.prev=n}function lt(e,n,...t){var u=new $e(e);re(()=>{const p=n()??null;u.ensure(p,p&&(o=>p(o,...t)))},Ae)}function dt(e){const n=Symbol();return{key:n,consume(){return ke(n)||e},provide(t){return Me(n,t)}}}function Ze(e){return new Proxy({},{get(n,t){return t==="style"?u=>e({style:u}).style:e}})}var gt=()=>e=>Array.from(new Set(e));const te={className:"class",defaultChecked:"checked",defaultValue:"value",htmlFor:"for",onBlur:"onfocusout",onChange:"oninput",onFocus:"onfocusin",onDoubleClick:"ondblclick"};function fe(e){let n="";for(let t in e){const u=e[t];u!=null&&(t.startsWith("--")||(t=t.replace(/[A-Z]/g,p=>`-${p.toLowerCase()}`)),n+=`${t}:${u};`)}return n}const Qe=new Set("viewBox,className,preserveAspectRatio,fillRule,clipPath,clipRule,strokeWidth,strokeLinecap,strokeLinejoin,strokeDasharray,strokeDashoffset,strokeMiterlimit".split(","));function je(e){return e in te?te[e]:Qe.has(e)?e:e.toLowerCase()}function et(e,n){return e==="style"&&typeof n=="object"?fe(n):n}const pt=Ze(e=>{const n={};for(const t in e)n[je(t)]=et(t,e[t]);return n}),tt=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g,nt=e=>{const n={};let t;for(;t=tt.exec(e);)n[t[1]]=t[2];return n};function vt(...e){const n=[];for(const u of e)u&&"class"in u&&u.class!=null&&n.push(u.class);const t=Pe(...e);return n.length>0&&(t.class=n.length===1?n[0]:n),"style"in t&&(typeof t.style=="string"&&(t.style=nt(t.style)),t.style=fe(t.style)),t}function L(e){const n=e().defaultValue??e().value,t=e().isEqual??Object.is;let u=Ie(De(n));const p=X(()=>e().value!==void 0);let o={current:Fe(()=>y(u))},l={current:void 0};ze(()=>{const c=y(p)?e().value:y(u);o={current:c},l={current:c}});const h=c=>{const i=F(c)?c(o.current):c,m=l.current;e().debug&&console.log(`[bindable > ${e().debug}] setValue`,{next:i,prev:m}),y(p)||Oe(u,i,!0),t(i,m)||e().onChange?.(i,m)};function f(){return y(p)?e().value:y(u)}return{initial:n,ref:o,get:f,set(c){(e().sync?ue:He)(()=>h(c))},invoke(c,i){e().onChange?.(c,i)},hash(c){return e().hash?.(c)??String(c)}}}L.cleanup=e=>{ie(()=>e())};L.ref=e=>{let n=e;return{get:()=>n,set:t=>{n=t}}};function rt(e){const n={current:e};return{get(t){return n.current[t]},set(t,u){n.current[t]=u}}}const J=e=>typeof e=="function"?e():e,st=(e,n)=>{let t=[],u=!0;Ve(()=>{if(u){t=e.map(o=>J(o)),u=!1;return}let p=!1;for(let o=0;o<e.length;o++)if(!qe(t[o],J(e[o]))){p=!0;break}p&&(t=e.map(o=>J(o)),n())})};function U(e){return F(e)?e():e}function ht(e,n){const t=X(()=>{const{id:s,ids:a,getRootNode:g}=U(n);return We({id:s,ids:a,getRootNode:g})}),u=(...s)=>{e.debug&&console.log(...s)},p=X(()=>e.props?.({props:Xe(U(n)),scope:y(t)})??U(n)),o=at(()=>y(p)),l=e.context?.({prop:o,bindable:L,get scope(){return y(t)},flush:ne,getContext(){return h},getComputed(){return S},getRefs(){return b},getEvent(){return v()}}),h={get(s){return l?.[s].get()},set(s,a){l?.[s].set(a)},initial(s){return l?.[s].initial},hash(s){const a=l?.[s].get();return l?.[s].hash(a)}};let f=new Map,c={current:null},i={current:null},m={current:{type:""}};const v=()=>({...m.current,current(){return m.current},previous(){return i.current}}),E=()=>({...x,hasTag(s){const a=x.get();return!!e.states[a]?.tags?.includes(s)},matches(...s){const a=x.get();return s.includes(a)}}),b=rt(e.refs?.({prop:o,context:h})??{}),N=()=>({state:E(),context:h,event:v(),prop:o,send:C,action:r,guard:d,track:st,refs:b,computed:S,flush:ne,scope:y(t),choose:A}),r=s=>{const a=F(s)?s(N()):s;if(!a)return;const g=a.map(_=>{const w=e.implementations?.actions?.[_];return w||j(`[zag-js] No implementation found for action "${JSON.stringify(_)}"`),w});for(const _ of g)_?.(N())},d=s=>F(s)?s(N()):e.implementations?.guards?.[s](N()),T=s=>{const a=F(s)?s(N()):s;if(!a)return;const g=a.map(w=>{const k=e.implementations?.effects?.[w];return k||j(`[zag-js] No implementation found for effect "${JSON.stringify(w)}"`),k}),_=[];for(const w of g){const k=w?.(N());k&&_.push(k)}return()=>_.forEach(w=>w?.())},A=s=>Je(s).find(a=>{let g=!a.guard;return Ue(a.guard)?g=!!d(a.guard):F(a.guard)&&(g=a.guard(N())),g}),S=s=>{Be(e.computed,()=>"[zag-js] No computed object found on machine");const a=e.computed[s];return a({context:h,event:v(),prop:o,refs:b,scope:y(t),computed:S})},x=L(()=>({defaultValue:e.initialState({prop:o}),onChange(s,a){a&&(f.get(a)?.(),f.delete(a)),a&&r(e.states[a]?.exit),r(c.current?.actions);const g=T(e.states[s]?.effects);if(g&&f.set(s,g),a===B){r(e.entry);const _=T(e.effects);_&&f.set(B,_)}r(e.states[s]?.entry)}}));let R=z.NotStarted;Le(()=>{const s=R===z.Started;R=z.Started,u(s?"rehydrating...":"initializing..."),x.invoke(x.initial,B)}),ie(()=>{u("unmounting..."),R=z.Stopped,f.forEach(s=>s?.()),f=new Map,c.current=null,r(e.exit)});const C=s=>{if(R!==z.Started)return;i.current=m.current,m.current=s;let a=x.get();const g=e.states[a].on?.[s.type]??e.on?.[s.type],_=A(g);if(!_)return;c.current=_;const w=_.target??a;u("transition",s.type,_.target||a,`(${_.actions})`);const k=w!==a;k?x.set(w):_.reenter&&!k?x.invoke(a,a):r(_.actions)};return e.watch?.(N()),{get state(){return E()},send:C,context:h,prop:o,get scope(){return y(t)},refs:b,computed:S,get event(){return v()},getStatus:()=>R}}function at(e){return function(t){return e()[t]}}function ne(e){ue(()=>{queueMicrotask(()=>e())})}export{gt as a,dt as c,ct as e,ft as i,vt as m,pt as n,lt as s,ht as u};
