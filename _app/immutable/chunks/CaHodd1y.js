import{L as R,M as x,N as g,O as D,v as A,P as T,h as S,k as L,Q as M,R as B,w as N,E as Y,T as F,U as k,V as U,o as C,y,g as K,W as Z,X as $,Y as q,Z as m,F as z,_ as G,a0 as H,i as Q,a1 as V,a2 as W,B as X,a3 as j,a4 as J,a5 as ee,a6 as te,a7 as se,a8 as re,S as ae,a9 as ie}from"./DO4fQmKg.js";class ne{anchor;#t=new Map;#s=new Map;#e=new Map;#r=new Set;#a=!0;constructor(e,r=!0){this.anchor=e,this.#a=r}#i=()=>{var e=R;if(this.#t.has(e)){var r=this.#t.get(e),s=this.#s.get(r);if(s)x(s),this.#r.delete(r);else{var f=this.#e.get(r);f&&(this.#s.set(r,f.effect),this.#e.delete(r),f.fragment.lastChild.remove(),this.anchor.before(f.fragment),s=f.effect)}for(const[a,n]of this.#t){if(this.#t.delete(a),a===e)break;const i=this.#e.get(n);i&&(g(i.effect),this.#e.delete(n))}for(const[a,n]of this.#s){if(a===r||this.#r.has(a))continue;const i=()=>{if(Array.from(this.#t.values()).includes(a)){var d=document.createDocumentFragment();M(n,d),d.append(A()),this.#e.set(a,{effect:n,fragment:d})}else g(n);this.#r.delete(a),this.#s.delete(a)};this.#a||!s?(this.#r.add(a),D(n,i,!1)):i()}}};#n=e=>{this.#t.delete(e);const r=Array.from(this.#t.values());for(const[s,f]of this.#e)r.includes(s)||(g(f.effect),this.#e.delete(s))};ensure(e,r){var s=R,f=B();if(r&&!this.#s.has(e)&&!this.#e.has(e))if(f){var a=document.createDocumentFragment(),n=A();a.append(n),this.#e.set(e,{effect:T(()=>r(n)),fragment:a})}else this.#s.set(e,T(()=>r(this.anchor)));if(this.#t.set(s,e),f){for(const[i,u]of this.#s)i===e?s.skipped_effects.delete(u):s.skipped_effects.add(u);for(const[i,u]of this.#e)i===e?s.skipped_effects.delete(u.effect):s.skipped_effects.add(u.effect);s.oncommit(this.#i),s.ondiscard(this.#n)}else S&&(this.anchor=L),this.#i()}}function de(t,e,r=!1){S&&K();var s=new ne(t),f=r?Y:0;function a(n,i){if(S){const d=F(t)===k;if(n===d){var u=U();C(u),s.anchor=u,y(!1),s.ensure(n,i),y(!0);return}}s.ensure(n,i)}N(()=>{var n=!1;e((i,u=!0)=>{n=!0,a(u,i)}),n||a(!1,null)},f)}let p=!1;function fe(t){var e=p;try{return p=!1,[t(),p]}finally{p=e}}const ue={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function oe(t,e,r){return new Proxy({props:t,exclude:e},ue)}function he(t,e,r,s){var f=!j||(r&J)!==0,a=(r&W)!==0,n=(r&re)!==0,i=s,u=!0,d=()=>(u&&(u=!1,i=n?X(s):s),i),h;if(a){var w=ae in t||ie in t;h=Z(t,e)?.set??(w&&e in t?c=>t[e]=c:void 0)}var l,P=!1;a?[l,P]=fe(()=>t[e]):l=t[e],l===void 0&&s!==void 0&&(l=d(),h&&(f&&$(),h(l)));var o;if(f?o=()=>{var c=t[e];return c===void 0?d():(u=!0,c)}:o=()=>{var c=t[e];return c!==void 0&&(i=void 0),c===void 0?i:c},f&&(r&q)===0)return o;if(h){var I=t.$$legacy;return(function(c,v){return arguments.length>0?((!f||!v||I||P)&&h(v?o():c),c):o()})}var b=!1,_=((r&ee)!==0?te:se)(()=>(b=!1,o()));a&&m(_);var O=Q;return(function(c,v){if(arguments.length>0){const E=v?m(_):f&&a?z(c):c;return G(_,E),b=!0,i!==void 0&&(i=E),c}return H&&b||(O.f&V)!==0?_.v:m(_)})}export{ne as B,de as i,he as p,oe as r};
