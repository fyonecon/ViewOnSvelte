import{x as ge,ad as Me,ac as Vt,$ as Ht}from"./05T4oqLv.js";import{g as xi}from"./DJHhNRDI.js";import{p as kn}from"./zT_HjRZx.js";var Jo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ji(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var br={exports:{}},_r={exports:{}},Ei;function Zo(){return Ei||(Ei=1,(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i={rotl:function(a,u){return a<<u|a>>>32-u},rotr:function(a,u){return a<<32-u|a>>>u},endian:function(a){if(a.constructor==Number)return i.rotl(a,8)&16711935|i.rotl(a,24)&4278255360;for(var u=0;u<a.length;u++)a[u]=i.endian(a[u]);return a},randomBytes:function(a){for(var u=[];a>0;a--)u.push(Math.floor(Math.random()*256));return u},bytesToWords:function(a){for(var u=[],l=0,y=0;l<a.length;l++,y+=8)u[y>>>5]|=a[l]<<24-y%32;return u},wordsToBytes:function(a){for(var u=[],l=0;l<a.length*32;l+=8)u.push(a[l>>>5]>>>24-l%32&255);return u},bytesToHex:function(a){for(var u=[],l=0;l<a.length;l++)u.push((a[l]>>>4).toString(16)),u.push((a[l]&15).toString(16));return u.join("")},hexToBytes:function(a){for(var u=[],l=0;l<a.length;l+=2)u.push(parseInt(a.substr(l,2),16));return u},bytesToBase64:function(a){for(var u=[],l=0;l<a.length;l+=3)for(var y=a[l]<<16|a[l+1]<<8|a[l+2],P=0;P<4;P++)l*8+P*6<=a.length*8?u.push(t.charAt(y>>>6*(3-P)&63)):u.push("=");return u.join("")},base64ToBytes:function(a){a=a.replace(/[^A-Z0-9+\/]/ig,"");for(var u=[],l=0,y=0;l<a.length;y=++l%4)y!=0&&u.push((t.indexOf(a.charAt(l-1))&Math.pow(2,-2*y+8)-1)<<y*2|t.indexOf(a.charAt(l))>>>6-y*2);return u}};_r.exports=i})()),_r.exports}var wr,ki;function Oi(){if(ki)return wr;ki=1;var t={utf8:{stringToBytes:function(i){return t.bin.stringToBytes(unescape(encodeURIComponent(i)))},bytesToString:function(i){return decodeURIComponent(escape(t.bin.bytesToString(i)))}},bin:{stringToBytes:function(i){for(var a=[],u=0;u<i.length;u++)a.push(i.charCodeAt(u)&255);return a},bytesToString:function(i){for(var a=[],u=0;u<i.length;u++)a.push(String.fromCharCode(i[u]));return a.join("")}}};return wr=t,wr}var xr,Ti;function ea(){if(Ti)return xr;Ti=1,xr=function(a){return a!=null&&(t(a)||i(a)||!!a._isBuffer)};function t(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function i(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&t(a.slice(0,0))}return xr}var Si;function ta(){return Si||(Si=1,(function(){var t=Zo(),i=Oi().utf8,a=ea(),u=Oi().bin,l=function(y,P){y.constructor==String?P&&P.encoding==="binary"?y=u.stringToBytes(y):y=i.stringToBytes(y):a(y)?y=Array.prototype.slice.call(y,0):!Array.isArray(y)&&y.constructor!==Uint8Array&&(y=y.toString());for(var v=t.bytesToWords(y),B=y.length*8,A=1732584193,k=-271733879,T=-1732584194,I=271733878,D=0;D<v.length;D++)v[D]=(v[D]<<8|v[D]>>>24)&16711935|(v[D]<<24|v[D]>>>8)&4278255360;v[B>>>5]|=128<<B%32,v[(B+64>>>9<<4)+14]=B;for(var G=l._ff,W=l._gg,J=l._hh,ie=l._ii,D=0;D<v.length;D+=16){var de=A,ne=k,Z=T,he=I;A=G(A,k,T,I,v[D+0],7,-680876936),I=G(I,A,k,T,v[D+1],12,-389564586),T=G(T,I,A,k,v[D+2],17,606105819),k=G(k,T,I,A,v[D+3],22,-1044525330),A=G(A,k,T,I,v[D+4],7,-176418897),I=G(I,A,k,T,v[D+5],12,1200080426),T=G(T,I,A,k,v[D+6],17,-1473231341),k=G(k,T,I,A,v[D+7],22,-45705983),A=G(A,k,T,I,v[D+8],7,1770035416),I=G(I,A,k,T,v[D+9],12,-1958414417),T=G(T,I,A,k,v[D+10],17,-42063),k=G(k,T,I,A,v[D+11],22,-1990404162),A=G(A,k,T,I,v[D+12],7,1804603682),I=G(I,A,k,T,v[D+13],12,-40341101),T=G(T,I,A,k,v[D+14],17,-1502002290),k=G(k,T,I,A,v[D+15],22,1236535329),A=W(A,k,T,I,v[D+1],5,-165796510),I=W(I,A,k,T,v[D+6],9,-1069501632),T=W(T,I,A,k,v[D+11],14,643717713),k=W(k,T,I,A,v[D+0],20,-373897302),A=W(A,k,T,I,v[D+5],5,-701558691),I=W(I,A,k,T,v[D+10],9,38016083),T=W(T,I,A,k,v[D+15],14,-660478335),k=W(k,T,I,A,v[D+4],20,-405537848),A=W(A,k,T,I,v[D+9],5,568446438),I=W(I,A,k,T,v[D+14],9,-1019803690),T=W(T,I,A,k,v[D+3],14,-187363961),k=W(k,T,I,A,v[D+8],20,1163531501),A=W(A,k,T,I,v[D+13],5,-1444681467),I=W(I,A,k,T,v[D+2],9,-51403784),T=W(T,I,A,k,v[D+7],14,1735328473),k=W(k,T,I,A,v[D+12],20,-1926607734),A=J(A,k,T,I,v[D+5],4,-378558),I=J(I,A,k,T,v[D+8],11,-2022574463),T=J(T,I,A,k,v[D+11],16,1839030562),k=J(k,T,I,A,v[D+14],23,-35309556),A=J(A,k,T,I,v[D+1],4,-1530992060),I=J(I,A,k,T,v[D+4],11,1272893353),T=J(T,I,A,k,v[D+7],16,-155497632),k=J(k,T,I,A,v[D+10],23,-1094730640),A=J(A,k,T,I,v[D+13],4,681279174),I=J(I,A,k,T,v[D+0],11,-358537222),T=J(T,I,A,k,v[D+3],16,-722521979),k=J(k,T,I,A,v[D+6],23,76029189),A=J(A,k,T,I,v[D+9],4,-640364487),I=J(I,A,k,T,v[D+12],11,-421815835),T=J(T,I,A,k,v[D+15],16,530742520),k=J(k,T,I,A,v[D+2],23,-995338651),A=ie(A,k,T,I,v[D+0],6,-198630844),I=ie(I,A,k,T,v[D+7],10,1126891415),T=ie(T,I,A,k,v[D+14],15,-1416354905),k=ie(k,T,I,A,v[D+5],21,-57434055),A=ie(A,k,T,I,v[D+12],6,1700485571),I=ie(I,A,k,T,v[D+3],10,-1894986606),T=ie(T,I,A,k,v[D+10],15,-1051523),k=ie(k,T,I,A,v[D+1],21,-2054922799),A=ie(A,k,T,I,v[D+8],6,1873313359),I=ie(I,A,k,T,v[D+15],10,-30611744),T=ie(T,I,A,k,v[D+6],15,-1560198380),k=ie(k,T,I,A,v[D+13],21,1309151649),A=ie(A,k,T,I,v[D+4],6,-145523070),I=ie(I,A,k,T,v[D+11],10,-1120210379),T=ie(T,I,A,k,v[D+2],15,718787259),k=ie(k,T,I,A,v[D+9],21,-343485551),A=A+de>>>0,k=k+ne>>>0,T=T+Z>>>0,I=I+he>>>0}return t.endian([A,k,T,I])};l._ff=function(y,P,v,B,A,k,T){var I=y+(P&v|~P&B)+(A>>>0)+T;return(I<<k|I>>>32-k)+P},l._gg=function(y,P,v,B,A,k,T){var I=y+(P&B|v&~B)+(A>>>0)+T;return(I<<k|I>>>32-k)+P},l._hh=function(y,P,v,B,A,k,T){var I=y+(P^v^B)+(A>>>0)+T;return(I<<k|I>>>32-k)+P},l._ii=function(y,P,v,B,A,k,T){var I=y+(v^(P|~B))+(A>>>0)+T;return(I<<k|I>>>32-k)+P},l._blocksize=16,l._digestsize=16,br.exports=function(y,P){if(y==null)throw new Error("Illegal argument "+y);var v=t.wordsToBytes(l(y,P));return P&&P.asBytes?v:P&&P.asString?u.bytesToString(v):t.bytesToHex(v)}})()),br.exports}var na=ta();const ra=Ji(na),Pi={debug:!1,app:{app_name:"View",app_class:"View_sv_",app_version:"1.6.5"},sys:{backend:"JS",base_route:"/ViewOnSvelte",home_route:"/home"},api:{js_call_py_url:"https://127.0.0.1:9750/api/js_call_py",api_host:"https://127.0.0.1:9750"}},je={test:{zh:"ÊµãËØï",en:"Test",jp:"",fr:"",de:"",ru:"",es:"",ko:"",vi:""},_null:{zh:" -Á©∫- ",en:" -Empty- ",jp:" -Null- ",fr:" -Null- ",de:" -Null- ",ru:" -Null- ",es:" -Null- ",ko:" -Null- ",vi:" -Null- "},show_window:{zh:"ÊòæÁ§∫ËßÜÁ™ó",en:"Show Window"},exit_app:{zh:"ÈÄÄÂá∫Á®ãÂ∫è",en:"Exit App"},about_app:{zh:"ÂÖ≥‰∫éÁ®ãÂ∫è",en:"About App"},_404:{zh:"404 È°µÈù¢‰∏çÂ≠òÂú®",en:"404 Not Found"},Example:{zh:"‰æãÂ≠ê",en:"Example"},Home:{zh:"‰∏ªÈ°µ",en:"Home"},Settings:{zh:"ËÆæÁΩÆ",en:"Settings"},About:{zh:"ÂÖ≥‰∫é",en:"About"},User:{zh:"ÊàëÁöÑ",en:"Me"},user_tips:{zh:"ËÆæÁΩÆ",en:"Settings"},user_need_login:{zh:"ËØ∑ÁôªÂΩï...",en:"Please login..."},ThemeModel:{zh:"‰∏ªÈ¢ò",en:"Themes"},ITHome:{zh:"Áà¨IT‰πãÂÆ∂",en:"Spider ITHome"},PlayAudio:{zh:"Êí≠ÊîæÈü≥È¢ë",en:"Play Audio"},reload_window:{zh:"ÈáçËΩΩÈ°µÈù¢",en:"Reload Page"},reload_window_btn:{zh:"Èáç ËΩΩ",en:"Reload"},btn_cancel:{zh:"ÂèñÊ∂à",en:"Cancel"},btn_save:{zh:"‰øùÂ≠ò",en:"Save"},btn_ok:{zh:"ÊòØÁöÑ",en:"OK"},btn_update:{zh:"Êõ¥Êñ∞",en:"Update"},a_click_tip_see_detail:{zh:"ÁÇπÂáªÊü•ÁúãËØ¶ÊÉÖ",en:"See Details"},a_click_tip_back_home:{zh:"ËøîÂõû‰∏ªÈ°µ",en:"Back Home"},confirm_change_language_tip:{zh:"ÂàáÊç¢ËØ≠Ë®Ä ÔºüÔºàÈ°µÈù¢Â∞Ü‰ºöÂà∑Êñ∞.Ôºâ",en:"Change language ÔºüÔºàThe page will refresh.Ôºâ",jp:"Ë®ÄË™û„ÇíÂàá„ÇäÊõø„Åà„Åæ„Åô„ÅãÔºüÔºà„Éö„Éº„Ç∏„ÅåÊõ¥Êñ∞„Åï„Çå„Åæ„Åô.Ôºâ",fr:"Changer de langue? (la page sera actualis√©e.)",de:"Sprache wechseln?  (Die Seite wird aktualisiert.)",ru:"–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —è–∑—ã–∫? (–°—Ç—Ä–∞–Ω–∏—Ü–∞ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∞.)",es:"¬øCambiar de idioma? (la p√°gina se actualizar√°).",ko:"Ïñ∏Ïñ¥ Ï†ÑÌôò?ÌéòÏù¥ÏßÄÍ∞Ä ÏÉàÎ°ú Í≥†Ï≥êÏßëÎãàÎã§.",vi:"ƒê·ªïi ng√¥n ng·ªØ? (Trang s·∫Ω ƒë∆∞·ª£c l√†m m·ªõi.)"},sys_default:{zh:"Ë∑üÈöèÁ≥ªÁªü",en:"Same system"},app_info:{zh:"ËΩØ‰ª∂‰ø°ÊÅØ",en:"App Information"},theme_model_light:{zh:"‰∫Æ",en:"Light"},theme_model_dark:{zh:"Êöó",en:"Dark"},playing:{zh:"Ê≠£Âú®Êí≠Êîæ",en:"Playing"},play_paused:{zh:"Â∑≤ÊöÇÂÅú„ÄÇ",en:"Paused."},play_add_new_fir:{zh:"Ê∑ªÂä†Êú¨Âú∞Êñá‰ª∂Â§π",en:"Add a new local folder"},play_update_play_list:{zh:"Êõ¥Êñ∞Êí≠ÊîæÂàóË°®",en:"Update play list"},updated:{zh:"Â∑≤Êõ¥Êñ∞",en:"Updated"},saved:{zh:"Â∑≤‰øùÂ≠ò",en:"Saved"},added:{zh:"Â∑≤Ê∑ªÂä†",en:"Added"},input_null:{zh:"ËæìÂÖ•‰∏∫Á©∫",en:"Input is empty"},null_content:{zh:"Á©∫ÂÜÖÂÆπ",en:"Content is empty"},error:{zh:"Âá∫Èîô",en:"Error"},find_btn:{zh:"Êü• Êâæ",en:"Find"},search_btn:{zh:"Êêú Á¥¢",en:"Search"},input_placeholder_find:{zh:"ËæìÂÖ•Êü•Êâæ",en:"Find..."},input_placeholder_search:{zh:"ËæìÂÖ•ÂÖ≥ÈîÆËØç",en:"Search keyword..."},remove:{zh:"ÁßªÈô§",en:"Remove"},remove_help_1:{zh:"ÁßªÈô§ËØ•Êñá‰ª∂Â§πÔºà‰∏ç‰ºö‰ªéÊú¨Êú∫Âà†Èô§ËØ•Êñá‰ª∂Â§πÔºâ",en:"Remove the folder (The folder will not be deleted from the local machine)"},del:{zh:"Âà†Èô§",en:"Del"},edit:{zh:"ÁºñËæë",en:"Edit"},share:{zh:"ÂàÜ‰∫´",en:"Share"},qr:{zh:"‰∫åÁª¥Á†Å",en:"QRCode"},input_placeholder_add_dir:{zh:"ËæìÂÖ•Êñá‰ª∂Â§πË∑ØÂæÑ",en:"Enter folder path"},runtime_error_alert:{zh:"‚ö†Ô∏è Á≥ªÁªüËøêË°åÊù°‰ª∂‰∏çÁ¨¶ÂêàÔºåÂ∑≤ÁªèÈòªÊ≠¢ËÆøÈóÆÂÜÖÂÆπ.",en:"‚ö†Ô∏è The system operating conditions do not meet the requirements, and access to the content has been blocked."},runtime_cn_chat_alert:{zh:"üòä ËØ∑‰∏çË¶ÅÂú®„ÄåÂæÆ‰ø°„ÄÅQQ„ÄÅÈíâÈíâ„ÄÅÈ£û‰π¶„ÄÅ‰ºÅ‰∏öÂæÆ‰ø°„Äç‰∏≠ÊâìÂºÄÊú¨ÁΩëÁ´ôÔºåËØ∑‰ΩøÁî®Â§ñÈÉ®ÊµèËßàÂô®„ÄÇ",en:'üòä Please do not open this website within "WeChat, QQ, DingTalk, Feishu(Lark), or Enterprise WeChat." Please use an external browser instead.'}},ia=function(t,i={},a=10){let u=0,l="",y={};const P=new URLSearchParams(i);return P.toString()&&(t=t+"?"+P.toString()),new Promise(async v=>{const B=new AbortController,A=(a<=0?10:a)*1e3,k=setTimeout(()=>{B.abort()},A);try{const T=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"},mode:"no-cors",cache:"no-cache",signal:B.signal});if(clearTimeout(k),!T.ok)console.warn("response.ok=",T,T.ok),u=0,l="GET Status Error.",y={api_url:t,status:T.status,statusText:T.statusText,error:"GETÊé•Âè£ËÆøÈóÆÊàêÂäüÔºå‰ΩÜÊé•Âè£ËøîÂõûÁä∂ÊÄÅÈîôËØØ"},v({state:u,msg:l,content:y});else{const I=T.headers.get("content-type");let D;I&&I.includes("application/json")?D=await T.json():I&&I.includes("text/")?D=await T.text():I&&I.includes("form-data")?D=await T.formData():I&&I.includes("blob")?D=await T.blob():D=await T.text(),v(D)}}catch(T){clearTimeout(k),T.name==="AbortError"?(u=404,l="GET Timeout Error.",y={api_url:t,error:`ËØ∑Ê±ÇË∂ÖÊó∂Ôºà${a}ÁßíÔºâ`,error_type:"AbortError"}):(u=404,l="GET Broken.",y={api_url:t,error:T.message||T,error_type:T.name||"NetworkError"}),v({state:u,msg:l,content:y})}})};var In={exports:{}},oa=In.exports,Ai;function aa(){return Ai||(Ai=1,(function(t,i){(function(a,u){t.exports=u()})(oa,function(){var a=function(e,n){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])})(e,n)},u=function(){return(u=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++)for(var s in n=arguments[r])Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);return e}).apply(this,arguments)};function l(e,n,r){for(var o,s=0,c=n.length;s<c;s++)!o&&s in n||((o=o||Array.prototype.slice.call(n,0,s))[s]=n[s]);return e.concat(o||Array.prototype.slice.call(n))}var y=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Jo,P=Object.keys,v=Array.isArray;function B(e,n){return typeof n!="object"||P(n).forEach(function(r){e[r]=n[r]}),e}typeof Promise>"u"||y.Promise||(y.Promise=Promise);var A=Object.getPrototypeOf,k={}.hasOwnProperty;function T(e,n){return k.call(e,n)}function I(e,n){typeof n=="function"&&(n=n(A(e))),(typeof Reflect>"u"?P:Reflect.ownKeys)(n).forEach(function(r){G(e,r,n[r])})}var D=Object.defineProperty;function G(e,n,r,o){D(e,n,B(r&&T(r,"get")&&typeof r.get=="function"?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},o))}function W(e){return{from:function(n){return e.prototype=Object.create(n.prototype),G(e.prototype,"constructor",e),{extend:I.bind(null,e.prototype)}}}}var J=Object.getOwnPropertyDescriptor,ie=[].slice;function de(e,n,r){return ie.call(e,n,r)}function ne(e,n){return n(e)}function Z(e){if(!e)throw new Error("Assertion Failed")}function he(e){y.setImmediate?setImmediate(e):setTimeout(e,0)}function pe(e,n){if(typeof n=="string"&&T(e,n))return e[n];if(!n)return e;if(typeof n!="string"){for(var r=[],o=0,s=n.length;o<s;++o){var c=pe(e,n[o]);r.push(c)}return r}var f=n.indexOf(".");if(f!==-1){var d=e[n.substr(0,f)];return d==null?void 0:pe(d,n.substr(f+1))}}function se(e,n,r){if(e&&n!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof n!="string"&&"length"in n){Z(typeof r!="string"&&"length"in r);for(var o=0,s=n.length;o<s;++o)se(e,n[o],r[o])}else{var c,f,d=n.indexOf(".");d!==-1?(c=n.substr(0,d),(f=n.substr(d+1))===""?r===void 0?v(e)&&!isNaN(parseInt(c))?e.splice(c,1):delete e[c]:e[c]=r:se(d=!(d=e[c])||!T(e,c)?e[c]={}:d,f,r)):r===void 0?v(e)&&!isNaN(parseInt(n))?e.splice(n,1):delete e[n]:e[n]=r}}function lt(e){var n,r={};for(n in e)T(e,n)&&(r[n]=e[n]);return r}var Ge=[].concat;function Pt(e){return Ge.apply([],e)}var Je="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Pt([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(n){return n+e+"Array"})}))).filter(function(e){return y[e]}),Nn=new Set(Je.map(function(e){return y[e]})),$=null;function V(e){return $=new WeakMap,e=(function n(r){if(!r||typeof r!="object")return r;var o=$.get(r);if(o)return o;if(v(r)){o=[],$.set(r,o);for(var s=0,c=r.length;s<c;++s)o.push(n(r[s]))}else if(Nn.has(r.constructor))o=r;else{var f,d=A(r);for(f in o=d===Object.prototype?{}:Object.create(d),$.set(r,o),r)T(r,f)&&(o[f]=n(r[f]))}return o})(e),$=null,e}var Ie={}.toString;function xe(e){return Ie.call(e).slice(8,-1)}var Fe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ye=typeof Fe=="symbol"?function(e){var n;return e!=null&&(n=e[Fe])&&n.apply(e)}:function(){return null};function Be(e,n){return n=e.indexOf(n),0<=n&&e.splice(n,1),0<=n}var Xe={};function fe(e){var n,r,o,s;if(arguments.length===1){if(v(e))return e.slice();if(this===Xe&&typeof e=="string")return[e];if(s=Ye(e)){for(r=[];!(o=s.next()).done;)r.push(o.value);return r}if(e==null)return[e];if(typeof(n=e.length)!="number")return[e];for(r=new Array(n);n--;)r[n]=e[n];return r}for(n=arguments.length,r=new Array(n);n--;)r[n]=arguments[n];return r}var Se=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ct=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Pe=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ct),_o={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ft(e,n){this.name=e,this.message=n}function Fr(e,n){return e+". Errors: "+Object.keys(n).map(function(r){return n[r].toString()}).filter(function(r,o,s){return s.indexOf(r)===o}).join(`
`)}function Yt(e,n,r,o){this.failures=n,this.failedKeys=o,this.successCount=r,this.message=Fr(e,n)}function dt(e,n){this.name="BulkError",this.failures=Object.keys(n).map(function(r){return n[r]}),this.failuresByPos=n,this.message=Fr(e,this.failures)}W(ft).from(Error).extend({toString:function(){return this.name+": "+this.message}}),W(Yt).from(ft),W(dt).from(ft);var jn=Pe.reduce(function(e,n){return e[n]=n+"Error",e},{}),wo=ft,H=Pe.reduce(function(e,n){var r=n+"Error";function o(s,c){this.name=r,s?typeof s=="string"?(this.message="".concat(s).concat(c?`
 `+c:""),this.inner=c||null):typeof s=="object"&&(this.message="".concat(s.name," ").concat(s.message),this.inner=s):(this.message=_o[n]||r,this.inner=null)}return W(o).from(wo),e[n]=o,e},{});H.Syntax=SyntaxError,H.Type=TypeError,H.Range=RangeError;var qr=Ct.reduce(function(e,n){return e[n+"Error"]=H[n],e},{}),Xt=Pe.reduce(function(e,n){return["Syntax","Type","Range"].indexOf(n)===-1&&(e[n+"Error"]=H[n]),e},{});function oe(){}function At(e){return e}function xo(e,n){return e==null||e===At?n:function(r){return n(e(r))}}function Qe(e,n){return function(){e.apply(this,arguments),n.apply(this,arguments)}}function Eo(e,n){return e===oe?n:function(){var r=e.apply(this,arguments);r!==void 0&&(arguments[0]=r);var o=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var c=n.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?Qe(o,this.onsuccess):o),s&&(this.onerror=this.onerror?Qe(s,this.onerror):s),c!==void 0?c:r}}function ko(e,n){return e===oe?n:function(){e.apply(this,arguments);var r=this.onsuccess,o=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?Qe(r,this.onsuccess):r),o&&(this.onerror=this.onerror?Qe(o,this.onerror):o)}}function Oo(e,n){return e===oe?n:function(r){var o=e.apply(this,arguments);B(r,o);var s=this.onsuccess,c=this.onerror;return this.onsuccess=null,this.onerror=null,r=n.apply(this,arguments),s&&(this.onsuccess=this.onsuccess?Qe(s,this.onsuccess):s),c&&(this.onerror=this.onerror?Qe(c,this.onerror):c),o===void 0?r===void 0?void 0:r:B(o,r)}}function To(e,n){return e===oe?n:function(){return n.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Mn(e,n){return e===oe?n:function(){var r=e.apply(this,arguments);if(r&&typeof r.then=="function"){for(var o=this,s=arguments.length,c=new Array(s);s--;)c[s]=arguments[s];return r.then(function(){return n.apply(o,c)})}return n.apply(this,arguments)}}Xt.ModifyError=Yt,Xt.DexieError=ft,Xt.BulkError=dt;var Ce=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Lr(e){Ce=e}var It={},zr=100,Je=typeof Promise>"u"?[]:(function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,A(e),e];var n=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[n,A(n),e]})(),Ct=Je[0],Pe=Je[1],Je=Je[2],Pe=Pe&&Pe.then,Ze=Ct&&Ct.constructor,Fn=!!Je,Dt=function(e,n){Rt.push([e,n]),Qt&&(queueMicrotask(Po),Qt=!1)},qn=!0,Qt=!0,et=[],Jt=[],Ln=At,qe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:oe,pgp:!1,env:{},finalize:oe},U=qe,Rt=[],tt=0,Zt=[];function L(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var n=this._PSD=U;if(typeof e!="function"){if(e!==It)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&$n(this,this._value))}this._state=null,this._value=null,++n.ref,(function r(o,s){try{s(function(c){if(o._state===null){if(c===o)throw new TypeError("A promise cannot be resolved with itself.");var f=o._lib&&ht();c&&typeof c.then=="function"?r(o,function(d,p){c instanceof L?c._then(d,p):c.then(d,p)}):(o._state=!0,o._value=c,Wr(o)),f&&pt()}},$n.bind(null,o))}catch(c){$n(o,c)}})(this,e)}var zn={get:function(){var e=U,n=rn;function r(o,s){var c=this,f=!e.global&&(e!==U||n!==rn),d=f&&!ze(),p=new L(function(m,w){Wn(c,new $r(Vr(o,e,f,d),Vr(s,e,f,d),m,w,e))});return this._consoleTask&&(p._consoleTask=this._consoleTask),p}return r.prototype=It,r},set:function(e){G(this,"then",e&&e.prototype===It?zn:{get:function(){return e},set:zn.set})}};function $r(e,n,r,o,s){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof n=="function"?n:null,this.resolve=r,this.reject=o,this.psd=s}function $n(e,n){var r,o;Jt.push(n),e._state===null&&(r=e._lib&&ht(),n=Ln(n),e._state=!1,e._value=n,o=e,et.some(function(s){return s._value===o._value})||et.push(o),Wr(e),r&&pt())}function Wr(e){var n=e._listeners;e._listeners=[];for(var r=0,o=n.length;r<o;++r)Wn(e,n[r]);var s=e._PSD;--s.ref||s.finalize(),tt===0&&(++tt,Dt(function(){--tt==0&&Un()},[]))}function Wn(e,n){if(e._state!==null){var r=e._state?n.onFulfilled:n.onRejected;if(r===null)return(e._state?n.resolve:n.reject)(e._value);++n.psd.ref,++tt,Dt(So,[r,e,n])}else e._listeners.push(n)}function So(e,n,r){try{var o,s=n._value;!n._state&&Jt.length&&(Jt=[]),o=Ce&&n._consoleTask?n._consoleTask.run(function(){return e(s)}):e(s),n._state||Jt.indexOf(s)!==-1||(function(c){for(var f=et.length;f;)if(et[--f]._value===c._value)return et.splice(f,1)})(n),r.resolve(o)}catch(c){r.reject(c)}finally{--tt==0&&Un(),--r.psd.ref||r.psd.finalize()}}function Po(){nt(qe,function(){ht()&&pt()})}function ht(){var e=qn;return Qt=qn=!1,e}function pt(){var e,n,r;do for(;0<Rt.length;)for(e=Rt,Rt=[],r=e.length,n=0;n<r;++n){var o=e[n];o[0].apply(null,o[1])}while(0<Rt.length);Qt=qn=!0}function Un(){var e=et;et=[],e.forEach(function(o){o._PSD.onunhandled.call(null,o._value,o)});for(var n=Zt.slice(0),r=n.length;r;)n[--r]()}function en(e){return new L(It,!1,e)}function ue(e,n){var r=U;return function(){var o=ht(),s=U;try{return $e(r,!0),e.apply(this,arguments)}catch(c){n&&n(c)}finally{$e(s,!1),o&&pt()}}}I(L.prototype,{then:zn,_then:function(e,n){Wn(this,new $r(null,null,e,n,U))},catch:function(e){if(arguments.length===1)return this.then(null,e);var n=e,r=arguments[1];return typeof n=="function"?this.then(null,function(o){return(o instanceof n?r:en)(o)}):this.then(null,function(o){return(o&&o.name===n?r:en)(o)})},finally:function(e){return this.then(function(n){return L.resolve(e()).then(function(){return n})},function(n){return L.resolve(e()).then(function(){return en(n)})})},timeout:function(e,n){var r=this;return e<1/0?new L(function(o,s){var c=setTimeout(function(){return s(new H.Timeout(n))},e);r.then(o,s).finally(clearTimeout.bind(null,c))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&G(L.prototype,Symbol.toStringTag,"Dexie.Promise"),qe.env=Ur(),I(L,{all:function(){var e=fe.apply(null,arguments).map(on);return new L(function(n,r){e.length===0&&n([]);var o=e.length;e.forEach(function(s,c){return L.resolve(s).then(function(f){e[c]=f,--o||n(e)},r)})})},resolve:function(e){return e instanceof L?e:e&&typeof e.then=="function"?new L(function(n,r){e.then(n,r)}):new L(It,!0,e)},reject:en,race:function(){var e=fe.apply(null,arguments).map(on);return new L(function(n,r){e.map(function(o){return L.resolve(o).then(n,r)})})},PSD:{get:function(){return U},set:function(e){return U=e}},totalEchoes:{get:function(){return rn}},newPSD:Le,usePSD:nt,scheduler:{get:function(){return Dt},set:function(e){Dt=e}},rejectionMapper:{get:function(){return Ln},set:function(e){Ln=e}},follow:function(e,n){return new L(function(r,o){return Le(function(s,c){var f=U;f.unhandleds=[],f.onunhandled=c,f.finalize=Qe(function(){var d,p=this;d=function(){p.unhandleds.length===0?s():c(p.unhandleds[0])},Zt.push(function m(){d(),Zt.splice(Zt.indexOf(m),1)}),++tt,Dt(function(){--tt==0&&Un()},[])},f.finalize),e()},n,r,o)})}}),Ze&&(Ze.allSettled&&G(L,"allSettled",function(){var e=fe.apply(null,arguments).map(on);return new L(function(n){e.length===0&&n([]);var r=e.length,o=new Array(r);e.forEach(function(s,c){return L.resolve(s).then(function(f){return o[c]={status:"fulfilled",value:f}},function(f){return o[c]={status:"rejected",reason:f}}).then(function(){return--r||n(o)})})})}),Ze.any&&typeof AggregateError<"u"&&G(L,"any",function(){var e=fe.apply(null,arguments).map(on);return new L(function(n,r){e.length===0&&r(new AggregateError([]));var o=e.length,s=new Array(o);e.forEach(function(c,f){return L.resolve(c).then(function(d){return n(d)},function(d){s[f]=d,--o||r(new AggregateError(s))})})})}),Ze.withResolvers&&(L.withResolvers=Ze.withResolvers));var ye={awaits:0,echoes:0,id:0},Ao=0,tn=[],nn=0,rn=0,Io=0;function Le(e,n,r,o){var s=U,c=Object.create(s);return c.parent=s,c.ref=0,c.global=!1,c.id=++Io,qe.env,c.env=Fn?{Promise:L,PromiseProp:{value:L,configurable:!0,writable:!0},all:L.all,race:L.race,allSettled:L.allSettled,any:L.any,resolve:L.resolve,reject:L.reject}:{},n&&B(c,n),++s.ref,c.finalize=function(){--this.parent.ref||this.parent.finalize()},o=nt(c,e,r,o),c.ref===0&&c.finalize(),o}function yt(){return ye.id||(ye.id=++Ao),++ye.awaits,ye.echoes+=zr,ye.id}function ze(){return!!ye.awaits&&(--ye.awaits==0&&(ye.id=0),ye.echoes=ye.awaits*zr,!0)}function on(e){return ye.echoes&&e&&e.constructor===Ze?(yt(),e.then(function(n){return ze(),n},function(n){return ze(),ce(n)})):e}function Co(){var e=tn[tn.length-1];tn.pop(),$e(e,!1)}function $e(e,n){var r,o=U;(n?!ye.echoes||nn++&&e===U:!nn||--nn&&e===U)||queueMicrotask(n?(function(s){++rn,ye.echoes&&--ye.echoes!=0||(ye.echoes=ye.awaits=ye.id=0),tn.push(U),$e(s,!0)}).bind(null,e):Co),e!==U&&(U=e,o===qe&&(qe.env=Ur()),Fn&&(r=qe.env.Promise,n=e.env,(o.global||e.global)&&(Object.defineProperty(y,"Promise",n.PromiseProp),r.all=n.all,r.race=n.race,r.resolve=n.resolve,r.reject=n.reject,n.allSettled&&(r.allSettled=n.allSettled),n.any&&(r.any=n.any))))}function Ur(){var e=y.Promise;return Fn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(y,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function nt(e,n,r,o,s){var c=U;try{return $e(e,!0),n(r,o,s)}finally{$e(c,!1)}}function Vr(e,n,r,o){return typeof e!="function"?e:function(){var s=U;r&&yt(),$e(n,!0);try{return e.apply(this,arguments)}finally{$e(s,!1),o&&queueMicrotask(ze)}}}function Vn(e){Promise===Ze&&ye.echoes===0?nn===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+Pe).indexOf("[native code]")===-1&&(yt=ze=oe);var ce=L.reject,rt="Ôøø",Ke="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Hr="String expected.",mt=[],an="__dbnames",Hn="readonly",Gn="readwrite";function it(e,n){return e?n?function(){return e.apply(this,arguments)&&n.apply(this,arguments)}:e:n}var Gr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function sn(e){return typeof e!="string"||/\./.test(e)?function(n){return n}:function(n){return n[e]===void 0&&e in n&&delete(n=V(n))[e],n}}function Yr(){throw H.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function te(e,n){try{var r=Xr(e),o=Xr(n);if(r!==o)return r==="Array"?1:o==="Array"?-1:r==="binary"?1:o==="binary"?-1:r==="string"?1:o==="string"?-1:r==="Date"?1:o!=="Date"?NaN:-1;switch(r){case"number":case"Date":case"string":return n<e?1:e<n?-1:0;case"binary":return(function(s,c){for(var f=s.length,d=c.length,p=f<d?f:d,m=0;m<p;++m)if(s[m]!==c[m])return s[m]<c[m]?-1:1;return f===d?0:f<d?-1:1})(Qr(e),Qr(n));case"Array":return(function(s,c){for(var f=s.length,d=c.length,p=f<d?f:d,m=0;m<p;++m){var w=te(s[m],c[m]);if(w!==0)return w}return f===d?0:f<d?-1:1})(e,n)}}catch{}return NaN}function Xr(e){var n=typeof e;return n!="object"?n:ArrayBuffer.isView(e)?"binary":(e=xe(e),e==="ArrayBuffer"?"binary":e)}function Qr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function un(e,n,r){var o=e.schema.yProps;return o?(n&&0<r.numFailures&&(n=n.filter(function(s,c){return!r.failures[c]})),Promise.all(o.map(function(s){return s=s.updatesTable,n?e.db.table(s).where("k").anyOf(n).delete():e.db.table(s).clear()})).then(function(){return r})):r}var Bt=(Jr.prototype.execute=function(e){var n=this["@@propmod"];if(n.add!==void 0){var r=n.add;if(v(r))return l(l([],v(e)?e:[],!0),r).sort();if(typeof r=="number")return(Number(e)||0)+r;if(typeof r=="bigint")try{return BigInt(e)+r}catch{return BigInt(0)+r}throw new TypeError("Invalid term ".concat(r))}if(n.remove!==void 0){var o=n.remove;if(v(o))return v(e)?e.filter(function(s){return!o.includes(s)}).sort():[];if(typeof o=="number")return Number(e)-o;if(typeof o=="bigint")try{return BigInt(e)-o}catch{return BigInt(0)-o}throw new TypeError("Invalid subtrahend ".concat(o))}return r=(r=n.replacePrefix)===null||r===void 0?void 0:r[0],r&&typeof e=="string"&&e.startsWith(r)?n.replacePrefix[1]+e.substring(r.length):e},Jr);function Jr(e){this["@@propmod"]=e}function Zr(e,n){for(var r=P(n),o=r.length,s=!1,c=0;c<o;++c){var f=r[c],d=n[f],p=pe(e,f);d instanceof Bt?(se(e,f,d.execute(p)),s=!0):p!==d&&(se(e,f,d),s=!0)}return s}var ei=(ae.prototype._trans=function(e,n,r){var o=this._tx||U.trans,s=this.name,c=Ce&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function f(m,w,h){if(!h.schema[s])throw new H.NotFound("Table "+s+" not part of transaction");return n(h.idbtrans,h)}var d=ht();try{var p=o&&o.db._novip===this.db._novip?o===U.trans?o._promise(e,f,r):Le(function(){return o._promise(e,f,r)},{trans:o,transless:U.transless||U}):(function m(w,h,E,g){if(w.idbdb&&(w._state.openComplete||U.letThrough||w._vip)){var b=w._createTransaction(h,E,w._dbSchema);try{b.create(),w._state.PR1398_maxLoop=3}catch(_){return _.name===jn.InvalidState&&w.isOpen()&&0<--w._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),w.close({disableAutoOpen:!1}),w.open().then(function(){return m(w,h,E,g)})):ce(_)}return b._promise(h,function(_,x){return Le(function(){return U.trans=b,g(_,x,b)})}).then(function(_){if(h==="readwrite")try{b.idbtrans.commit()}catch{}return h==="readonly"?_:b._completion.then(function(){return _})})}if(w._state.openComplete)return ce(new H.DatabaseClosed(w._state.dbOpenError));if(!w._state.isBeingOpened){if(!w._state.autoOpen)return ce(new H.DatabaseClosed);w.open().catch(oe)}return w._state.dbReadyPromise.then(function(){return m(w,h,E,g)})})(this.db,e,[this.name],f);return c&&(p._consoleTask=c,p=p.catch(function(m){return console.trace(m),ce(m)})),p}finally{d&&pt()}},ae.prototype.get=function(e,n){var r=this;return e&&e.constructor===Object?this.where(e).first(n):e==null?ce(new H.Type("Invalid argument to Table.get()")):this._trans("readonly",function(o){return r.core.get({trans:o,key:e}).then(function(s){return r.hook.reading.fire(s)})}).then(n)},ae.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(v(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var n=P(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(d){if(d.compound&&n.every(function(m){return 0<=d.keyPath.indexOf(m)})){for(var p=0;p<n.length;++p)if(n.indexOf(d.keyPath[p])===-1)return!1;return!0}return!1}).sort(function(d,p){return d.keyPath.length-p.keyPath.length})[0];if(r&&this.db._maxKey!==rt){var c=r.keyPath.slice(0,n.length);return this.where(c).equals(c.map(function(p){return e[p]}))}!r&&Ce&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(n.join("+"),"]"));var o=this.schema.idxByName;function s(d,p){return te(d,p)===0}var f=n.reduce(function(h,p){var m=h[0],w=h[1],h=o[p],E=e[p];return[m||h,m||!h?it(w,h&&h.multi?function(g){return g=pe(g,p),v(g)&&g.some(function(b){return s(E,b)})}:function(g){return s(E,pe(g,p))}):w]},[null,null]),c=f[0],f=f[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(f):r?this.filter(f):this.where(n).equals("")},ae.prototype.filter=function(e){return this.toCollection().and(e)},ae.prototype.count=function(e){return this.toCollection().count(e)},ae.prototype.offset=function(e){return this.toCollection().offset(e)},ae.prototype.limit=function(e){return this.toCollection().limit(e)},ae.prototype.each=function(e){return this.toCollection().each(e)},ae.prototype.toArray=function(e){return this.toCollection().toArray(e)},ae.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ae.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,v(e)?"[".concat(e.join("+"),"]"):e))},ae.prototype.reverse=function(){return this.toCollection().reverse()},ae.prototype.mapToClass=function(e){var n,r=this.db,o=this.name;function s(){return n!==null&&n.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof Yr&&((function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function w(){this.constructor=p}a(p,m),p.prototype=m===null?Object.create(m):(w.prototype=m.prototype,new w)})(s,n=e),Object.defineProperty(s.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),s.prototype.table=function(){return o},e=s);for(var c=new Set,f=e.prototype;f;f=A(f))Object.getOwnPropertyNames(f).forEach(function(p){return c.add(p)});function d(p){if(!p)return p;var m,w=Object.create(e.prototype);for(m in p)if(!c.has(m))try{w[m]=p[m]}catch{}return w}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=d,this.hook("reading",d),e},ae.prototype.defineClass=function(){return this.mapToClass(function(e){B(this,e)})},ae.prototype.add=function(e,n){var r=this,o=this.schema.primKey,s=o.auto,c=o.keyPath,f=e;return c&&s&&(f=sn(c)(e)),this._trans("readwrite",function(d){return r.core.mutate({trans:d,type:"add",keys:n!=null?[n]:null,values:[f]})}).then(function(d){return d.numFailures?L.reject(d.failures[0]):d.lastResult}).then(function(d){if(c)try{se(e,c,d)}catch{}return d})},ae.prototype.upsert=function(e,n){var r=this,o=this.schema.primKey.keyPath;return this._trans("readwrite",function(s){return r.core.get({trans:s,key:e}).then(function(c){var f=c??{};return Zr(f,n),o&&se(f,o,e),r.core.mutate({trans:s,type:"put",values:[f],keys:[e],upsert:!0,updates:{keys:[e],changeSpecs:[n]}}).then(function(d){return d.numFailures?L.reject(d.failures[0]):!!c})})})},ae.prototype.update=function(e,n){return typeof e!="object"||v(e)?this.where(":id").equals(e).modify(n):(e=pe(e,this.schema.primKey.keyPath),e===void 0?ce(new H.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(n))},ae.prototype.put=function(e,n){var r=this,o=this.schema.primKey,s=o.auto,c=o.keyPath,f=e;return c&&s&&(f=sn(c)(e)),this._trans("readwrite",function(d){return r.core.mutate({trans:d,type:"put",values:[f],keys:n!=null?[n]:null})}).then(function(d){return d.numFailures?L.reject(d.failures[0]):d.lastResult}).then(function(d){if(c)try{se(e,c,d)}catch{}return d})},ae.prototype.delete=function(e){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[e]}).then(function(o){return un(n,[e],o)}).then(function(o){return o.numFailures?L.reject(o.failures[0]):void 0})})},ae.prototype.clear=function(){var e=this;return this._trans("readwrite",function(n){return e.core.mutate({trans:n,type:"deleteRange",range:Gr}).then(function(r){return un(e,null,r)})}).then(function(n){return n.numFailures?L.reject(n.failures[0]):void 0})},ae.prototype.bulkGet=function(e){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:e,trans:r}).then(function(o){return o.map(function(s){return n.hook.reading.fire(s)})})})},ae.prototype.bulkAdd=function(e,n,r){var o=this,s=Array.isArray(n)?n:void 0,c=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",function(f){var m=o.schema.primKey,d=m.auto,m=m.keyPath;if(m&&s)throw new H.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new H.InvalidArgument("Arguments objects and keys must have the same length");var p=e.length,m=m&&d?e.map(sn(m)):e;return o.core.mutate({trans:f,type:"add",keys:s,values:m,wantResults:c}).then(function(b){var h=b.numFailures,E=b.results,g=b.lastResult,b=b.failures;if(h===0)return c?E:g;throw new dt("".concat(o.name,".bulkAdd(): ").concat(h," of ").concat(p," operations failed"),b)})})},ae.prototype.bulkPut=function(e,n,r){var o=this,s=Array.isArray(n)?n:void 0,c=(r=r||(s?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",function(f){var m=o.schema.primKey,d=m.auto,m=m.keyPath;if(m&&s)throw new H.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==e.length)throw new H.InvalidArgument("Arguments objects and keys must have the same length");var p=e.length,m=m&&d?e.map(sn(m)):e;return o.core.mutate({trans:f,type:"put",keys:s,values:m,wantResults:c}).then(function(b){var h=b.numFailures,E=b.results,g=b.lastResult,b=b.failures;if(h===0)return c?E:g;throw new dt("".concat(o.name,".bulkPut(): ").concat(h," of ").concat(p," operations failed"),b)})})},ae.prototype.bulkUpdate=function(e){var n=this,r=this.core,o=e.map(function(f){return f.key}),s=e.map(function(f){return f.changes}),c=[];return this._trans("readwrite",function(f){return r.getMany({trans:f,keys:o,cache:"clone"}).then(function(d){var p=[],m=[];e.forEach(function(h,E){var g=h.key,b=h.changes,_=d[E];if(_){for(var x=0,O=Object.keys(b);x<O.length;x++){var S=O[x],C=b[S];if(S===n.schema.primKey.keyPath){if(te(C,g)!==0)throw new H.Constraint("Cannot update primary key in bulkUpdate()")}else se(_,S,C)}c.push(E),p.push(g),m.push(_)}});var w=p.length;return r.mutate({trans:f,type:"put",keys:p,values:m,updates:{keys:o,changeSpecs:s}}).then(function(h){var E=h.numFailures,g=h.failures;if(E===0)return w;for(var b=0,_=Object.keys(g);b<_.length;b++){var x,O=_[b],S=c[Number(O)];S!=null&&(x=g[O],delete g[O],g[S]=x)}throw new dt("".concat(n.name,".bulkUpdate(): ").concat(E," of ").concat(w," operations failed"),g)})})})},ae.prototype.bulkDelete=function(e){var n=this,r=e.length;return this._trans("readwrite",function(o){return n.core.mutate({trans:o,type:"delete",keys:e}).then(function(s){return un(n,e,s)})}).then(function(f){var s=f.numFailures,c=f.lastResult,f=f.failures;if(s===0)return c;throw new dt("".concat(n.name,".bulkDelete(): ").concat(s," of ").concat(r," operations failed"),f)})},ae);function ae(){}function Kt(e){function n(f,d){if(d){for(var p=arguments.length,m=new Array(p-1);--p;)m[p-1]=arguments[p];return r[f].subscribe.apply(null,m),e}if(typeof f=="string")return r[f]}var r={};n.addEventType=c;for(var o=1,s=arguments.length;o<s;++o)c(arguments[o]);return n;function c(f,d,p){if(typeof f!="object"){var m;d=d||To;var w={subscribers:[],fire:p=p||oe,subscribe:function(h){w.subscribers.indexOf(h)===-1&&(w.subscribers.push(h),w.fire=d(w.fire,h))},unsubscribe:function(h){w.subscribers=w.subscribers.filter(function(E){return E!==h}),w.fire=w.subscribers.reduce(d,p)}};return r[f]=n[f]=w}P(m=f).forEach(function(h){var E=m[h];if(v(E))c(h,m[h][0],m[h][1]);else{if(E!=="asap")throw new H.InvalidArgument("Invalid event config");var g=c(h,At,function(){for(var b=arguments.length,_=new Array(b);b--;)_[b]=arguments[b];g.subscribers.forEach(function(x){he(function(){x.apply(null,_)})})})}})}}function Nt(e,n){return W(n).from({prototype:e}),n}function gt(e,n){return!(e.filter||e.algorithm||e.or)&&(n?e.justLimit:!e.replayFilter)}function Yn(e,n){e.filter=it(e.filter,n)}function Xn(e,n,r){var o=e.replayFilter;e.replayFilter=o?function(){return it(o(),n())}:n,e.justLimit=r&&!o}function cn(e,n){if(e.isPrimKey)return n.primaryKey;var r=n.getIndexByKeyPath(e.index);if(!r)throw new H.Schema("KeyPath "+e.index+" on object store "+n.name+" is not indexed");return r}function ti(e,n,r){var o=cn(e,n.schema);return n.openCursor({trans:r,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:o,range:e.range}})}function ln(e,n,r,o){var s=e.replayFilter?it(e.filter,e.replayFilter()):e.filter;if(e.or){var c={},f=function(d,p,m){var w,h;s&&!s(p,m,function(E){return p.stop(E)},function(E){return p.fail(E)})||((h=""+(w=p.primaryKey))=="[object ArrayBuffer]"&&(h=""+new Uint8Array(w)),T(c,h)||(c[h]=!0,n(d,p,m)))};return Promise.all([e.or._iterate(f,r),ni(ti(e,o,r),e.algorithm,f,!e.keysOnly&&e.valueMapper)])}return ni(ti(e,o,r),it(e.algorithm,s),n,!e.keysOnly&&e.valueMapper)}function ni(e,n,r,o){var s=ue(o?function(c,f,d){return r(o(c),f,d)}:r);return e.then(function(c){if(c)return c.start(function(){var f=function(){return c.continue()};n&&!n(c,function(d){return f=d},function(d){c.stop(d),f=oe},function(d){c.fail(d),f=oe})||s(c.value,c,function(d){return f=d}),f()})})}var Do=(re.prototype._read=function(e,n){var r=this._ctx;return r.error?r.table._trans(null,ce.bind(null,r.error)):r.table._trans("readonly",e).then(n)},re.prototype._write=function(e){var n=this._ctx;return n.error?n.table._trans(null,ce.bind(null,n.error)):n.table._trans("readwrite",e,"locked")},re.prototype._addAlgorithm=function(e){var n=this._ctx;n.algorithm=it(n.algorithm,e)},re.prototype._iterate=function(e,n){return ln(this._ctx,e,n,this._ctx.table.core)},re.prototype.clone=function(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&B(r,e),n._ctx=r,n},re.prototype.raw=function(){return this._ctx.valueMapper=null,this},re.prototype.each=function(e){var n=this._ctx;return this._read(function(r){return ln(n,e,r,n.table.core)})},re.prototype.count=function(e){var n=this;return this._read(function(r){var o=n._ctx,s=o.table.core;if(gt(o,!0))return s.count({trans:r,query:{index:cn(o,s.schema),range:o.range}}).then(function(f){return Math.min(f,o.limit)});var c=0;return ln(o,function(){return++c,!1},r,s).then(function(){return c})}).then(e)},re.prototype.sortBy=function(e,n){var r=e.split(".").reverse(),o=r[0],s=r.length-1;function c(p,m){return m?c(p[r[m]],m-1):p[o]}var f=this._ctx.dir==="next"?1:-1;function d(p,m){return te(c(p,s),c(m,s))*f}return this.toArray(function(p){return p.sort(d)}).then(n)},re.prototype.toArray=function(e){var n=this;return this._read(function(r){var o=n._ctx;if(o.dir==="next"&&gt(o,!0)&&0<o.limit){var s=o.valueMapper,c=cn(o,o.table.core.schema);return o.table.core.query({trans:r,limit:o.limit,values:!0,query:{index:c,range:o.range}}).then(function(d){return d=d.result,s?d.map(s):d})}var f=[];return ln(o,function(d){return f.push(d)},r,o.table.core).then(function(){return f})},e)},re.prototype.offset=function(e){var n=this._ctx;return e<=0||(n.offset+=e,gt(n)?Xn(n,function(){var r=e;return function(o,s){return r===0||(r===1?--r:s(function(){o.advance(r),r=0}),!1)}}):Xn(n,function(){var r=e;return function(){return--r<0}})),this},re.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Xn(this._ctx,function(){var n=e;return function(r,o,s){return--n<=0&&o(s),0<=n}},!0),this},re.prototype.until=function(e,n){return Yn(this._ctx,function(r,o,s){return!e(r.value)||(o(s),n)}),this},re.prototype.first=function(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)},re.prototype.last=function(e){return this.reverse().first(e)},re.prototype.filter=function(e){var n;return Yn(this._ctx,function(r){return e(r.value)}),(n=this._ctx).isMatch=it(n.isMatch,e),this},re.prototype.and=function(e){return this.filter(e)},re.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},re.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},re.prototype.desc=function(){return this.reverse()},re.prototype.eachKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,o){e(o.key,o)})},re.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},re.prototype.eachPrimaryKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,o){e(o.primaryKey,o)})},re.prototype.keys=function(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(o,s){r.push(s.key)}).then(function(){return r}).then(e)},re.prototype.primaryKeys=function(e){var n=this._ctx;if(n.dir==="next"&&gt(n,!0)&&0<n.limit)return this._read(function(o){var s=cn(n,n.table.core.schema);return n.table.core.query({trans:o,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(function(o){return o.result}).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(o,s){r.push(s.primaryKey)}).then(function(){return r}).then(e)},re.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},re.prototype.firstKey=function(e){return this.limit(1).keys(function(n){return n[0]}).then(e)},re.prototype.lastKey=function(e){return this.reverse().firstKey(e)},re.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var n={};return Yn(this._ctx,function(s){var o=s.primaryKey.toString(),s=T(n,o);return n[o]=!0,!s}),this},re.prototype.modify=function(e){var n=this,r=this._ctx;return this._write(function(o){var s=typeof e=="function"?e:function(_){return Zr(_,e)},c=r.table.core,m=c.schema.primaryKey,f=m.outbound,d=m.extractKey,p=200,m=n.db._options.modifyChunkSize;m&&(p=typeof m=="object"?m[c.name]||m["*"]||200:m);function w(_,S){var O=S.failures,S=S.numFailures;E+=_-S;for(var C=0,R=P(O);C<R.length;C++){var N=R[C];h.push(O[N])}}var h=[],E=0,g=[],b=e===ri;return n.clone().primaryKeys().then(function(_){function x(S){var C=Math.min(p,_.length-S),R=_.slice(S,S+C);return(b?Promise.resolve([]):c.getMany({trans:o,keys:R,cache:"immutable"})).then(function(N){var F=[],K=[],j=f?[]:null,q=b?R:[];if(!b)for(var M=0;M<C;++M){var z=N[M],X={value:V(z),primKey:_[S+M]};s.call(X,X.value,X)!==!1&&(X.value==null?q.push(_[S+M]):f||te(d(z),d(X.value))===0?(K.push(X.value),f&&j.push(_[S+M])):(q.push(_[S+M]),F.push(X.value)))}return Promise.resolve(0<F.length&&c.mutate({trans:o,type:"add",values:F}).then(function(Q){for(var ee in Q.failures)q.splice(parseInt(ee),1);w(F.length,Q)})).then(function(){return(0<K.length||O&&typeof e=="object")&&c.mutate({trans:o,type:"put",keys:j,values:K,criteria:O,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<S}).then(function(Q){return w(K.length,Q)})}).then(function(){return(0<q.length||O&&b)&&c.mutate({trans:o,type:"delete",keys:q,criteria:O,isAdditionalChunk:0<S}).then(function(Q){return un(r.table,q,Q)}).then(function(Q){return w(q.length,Q)})}).then(function(){return _.length>S+C&&x(S+p)})})}var O=gt(r)&&r.limit===1/0&&(typeof e!="function"||b)&&{index:r.index,range:r.range};return x(0).then(function(){if(0<h.length)throw new Yt("Error modifying one or more objects",h,E,g);return _.length})})})},re.prototype.delete=function(){var e=this._ctx,n=e.range;return!gt(e)||e.table.schema.yProps||!e.isPrimKey&&n.type!==3?this.modify(ri):this._write(function(r){var o=e.table.core.schema.primaryKey,s=n;return e.table.core.count({trans:r,query:{index:o,range:s}}).then(function(c){return e.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(function(p){var d=p.failures,p=p.numFailures;if(p)throw new Yt("Could not delete some values",Object.keys(d).map(function(m){return d[m]}),c-p);return c-p})})})},re);function re(){}var ri=function(e,n){return n.value=null};function Ro(e,n){return e<n?-1:e===n?0:1}function Bo(e,n){return n<e?-1:e===n?0:1}function Oe(e,n,r){return e=e instanceof oi?new e.Collection(e):e,e._ctx.error=new(r||TypeError)(n),e}function vt(e){return new e.Collection(e,function(){return ii("")}).limit(0)}function fn(e,n,r,o){var s,c,f,d,p,m,w,h=r.length;if(!r.every(function(b){return typeof b=="string"}))return Oe(e,Hr);function E(b){s=b==="next"?function(x){return x.toUpperCase()}:function(x){return x.toLowerCase()},c=b==="next"?function(x){return x.toLowerCase()}:function(x){return x.toUpperCase()},f=b==="next"?Ro:Bo;var _=r.map(function(x){return{lower:c(x),upper:s(x)}}).sort(function(x,O){return f(x.lower,O.lower)});d=_.map(function(x){return x.upper}),p=_.map(function(x){return x.lower}),w=(m=b)==="next"?"":o}E("next"),e=new e.Collection(e,function(){return We(d[0],p[h-1]+o)}),e._ondirectionchange=function(b){E(b)};var g=0;return e._addAlgorithm(function(b,_,x){var O=b.key;if(typeof O!="string")return!1;var S=c(O);if(n(S,p,g))return!0;for(var C=null,R=g;R<h;++R){var N=(function(F,K,j,q,M,z){for(var X=Math.min(F.length,q.length),Q=-1,ee=0;ee<X;++ee){var Te=K[ee];if(Te!==q[ee])return M(F[ee],j[ee])<0?F.substr(0,ee)+j[ee]+j.substr(ee+1):M(F[ee],q[ee])<0?F.substr(0,ee)+q[ee]+j.substr(ee+1):0<=Q?F.substr(0,Q)+K[Q]+j.substr(Q+1):null;M(F[ee],Te)<0&&(Q=ee)}return X<q.length&&z==="next"?F+j.substr(F.length):X<F.length&&z==="prev"?F.substr(0,j.length):Q<0?null:F.substr(0,Q)+q[Q]+j.substr(Q+1)})(O,S,d[R],p[R],f,m);N===null&&C===null?g=R+1:(C===null||0<f(C,N))&&(C=N)}return _(C!==null?function(){b.continue(C+w)}:x),!1}),e}function We(e,n,r,o){return{type:2,lower:e,upper:n,lowerOpen:r,upperOpen:o}}function ii(e){return{type:1,lower:e,upper:e}}var oi=(Object.defineProperty(me.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),me.prototype.between=function(e,n,r,o){r=r!==!1,o=o===!0;try{return 0<this._cmp(e,n)||this._cmp(e,n)===0&&(r||o)&&(!r||!o)?vt(this):new this.Collection(this,function(){return We(e,n,!r,!o)})}catch{return Oe(this,Ke)}},me.prototype.equals=function(e){return e==null?Oe(this,Ke):new this.Collection(this,function(){return ii(e)})},me.prototype.above=function(e){return e==null?Oe(this,Ke):new this.Collection(this,function(){return We(e,void 0,!0)})},me.prototype.aboveOrEqual=function(e){return e==null?Oe(this,Ke):new this.Collection(this,function(){return We(e,void 0,!1)})},me.prototype.below=function(e){return e==null?Oe(this,Ke):new this.Collection(this,function(){return We(void 0,e,!1,!0)})},me.prototype.belowOrEqual=function(e){return e==null?Oe(this,Ke):new this.Collection(this,function(){return We(void 0,e)})},me.prototype.startsWith=function(e){return typeof e!="string"?Oe(this,Hr):this.between(e,e+rt,!0,!0)},me.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):fn(this,function(n,r){return n.indexOf(r[0])===0},[e],rt)},me.prototype.equalsIgnoreCase=function(e){return fn(this,function(n,r){return n===r[0]},[e],"")},me.prototype.anyOfIgnoreCase=function(){var e=fe.apply(Xe,arguments);return e.length===0?vt(this):fn(this,function(n,r){return r.indexOf(n)!==-1},e,"")},me.prototype.startsWithAnyOfIgnoreCase=function(){var e=fe.apply(Xe,arguments);return e.length===0?vt(this):fn(this,function(n,r){return r.some(function(o){return n.indexOf(o)===0})},e,rt)},me.prototype.anyOf=function(){var e=this,n=fe.apply(Xe,arguments),r=this._cmp;try{n.sort(r)}catch{return Oe(this,Ke)}if(n.length===0)return vt(this);var o=new this.Collection(this,function(){return We(n[0],n[n.length-1])});o._ondirectionchange=function(c){r=c==="next"?e._ascending:e._descending,n.sort(r)};var s=0;return o._addAlgorithm(function(c,f,d){for(var p=c.key;0<r(p,n[s]);)if(++s===n.length)return f(d),!1;return r(p,n[s])===0||(f(function(){c.continue(n[s])}),!1)}),o},me.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},me.prototype.noneOf=function(){var e=fe.apply(Xe,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Oe(this,Ke)}var n=e.reduce(function(r,o){return r?r.concat([[r[r.length-1][1],o]]):[[-1/0,o]]},null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},me.prototype.inAnyRange=function(O,n){var r=this,o=this._cmp,s=this._ascending,c=this._descending,f=this._min,d=this._max;if(O.length===0)return vt(this);if(!O.every(function(S){return S[0]!==void 0&&S[1]!==void 0&&s(S[0],S[1])<=0}))return Oe(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",H.InvalidArgument);var p=!n||n.includeLowers!==!1,m=n&&n.includeUppers===!0,w,h=s;function E(S,C){return h(S[0],C[0])}try{(w=O.reduce(function(S,C){for(var R=0,N=S.length;R<N;++R){var F=S[R];if(o(C[0],F[1])<0&&0<o(C[1],F[0])){F[0]=f(F[0],C[0]),F[1]=d(F[1],C[1]);break}}return R===N&&S.push(C),S},[])).sort(E)}catch{return Oe(this,Ke)}var g=0,b=m?function(S){return 0<s(S,w[g][1])}:function(S){return 0<=s(S,w[g][1])},_=p?function(S){return 0<c(S,w[g][0])}:function(S){return 0<=c(S,w[g][0])},x=b,O=new this.Collection(this,function(){return We(w[0][0],w[w.length-1][1],!p,!m)});return O._ondirectionchange=function(S){h=S==="next"?(x=b,s):(x=_,c),w.sort(E)},O._addAlgorithm(function(S,C,R){for(var N,F=S.key;x(F);)if(++g===w.length)return C(R),!1;return!b(N=F)&&!_(N)||(r._cmp(F,w[g][1])===0||r._cmp(F,w[g][0])===0||C(function(){h===s?S.continue(w[g][0]):S.continue(w[g][1])}),!1)}),O},me.prototype.startsWithAnyOf=function(){var e=fe.apply(Xe,arguments);return e.every(function(n){return typeof n=="string"})?e.length===0?vt(this):this.inAnyRange(e.map(function(n){return[n,n+rt]})):Oe(this,"startsWithAnyOf() only works with strings")},me);function me(){}function De(e){return ue(function(n){return jt(n),e(n.target.error),!1})}function jt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Mt="storagemutated",Qn="x-storagemutated-1",Ue=Kt(null,Mt),Ko=(Re.prototype._lock=function(){return Z(!U.global),++this._reculock,this._reculock!==1||U.global||(U.lockOwnerFor=this),this},Re.prototype._unlock=function(){if(Z(!U.global),--this._reculock==0)for(U.global||(U.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{nt(e[1],e[0])}catch{}}return this},Re.prototype._locked=function(){return this._reculock&&U.lockOwnerFor!==this},Re.prototype.create=function(e){var n=this;if(!this.mode)return this;var r=this.db.idbdb,o=this.db._state.dbOpenError;if(Z(!this.idbtrans),!e&&!r)switch(o&&o.name){case"DatabaseClosedError":throw new H.DatabaseClosed(o);case"MissingAPIError":throw new H.MissingAPI(o.message,o);default:throw new H.OpenFailed(o)}if(!this.active)throw new H.TransactionInactive;return Z(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||r).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ue(function(s){jt(s),n._reject(e.error)}),e.onabort=ue(function(s){jt(s),n.active&&n._reject(new H.Abort(e.error)),n.active=!1,n.on("abort").fire(s)}),e.oncomplete=ue(function(){n.active=!1,n._resolve(),"mutatedParts"in e&&Ue.storagemutated.fire(e.mutatedParts)}),this},Re.prototype._promise=function(e,n,r){var o=this;if(e==="readwrite"&&this.mode!=="readwrite")return ce(new H.ReadOnly("Transaction is readonly"));if(!this.active)return ce(new H.TransactionInactive);if(this._locked())return new L(function(c,f){o._blockedFuncs.push([function(){o._promise(e,n,r).then(c,f)},U])});if(r)return Le(function(){var c=new L(function(f,d){o._lock();var p=n(f,d,o);p&&p.then&&p.then(f,d)});return c.finally(function(){return o._unlock()}),c._lib=!0,c});var s=new L(function(c,f){var d=n(c,f,o);d&&d.then&&d.then(c,f)});return s._lib=!0,s},Re.prototype._root=function(){return this.parent?this.parent._root():this},Re.prototype.waitFor=function(e){var n,r=this._root(),o=L.resolve(e);r._waitingFor?r._waitingFor=r._waitingFor.then(function(){return o}):(r._waitingFor=o,r._waitingQueue=[],n=r.idbtrans.objectStore(r.storeNames[0]),(function c(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(n.get(-1/0).onsuccess=c)})());var s=r._waitingFor;return new L(function(c,f){o.then(function(d){return r._waitingQueue.push(ue(c.bind(null,d)))},function(d){return r._waitingQueue.push(ue(f.bind(null,d)))}).finally(function(){r._waitingFor===s&&(r._waitingFor=null)})})},Re.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new H.Abort))},Re.prototype.table=function(e){var n=this._memoizedTables||(this._memoizedTables={});if(T(n,e))return n[e];var r=this.schema[e];if(!r)throw new H.NotFound("Table "+e+" not part of transaction");return r=new this.db.Table(e,r,this),r.core=this.db.core.table(e),n[e]=r},Re);function Re(){}function Jn(e,n,r,o,s,c,f,d){return{name:e,keyPath:n,unique:r,multi:o,auto:s,compound:c,src:(r&&!f?"&":"")+(o?"*":"")+(s?"++":"")+ai(n),type:d}}function ai(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Zn(e,n,r){return{name:e,primKey:n,indexes:r,mappedClass:null,idxByName:(o=function(s){return[s.name,s]},r.reduce(function(s,c,f){return f=o(c,f),f&&(s[f[0]]=f[1]),s},{}))};var o}var Ft=function(e){try{return e.only([[]]),Ft=function(){return[[]]},[[]]}catch{return Ft=function(){return rt},rt}};function er(e){return e==null?function(){}:typeof e=="string"?(n=e).split(".").length===1?function(r){return r[n]}:function(r){return pe(r,n)}:function(r){return pe(r,e)};var n}function si(e){return[].slice.call(e)}var No=0;function qt(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function jo(e,n,p){function o(x){if(x.type===3)return null;if(x.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var g=x.lower,b=x.upper,_=x.lowerOpen,x=x.upperOpen;return g===void 0?b===void 0?null:n.upperBound(b,!!x):b===void 0?n.lowerBound(g,!!_):n.bound(g,b,!!_,!!x)}function s(E){var g,b=E.name;return{name:b,schema:E,mutate:function(_){var x=_.trans,O=_.type,S=_.keys,C=_.values,R=_.range;return new Promise(function(N,F){N=ue(N);var K=x.objectStore(b),j=K.keyPath==null,q=O==="put"||O==="add";if(!q&&O!=="delete"&&O!=="deleteRange")throw new Error("Invalid operation type: "+O);var M,z=(S||C||{length:1}).length;if(S&&C&&S.length!==C.length)throw new Error("Given keys array must have same length as given values array.");if(z===0)return N({numFailures:0,failures:{},results:[],lastResult:void 0});function X(Ee){++Te,jt(Ee)}var Q=[],ee=[],Te=0;if(O==="deleteRange"){if(R.type===4)return N({numFailures:Te,failures:ee,results:[],lastResult:void 0});R.type===3?Q.push(M=K.clear()):Q.push(M=K.delete(o(R)))}else{var j=q?j?[C,S]:[C,null]:[S,null],Y=j[0],be=j[1];if(q)for(var _e=0;_e<z;++_e)Q.push(M=be&&be[_e]!==void 0?K[O](Y[_e],be[_e]):K[O](Y[_e])),M.onerror=X;else for(_e=0;_e<z;++_e)Q.push(M=K[O](Y[_e])),M.onerror=X}function En(Ee){Ee=Ee.target.result,Q.forEach(function(st,vr){return st.error!=null&&(ee[vr]=st.error)}),N({numFailures:Te,failures:ee,results:O==="delete"?S:Q.map(function(st){return st.result}),lastResult:Ee})}M.onerror=function(Ee){X(Ee),En(Ee)},M.onsuccess=En})},getMany:function(_){var x=_.trans,O=_.keys;return new Promise(function(S,C){S=ue(S);for(var R,N=x.objectStore(b),F=O.length,K=new Array(F),j=0,q=0,M=function(Q){Q=Q.target,K[Q._pos]=Q.result,++q===j&&S(K)},z=De(C),X=0;X<F;++X)O[X]!=null&&((R=N.get(O[X]))._pos=X,R.onsuccess=M,R.onerror=z,++j);j===0&&S(K)})},get:function(_){var x=_.trans,O=_.key;return new Promise(function(S,C){S=ue(S);var R=x.objectStore(b).get(O);R.onsuccess=function(N){return S(N.target.result)},R.onerror=De(C)})},query:(g=m,function(_){return new Promise(function(x,O){x=ue(x);var S,C,R,j=_.trans,N=_.values,F=_.limit,M=_.query,K=F===1/0?void 0:F,q=M.index,M=M.range,j=j.objectStore(b),q=q.isPrimaryKey?j:j.index(q.name),M=o(M);if(F===0)return x({result:[]});g?((K=N?q.getAll(M,K):q.getAllKeys(M,K)).onsuccess=function(z){return x({result:z.target.result})},K.onerror=De(O)):(S=0,C=!N&&"openKeyCursor"in q?q.openKeyCursor(M):q.openCursor(M),R=[],C.onsuccess=function(z){var X=C.result;return X?(R.push(N?X.value:X.primaryKey),++S===F?x({result:R}):void X.continue()):x({result:R})},C.onerror=De(O))})}),openCursor:function(_){var x=_.trans,O=_.values,S=_.query,C=_.reverse,R=_.unique;return new Promise(function(N,F){N=ue(N);var q=S.index,K=S.range,j=x.objectStore(b),j=q.isPrimaryKey?j:j.index(q.name),q=C?R?"prevunique":"prev":R?"nextunique":"next",M=!O&&"openKeyCursor"in j?j.openKeyCursor(o(K),q):j.openCursor(o(K),q);M.onerror=De(F),M.onsuccess=ue(function(z){var X,Q,ee,Te,Y=M.result;Y?(Y.___id=++No,Y.done=!1,X=Y.continue.bind(Y),Q=(Q=Y.continuePrimaryKey)&&Q.bind(Y),ee=Y.advance.bind(Y),Te=function(){throw new Error("Cursor not stopped")},Y.trans=x,Y.stop=Y.continue=Y.continuePrimaryKey=Y.advance=function(){throw new Error("Cursor not started")},Y.fail=ue(F),Y.next=function(){var be=this,_e=1;return this.start(function(){return _e--?be.continue():be.stop()}).then(function(){return be})},Y.start=function(be){function _e(){if(M.result)try{be()}catch(Ee){Y.fail(Ee)}else Y.done=!0,Y.start=function(){throw new Error("Cursor behind last entry")},Y.stop()}var En=new Promise(function(Ee,st){Ee=ue(Ee),M.onerror=De(st),Y.fail=st,Y.stop=function(vr){Y.stop=Y.continue=Y.continuePrimaryKey=Y.advance=Te,Ee(vr)}});return M.onsuccess=ue(function(Ee){M.onsuccess=_e,_e()}),Y.continue=X,Y.continuePrimaryKey=Q,Y.advance=ee,_e(),En},N(Y)):N(null)},F)})},count:function(_){var x=_.query,O=_.trans,S=x.index,C=x.range;return new Promise(function(R,N){var F=O.objectStore(b),K=S.isPrimaryKey?F:F.index(S.name),F=o(C),K=F?K.count(F):K.count();K.onsuccess=ue(function(j){return R(j.target.result)}),K.onerror=De(N)})}}}var c,f,d,w=(f=p,d=si((c=e).objectStoreNames),{schema:{name:c.name,tables:d.map(function(E){return f.objectStore(E)}).map(function(E){var g=E.keyPath,x=E.autoIncrement,b=v(g),_={},x={name:E.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:g==null,compound:b,keyPath:g,autoIncrement:x,unique:!0,extractKey:er(g)},indexes:si(E.indexNames).map(function(O){return E.index(O)}).map(function(R){var S=R.name,C=R.unique,N=R.multiEntry,R=R.keyPath,N={name:S,compound:v(R),keyPath:R,unique:C,multiEntry:N,extractKey:er(R)};return _[qt(R)]=N}),getIndexByKeyPath:function(O){return _[qt(O)]}};return _[":id"]=x.primaryKey,g!=null&&(_[qt(g)]=x.primaryKey),x})},hasGetAll:0<d.length&&"getAll"in f.objectStore(d[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),p=w.schema,m=w.hasGetAll,w=p.tables.map(s),h={};return w.forEach(function(E){return h[E.name]=E}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(E){if(!h[E])throw new Error("Table '".concat(E,"' not found"));return h[E]},MIN_KEY:-1/0,MAX_KEY:Ft(n),schema:p}}function Mo(e,n,r,o){var s=r.IDBKeyRange;return r.indexedDB,{dbcore:(o=jo(n,s,o),e.dbcore.reduce(function(c,f){return f=f.create,u(u({},c),f(c))},o))}}function dn(e,o){var r=o.db,o=Mo(e._middlewares,r,e._deps,o);e.core=o.dbcore,e.tables.forEach(function(s){var c=s.name;e.core.schema.tables.some(function(f){return f.name===c})&&(s.core=e.core.table(c),e[c]instanceof e.Table&&(e[c].core=s.core))})}function hn(e,n,r,o){r.forEach(function(s){var c=o[s];n.forEach(function(f){var d=(function p(m,w){return J(m,w)||(m=A(m))&&p(m,w)})(f,s);(!d||"value"in d&&d.value===void 0)&&(f===e.Transaction.prototype||f instanceof e.Transaction?G(f,s,{get:function(){return this.table(s)},set:function(p){D(this,s,{value:p,writable:!0,configurable:!0,enumerable:!0})}}):f[s]=new e.Table(s,c))})})}function tr(e,n){n.forEach(function(r){for(var o in r)r[o]instanceof e.Table&&delete r[o]})}function Fo(e,n){return e._cfg.version-n._cfg.version}function qo(e,n,r,o){var s=e._dbSchema;r.objectStoreNames.contains("$meta")&&!s.$meta&&(s.$meta=Zn("$meta",ci("")[0],[]),e._storeNames.push("$meta"));var c=e._createTransaction("readwrite",e._storeNames,s);c.create(r),c._completion.catch(o);var f=c._reject.bind(c),d=U.transless||U;Le(function(){return U.trans=c,U.transless=d,n!==0?(dn(e,r),m=n,((p=c).storeNames.includes("$meta")?p.table("$meta").get("version").then(function(w){return w??m}):L.resolve(m)).then(function(w){return E=w,g=c,b=r,_=[],w=(h=e)._versions,x=h._dbSchema=yn(0,h.idbdb,b),(w=w.filter(function(O){return O._cfg.version>=E})).length!==0?(w.forEach(function(O){_.push(function(){var S=x,C=O._cfg.dbschema;mn(h,S,b),mn(h,C,b),x=h._dbSchema=C;var R=nr(S,C);R.add.forEach(function(q){rr(b,q[0],q[1].primKey,q[1].indexes)}),R.change.forEach(function(q){if(q.recreate)throw new H.Upgrade("Not yet support for changing primary key");var M=b.objectStore(q.name);q.add.forEach(function(z){return pn(M,z)}),q.change.forEach(function(z){M.deleteIndex(z.name),pn(M,z)}),q.del.forEach(function(z){return M.deleteIndex(z)})});var N=O._cfg.contentUpgrade;if(N&&O._cfg.version>E){dn(h,b),g._memoizedTables={};var F=lt(C);R.del.forEach(function(q){F[q]=S[q]}),tr(h,[h.Transaction.prototype]),hn(h,[h.Transaction.prototype],P(F),F),g.schema=F;var K,j=Se(N);return j&&yt(),R=L.follow(function(){var q;(K=N(g))&&j&&(q=ze.bind(null,null),K.then(q,q))}),K&&typeof K.then=="function"?L.resolve(K):R.then(function(){return K})}}),_.push(function(S){var C,R,N=O._cfg.dbschema;C=N,R=S,[].slice.call(R.db.objectStoreNames).forEach(function(F){return C[F]==null&&R.db.deleteObjectStore(F)}),tr(h,[h.Transaction.prototype]),hn(h,[h.Transaction.prototype],h._storeNames,h._dbSchema),g.schema=h._dbSchema}),_.push(function(S){h.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(h.idbdb.version/10)===O._cfg.version?(h.idbdb.deleteObjectStore("$meta"),delete h._dbSchema.$meta,h._storeNames=h._storeNames.filter(function(C){return C!=="$meta"})):S.objectStore("$meta").put(O._cfg.version,"version"))})}),(function O(){return _.length?L.resolve(_.shift()(g.idbtrans)).then(O):L.resolve()})().then(function(){ui(x,b)})):L.resolve();var h,E,g,b,_,x}).catch(f)):(P(s).forEach(function(w){rr(r,w,s[w].primKey,s[w].indexes)}),dn(e,r),void L.follow(function(){return e.on.populate.fire(c)}).catch(f));var p,m})}function Lo(e,n){ui(e._dbSchema,n),n.db.version%10!=0||n.objectStoreNames.contains("$meta")||n.db.createObjectStore("$meta").add(Math.ceil(n.db.version/10-1),"version");var r=yn(0,e.idbdb,n);mn(e,e._dbSchema,n);for(var o=0,s=nr(r,e._dbSchema).change;o<s.length;o++){var c=(function(f){if(f.change.length||f.recreate)return console.warn("Unable to patch indexes of table ".concat(f.name," because it has changes on the type of index or primary key.")),{value:void 0};var d=n.objectStore(f.name);f.add.forEach(function(p){Ce&&console.debug("Dexie upgrade patch: Creating missing index ".concat(f.name,".").concat(p.src)),pn(d,p)})})(s[o]);if(typeof c=="object")return c.value}}function nr(e,n){var r,o={del:[],add:[],change:[]};for(r in e)n[r]||o.del.push(r);for(r in n){var s=e[r],c=n[r];if(s){var f={name:r,def:c,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(c.primKey.keyPath||"")||s.primKey.auto!==c.primKey.auto)f.recreate=!0,o.change.push(f);else{var d=s.idxByName,p=c.idxByName,m=void 0;for(m in d)p[m]||f.del.push(m);for(m in p){var w=d[m],h=p[m];w?w.src!==h.src&&f.change.push(h):f.add.push(h)}(0<f.del.length||0<f.add.length||0<f.change.length)&&o.change.push(f)}}else o.add.push([r,c])}return o}function rr(e,n,r,o){var s=e.db.createObjectStore(n,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return o.forEach(function(c){return pn(s,c)}),s}function ui(e,n){P(e).forEach(function(r){n.db.objectStoreNames.contains(r)||(Ce&&console.debug("Dexie: Creating missing table",r),rr(n,r,e[r].primKey,e[r].indexes))})}function pn(e,n){e.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function yn(e,n,r){var o={};return de(n.objectStoreNames,0).forEach(function(s){for(var c=r.objectStore(s),f=Jn(ai(m=c.keyPath),m||"",!0,!1,!!c.autoIncrement,m&&typeof m!="string",!0),d=[],p=0;p<c.indexNames.length;++p){var w=c.index(c.indexNames[p]),m=w.keyPath,w=Jn(w.name,m,!!w.unique,!!w.multiEntry,!1,m&&typeof m!="string",!1);d.push(w)}o[s]=Zn(s,f,d)}),o}function mn(e,n,r){for(var o=r.db.objectStoreNames,s=0;s<o.length;++s){var c=o[s],f=r.objectStore(c);e._hasGetAll="getAll"in f;for(var d=0;d<f.indexNames.length;++d){var p=f.indexNames[d],m=f.index(p).keyPath,w=typeof m=="string"?m:"["+de(m).join("+")+"]";!n[c]||(m=n[c].idxByName[w])&&(m.name=p,delete n[c].idxByName[w],n[c].idxByName[p]=m)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&y.WorkerGlobalScope&&y instanceof y.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function ci(e){return e.split(",").map(function(n,r){var c=n.split(":"),o=(s=c[1])===null||s===void 0?void 0:s.trim(),s=(n=c[0].trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(s)?s.match(/^\[(.*)\]$/)[1].split("+"):s;return Jn(s,c||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),v(c),r===0,o)})}var zo=(bt.prototype._createTableSchema=Zn,bt.prototype._parseIndexSyntax=ci,bt.prototype._parseStoresSpec=function(e,n){var r=this;P(e).forEach(function(o){if(e[o]!==null){var s=r._parseIndexSyntax(e[o]),c=s.shift();if(!c)throw new H.Schema("Invalid schema for table "+o+": "+e[o]);if(c.unique=!0,c.multi)throw new H.Schema("Primary key cannot be multiEntry*");s.forEach(function(f){if(f.auto)throw new H.Schema("Only primary key can be marked as autoIncrement (++)");if(!f.keyPath)throw new H.Schema("Index must have a name and cannot be an empty string")}),s=r._createTableSchema(o,c,s),n[o]=s}})},bt.prototype.stores=function(r){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?B(this._cfg.storesSource,r):r;var r=n._versions,o={},s={};return r.forEach(function(c){B(o,c._cfg.storesSource),s=c._cfg.dbschema={},c._parseStoresSpec(o,s)}),n._dbSchema=s,tr(n,[n._allTables,n,n.Transaction.prototype]),hn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],P(s),s),n._storeNames=P(s),this},bt.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Mn(this._cfg.contentUpgrade||oe,e),this},bt);function bt(){}function ir(e,n){var r=e._dbNamesDB;return r||(r=e._dbNamesDB=new Ne(an,{addons:[],indexedDB:e,IDBKeyRange:n})).version(1).stores({dbnames:"name"}),r.table("dbnames")}function or(e){return e&&typeof e.databases=="function"}function ar(e){return Le(function(){return U.letThrough=!0,e()})}function sr(e){return!("from"in e)}var ve=function(e,n){if(!this){var r=new ve;return e&&"d"in e&&B(r,e),r}B(this,arguments.length?{d:1,from:e,to:1<arguments.length?n:e}:{d:0})};function Lt(e,n,r){var o=te(n,r);if(!isNaN(o)){if(0<o)throw RangeError();if(sr(e))return B(e,{from:n,to:r,d:1});var s=e.l,o=e.r;if(te(r,e.from)<0)return s?Lt(s,n,r):e.l={from:n,to:r,d:1,l:null,r:null},fi(e);if(0<te(n,e.to))return o?Lt(o,n,r):e.r={from:n,to:r,d:1,l:null,r:null},fi(e);te(n,e.from)<0&&(e.from=n,e.l=null,e.d=o?o.d+1:1),0<te(r,e.to)&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1),r=!e.r,s&&!e.l&&zt(e,s),o&&r&&zt(e,o)}}function zt(e,n){sr(n)||(function r(o,p){var c=p.from,f=p.to,d=p.l,p=p.r;Lt(o,c,f),d&&r(o,d),p&&r(o,p)})(e,n)}function li(e,n){var r=gn(n),o=r.next();if(o.done)return!1;for(var s=o.value,c=gn(e),f=c.next(s.from),d=f.value;!o.done&&!f.done;){if(te(d.from,s.to)<=0&&0<=te(d.to,s.from))return!0;te(s.from,d.from)<0?s=(o=r.next(d.from)).value:d=(f=c.next(s.from)).value}return!1}function gn(e){var n=sr(e)?null:{s:0,n:e};return{next:function(r){for(var o=0<arguments.length;n;)switch(n.s){case 0:if(n.s=1,o)for(;n.n.l&&te(r,n.n.from)<0;)n={up:n,n:n.n.l,s:1};else for(;n.n.l;)n={up:n,n:n.n.l,s:1};case 1:if(n.s=2,!o||te(r,n.n.to)<=0)return{value:n.n,done:!1};case 2:if(n.n.r){n.s=3,n={up:n,n:n.n.r,s:0};continue}case 3:n=n.up}return{done:!0}}}}function fi(e){var n,r,o=(((n=e.r)===null||n===void 0?void 0:n.d)||0)-(((r=e.l)===null||r===void 0?void 0:r.d)||0),s=1<o?"r":o<-1?"l":"";s&&(n=s=="r"?"l":"r",r=u({},e),o=e[s],e.from=o.from,e.to=o.to,e[s]=o[s],r[s]=o[n],(e[n]=r).d=di(r)),e.d=di(e)}function di(r){var n=r.r,r=r.l;return(n?r?Math.max(n.d,r.d):n.d:r?r.d:0)+1}function vn(e,n){return P(n).forEach(function(r){e[r]?zt(e[r],n[r]):e[r]=(function o(s){var c,f,d={};for(c in s)T(s,c)&&(f=s[c],d[c]=!f||typeof f!="object"||Nn.has(f.constructor)?f:o(f));return d})(n[r])}),e}function ur(e,n){return e.all||n.all||Object.keys(e).some(function(r){return n[r]&&li(n[r],e[r])})}I(ve.prototype,((Pe={add:function(e){return zt(this,e),this},addKey:function(e){return Lt(this,e,e),this},addKeys:function(e){var n=this;return e.forEach(function(r){return Lt(n,r,r)}),this},hasKey:function(e){var n=gn(this).next(e).value;return n&&te(n.from,e)<=0&&0<=te(n.to,e)}})[Fe]=function(){return gn(this)},Pe));var ot={},cr={},lr=!1;function bn(e){vn(cr,e),lr||(lr=!0,setTimeout(function(){lr=!1,fr(cr,!(cr={}))},0))}function fr(e,n){n===void 0&&(n=!1);var r=new Set;if(e.all)for(var o=0,s=Object.values(ot);o<s.length;o++)hi(f=s[o],e,r,n);else for(var c in e){var f,d=/^idb\:\/\/(.*)\/(.*)\//.exec(c);d&&(c=d[1],d=d[2],(f=ot["idb://".concat(c,"/").concat(d)])&&hi(f,e,r,n))}r.forEach(function(p){return p()})}function hi(e,n,r,o){for(var s=[],c=0,f=Object.entries(e.queries.query);c<f.length;c++){for(var d=f[c],p=d[0],m=[],w=0,h=d[1];w<h.length;w++){var E=h[w];ur(n,E.obsSet)?E.subscribers.forEach(function(x){return r.add(x)}):o&&m.push(E)}o&&s.push([p,m])}if(o)for(var g=0,b=s;g<b.length;g++){var _=b[g],p=_[0],m=_[1];e.queries.query[p]=m}}function $o(e){var n=e._state,r=e._deps.indexedDB;if(n.isBeingOpened||e.idbdb)return n.dbReadyPromise.then(function(){return n.dbOpenError?ce(n.dbOpenError):e});n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var o=n.openCanceller,s=Math.round(10*e.verno),c=!1;function f(){if(n.openCanceller!==o)throw new H.DatabaseClosed("db.open() was cancelled")}function d(){return new L(function(E,g){if(f(),!r)throw new H.MissingAPI;var b=e.name,_=n.autoSchema||!s?r.open(b):r.open(b,s);if(!_)throw new H.MissingAPI;_.onerror=De(g),_.onblocked=ue(e._fireOnBlocked),_.onupgradeneeded=ue(function(x){var O;w=_.transaction,n.autoSchema&&!e._options.allowEmptyDB?(_.onerror=jt,w.abort(),_.result.close(),(O=r.deleteDatabase(b)).onsuccess=O.onerror=ue(function(){g(new H.NoSuchDatabase("Database ".concat(b," doesnt exist")))})):(w.onerror=De(g),x=x.oldVersion>Math.pow(2,62)?0:x.oldVersion,h=x<1,e.idbdb=_.result,c&&Lo(e,w),qo(e,x/10,w,g))},g),_.onsuccess=ue(function(){w=null;var x,O,S,C,R,N=e.idbdb=_.result,F=de(N.objectStoreNames);if(0<F.length)try{var K=N.transaction((C=F).length===1?C[0]:C,"readonly");if(n.autoSchema)O=N,S=K,(x=e).verno=O.version/10,S=x._dbSchema=yn(0,O,S),x._storeNames=de(O.objectStoreNames,0),hn(x,[x._allTables],P(S),S);else if(mn(e,e._dbSchema,K),((R=nr(yn(0,(R=e).idbdb,K),R._dbSchema)).add.length||R.change.some(function(j){return j.add.length||j.change.length}))&&!c)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),N.close(),s=N.version+1,c=!0,E(d());dn(e,K)}catch{}mt.push(e),N.onversionchange=ue(function(j){n.vcFired=!0,e.on("versionchange").fire(j)}),N.onclose=ue(function(){e.close({disableAutoOpen:!1})}),h&&(R=e._deps,K=b,N=R.indexedDB,R=R.IDBKeyRange,or(N)||K===an||ir(N,R).put({name:K}).catch(oe)),E()},g)}).catch(function(E){switch(E?.name){case"UnknownError":if(0<n.PR1398_maxLoop)return n.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),d();break;case"VersionError":if(0<s)return s=0,d()}return L.reject(E)})}var p,m=n.dbReadyResolve,w=null,h=!1;return L.race([o,(typeof navigator>"u"?L.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(E){function g(){return indexedDB.databases().finally(E)}p=setInterval(g,100),g()}).finally(function(){return clearInterval(p)}):Promise.resolve()).then(d)]).then(function(){return f(),n.onReadyBeingFired=[],L.resolve(ar(function(){return e.on.ready.fire(e.vip)})).then(function E(){if(0<n.onReadyBeingFired.length){var g=n.onReadyBeingFired.reduce(Mn,oe);return n.onReadyBeingFired=[],L.resolve(ar(function(){return g(e.vip)})).then(E)}})}).finally(function(){n.openCanceller===o&&(n.onReadyBeingFired=null,n.isBeingOpened=!1)}).catch(function(E){n.dbOpenError=E;try{w&&w.abort()}catch{}return o===n.openCanceller&&e._close(),ce(E)}).finally(function(){n.openComplete=!0,m()}).then(function(){var E;return h&&(E={},e.tables.forEach(function(g){g.schema.indexes.forEach(function(b){b.name&&(E["idb://".concat(e.name,"/").concat(g.name,"/").concat(b.name)]=new ve(-1/0,[[[]]]))}),E["idb://".concat(e.name,"/").concat(g.name,"/")]=E["idb://".concat(e.name,"/").concat(g.name,"/:dels")]=new ve(-1/0,[[[]]])}),Ue(Mt).fire(E),fr(E,!0)),e})}function dr(e){function n(c){return e.next(c)}var r=s(n),o=s(function(c){return e.throw(c)});function s(c){return function(p){var d=c(p),p=d.value;return d.done?p:p&&typeof p.then=="function"?p.then(r,o):v(p)?Promise.all(p).then(r,o):r(p)}}return s(n)()}function _n(e,n,r){for(var o=v(e)?e.slice():[e],s=0;s<r;++s)o.push(n);return o}var Wo={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return u(u({},e),{table:function(n){var r=e.table(n),o=r.schema,s={},c=[];function f(h,E,g){var b=qt(h),_=s[b]=s[b]||[],x=h==null?0:typeof h=="string"?1:h.length,O=0<E,O=u(u({},g),{name:O?"".concat(b,"(virtual-from:").concat(g.name,")"):g.name,lowLevelIndex:g,isVirtual:O,keyTail:E,keyLength:x,extractKey:er(h),unique:!O&&g.unique});return _.push(O),O.isPrimaryKey||c.push(O),1<x&&f(x===2?h[0]:h.slice(0,x-1),E+1,g),_.sort(function(S,C){return S.keyTail-C.keyTail}),O}n=f(o.primaryKey.keyPath,0,o.primaryKey),s[":id"]=[n];for(var d=0,p=o.indexes;d<p.length;d++){var m=p[d];f(m.keyPath,0,m)}function w(h){var E,g=h.query.index;return g.isVirtual?u(u({},h),{query:{index:g.lowLevelIndex,range:(E=h.query.range,g=g.keyTail,{type:E.type===1?2:E.type,lower:_n(E.lower,E.lowerOpen?e.MAX_KEY:e.MIN_KEY,g),lowerOpen:!0,upper:_n(E.upper,E.upperOpen?e.MIN_KEY:e.MAX_KEY,g),upperOpen:!0})}}):h}return u(u({},r),{schema:u(u({},o),{primaryKey:n,indexes:c,getIndexByKeyPath:function(h){return(h=s[qt(h)])&&h[0]}}),count:function(h){return r.count(w(h))},query:function(h){return r.query(w(h))},openCursor:function(h){var E=h.query.index,g=E.keyTail,b=E.isVirtual,_=E.keyLength;return b?r.openCursor(w(h)).then(function(O){return O&&x(O)}):r.openCursor(h);function x(O){return Object.create(O,{continue:{value:function(S){S!=null?O.continue(_n(S,h.reverse?e.MAX_KEY:e.MIN_KEY,g)):h.unique?O.continue(O.key.slice(0,_).concat(h.reverse?e.MIN_KEY:e.MAX_KEY,g)):O.continue()}},continuePrimaryKey:{value:function(S,C){O.continuePrimaryKey(_n(S,e.MAX_KEY,g),C)}},primaryKey:{get:function(){return O.primaryKey}},key:{get:function(){var S=O.key;return _===1?S[0]:S.slice(0,_)}},value:{get:function(){return O.value}}})}}})}})}};function hr(e,n,r,o){return r=r||{},o=o||"",P(e).forEach(function(s){var c,f,d;T(n,s)?(c=e[s],f=n[s],typeof c=="object"&&typeof f=="object"&&c&&f?(d=xe(c))!==xe(f)?r[o+s]=n[s]:d==="Object"?hr(c,f,r,o+s+"."):c!==f&&(r[o+s]=n[s]):c!==f&&(r[o+s]=n[s])):r[o+s]=void 0}),P(n).forEach(function(s){T(e,s)||(r[o+s]=n[s])}),r}function pr(e,n){return n.type==="delete"?n.keys:n.keys||n.values.map(e.extractKey)}var Uo={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return u(u({},e),{table:function(n){var r=e.table(n),o=r.schema.primaryKey;return u(u({},r),{mutate:function(s){var c=U.trans,f=c.table(n).hook,d=f.deleting,p=f.creating,m=f.updating;switch(s.type){case"add":if(p.fire===oe)break;return c._promise("readwrite",function(){return w(s)},!0);case"put":if(p.fire===oe&&m.fire===oe)break;return c._promise("readwrite",function(){return w(s)},!0);case"delete":if(d.fire===oe)break;return c._promise("readwrite",function(){return w(s)},!0);case"deleteRange":if(d.fire===oe)break;return c._promise("readwrite",function(){return(function h(E,g,b){return r.query({trans:E,values:!1,query:{index:o,range:g},limit:b}).then(function(_){var x=_.result;return w({type:"delete",keys:x,trans:E}).then(function(O){return 0<O.numFailures?Promise.reject(O.failures[0]):x.length<b?{failures:[],numFailures:0,lastResult:void 0}:h(E,u(u({},g),{lower:x[x.length-1],lowerOpen:!0}),b)})})})(s.trans,s.range,1e4)},!0)}return r.mutate(s);function w(h){var E,g,b,_=U.trans,x=h.keys||pr(o,h);if(!x)throw new Error("Keys missing");return(h=h.type==="add"||h.type==="put"?u(u({},h),{keys:x}):u({},h)).type!=="delete"&&(h.values=l([],h.values)),h.keys&&(h.keys=l([],h.keys)),E=r,b=x,((g=h).type==="add"?Promise.resolve([]):E.getMany({trans:g.trans,keys:b,cache:"immutable"})).then(function(O){var S=x.map(function(C,R){var N,F,K,j=O[R],q={onerror:null,onsuccess:null};return h.type==="delete"?d.fire.call(q,C,j,_):h.type==="add"||j===void 0?(N=p.fire.call(q,C,h.values[R],_),C==null&&N!=null&&(h.keys[R]=C=N,o.outbound||se(h.values[R],o.keyPath,C))):(N=hr(j,h.values[R]),(F=m.fire.call(q,N,C,j,_))&&(K=h.values[R],Object.keys(F).forEach(function(M){T(K,M)?K[M]=F[M]:se(K,M,F[M])}))),q});return r.mutate(h).then(function(C){for(var R=C.failures,N=C.results,F=C.numFailures,C=C.lastResult,K=0;K<x.length;++K){var j=(N||x)[K],q=S[K];j==null?q.onerror&&q.onerror(R[K]):q.onsuccess&&q.onsuccess(h.type==="put"&&O[K]?h.values[K]:j)}return{failures:R,results:N,numFailures:F,lastResult:C}}).catch(function(C){return S.forEach(function(R){return R.onerror&&R.onerror(C)}),Promise.reject(C)})})}}})}})}};function pi(e,n,r){try{if(!n||n.keys.length<e.length)return null;for(var o=[],s=0,c=0;s<n.keys.length&&c<e.length;++s)te(n.keys[s],e[c])===0&&(o.push(r?V(n.values[s]):n.values[s]),++c);return o.length===e.length?o:null}catch{return null}}var Vo={stack:"dbcore",level:-1,create:function(e){return{table:function(n){var r=e.table(n);return u(u({},r),{getMany:function(o){if(!o.cache)return r.getMany(o);var s=pi(o.keys,o.trans._cache,o.cache==="clone");return s?L.resolve(s):r.getMany(o).then(function(c){return o.trans._cache={keys:o.keys,values:o.cache==="clone"?V(c):c},c})},mutate:function(o){return o.type!=="add"&&(o.trans._cache=null),r.mutate(o)}})}}}};function yi(e,n){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!n.schema.primaryKey.outbound}function mi(e,n){switch(e){case"query":return n.values&&!n.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ho={stack:"dbcore",level:0,name:"Observability",create:function(e){var n=e.schema.name,r=new ve(e.MIN_KEY,e.MAX_KEY);return u(u({},e),{transaction:function(o,s,c){if(U.subscr&&s!=="readonly")throw new H.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(U.querier));return e.transaction(o,s,c)},table:function(o){var s=e.table(o),c=s.schema,f=c.primaryKey,h=c.indexes,d=f.extractKey,p=f.outbound,m=f.autoIncrement&&h.filter(function(g){return g.compound&&g.keyPath.includes(f.keyPath)}),w=u(u({},s),{mutate:function(g){function b(M){return M="idb://".concat(n,"/").concat(o,"/").concat(M),C[M]||(C[M]=new ve)}var _,x,O,S=g.trans,C=g.mutatedParts||(g.mutatedParts={}),R=b(""),N=b(":dels"),F=g.type,q=g.type==="deleteRange"?[g.range]:g.type==="delete"?[g.keys]:g.values.length<50?[pr(f,g).filter(function(M){return M}),g.values]:[],K=q[0],j=q[1],q=g.trans._cache;return v(K)?(R.addKeys(K),(q=F==="delete"||K.length===j.length?pi(K,q):null)||N.addKeys(K),(q||j)&&(_=b,x=q,O=j,c.indexes.forEach(function(M){var z=_(M.name||"");function X(ee){return ee!=null?M.extractKey(ee):null}function Q(ee){return M.multiEntry&&v(ee)?ee.forEach(function(Te){return z.addKey(Te)}):z.addKey(ee)}(x||O).forEach(function(ee,be){var Y=x&&X(x[be]),be=O&&X(O[be]);te(Y,be)!==0&&(Y!=null&&Q(Y),be!=null&&Q(be))})}))):K?(j={from:(j=K.lower)!==null&&j!==void 0?j:e.MIN_KEY,to:(j=K.upper)!==null&&j!==void 0?j:e.MAX_KEY},N.add(j),R.add(j)):(R.add(r),N.add(r),c.indexes.forEach(function(M){return b(M.name).add(r)})),s.mutate(g).then(function(M){return!K||g.type!=="add"&&g.type!=="put"||(R.addKeys(M.results),m&&m.forEach(function(z){for(var X=g.values.map(function(Y){return z.extractKey(Y)}),Q=z.keyPath.findIndex(function(Y){return Y===f.keyPath}),ee=0,Te=M.results.length;ee<Te;++ee)X[ee][Q]=M.results[ee];b(z.name).addKeys(X)})),S.mutatedParts=vn(S.mutatedParts||{},C),M})}}),h=function(b){var _=b.query,b=_.index,_=_.range;return[b,new ve((b=_.lower)!==null&&b!==void 0?b:e.MIN_KEY,(_=_.upper)!==null&&_!==void 0?_:e.MAX_KEY)]},E={get:function(g){return[f,new ve(g.key)]},getMany:function(g){return[f,new ve().addKeys(g.keys)]},count:h,query:h,openCursor:h};return P(E).forEach(function(g){w[g]=function(b){var _=U.subscr,x=!!_,O=yi(U,s)&&mi(g,b)?b.obsSet={}:_;if(x){var S=function(j){return j="idb://".concat(n,"/").concat(o,"/").concat(j),O[j]||(O[j]=new ve)},C=S(""),R=S(":dels"),_=E[g](b),x=_[0],_=_[1];if((g==="query"&&x.isPrimaryKey&&!b.values?R:S(x.name||"")).add(_),!x.isPrimaryKey){if(g!=="count"){var N=g==="query"&&p&&b.values&&s.query(u(u({},b),{values:!1}));return s[g].apply(this,arguments).then(function(j){if(g==="query"){if(p&&b.values)return N.then(function(X){return X=X.result,C.addKeys(X),j});var q=b.values?j.result.map(d):j.result;(b.values?C:R).addKeys(q)}else if(g==="openCursor"){var M=j,z=b.values;return M&&Object.create(M,{key:{get:function(){return R.addKey(M.primaryKey),M.key}},primaryKey:{get:function(){var X=M.primaryKey;return R.addKey(X),X}},value:{get:function(){return z&&C.addKey(M.primaryKey),M.value}}})}return j})}R.add(r)}}return s[g].apply(this,arguments)}}),w}})}};function gi(e,n,r){if(r.numFailures===0)return n;if(n.type==="deleteRange")return null;var o=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;return r.numFailures===o?null:(n=u({},n),v(n.keys)&&(n.keys=n.keys.filter(function(s,c){return!(c in r.failures)})),"values"in n&&v(n.values)&&(n.values=n.values.filter(function(s,c){return!(c in r.failures)})),n)}function yr(e,n){return r=e,((o=n).lower===void 0||(o.lowerOpen?0<te(r,o.lower):0<=te(r,o.lower)))&&(e=e,(n=n).upper===void 0||(n.upperOpen?te(e,n.upper)<0:te(e,n.upper)<=0));var r,o}function vi(e,n,E,o,s,c){if(!E||E.length===0)return e;var f=n.query.index,d=f.multiEntry,p=n.query.range,m=o.schema.primaryKey.extractKey,w=f.extractKey,h=(f.lowLevelIndex||f).extractKey,E=E.reduce(function(g,b){var _=g,x=[];if(b.type==="add"||b.type==="put")for(var O=new ve,S=b.values.length-1;0<=S;--S){var C,R=b.values[S],N=m(R);O.hasKey(N)||(C=w(R),(d&&v(C)?C.some(function(M){return yr(M,p)}):yr(C,p))&&(O.addKey(N),x.push(R)))}switch(b.type){case"add":var F=new ve().addKeys(n.values?g.map(function(z){return m(z)}):g),_=g.concat(n.values?x.filter(function(z){return z=m(z),!F.hasKey(z)&&(F.addKey(z),!0)}):x.map(function(z){return m(z)}).filter(function(z){return!F.hasKey(z)&&(F.addKey(z),!0)}));break;case"put":var K=new ve().addKeys(b.values.map(function(z){return m(z)}));_=g.filter(function(z){return!K.hasKey(n.values?m(z):z)}).concat(n.values?x:x.map(function(z){return m(z)}));break;case"delete":var j=new ve().addKeys(b.keys);_=g.filter(function(z){return!j.hasKey(n.values?m(z):z)});break;case"deleteRange":var q=b.range;_=g.filter(function(z){return!yr(m(z),q)})}return _},e);return E===e?e:(E.sort(function(g,b){return te(h(g),h(b))||te(m(g),m(b))}),n.limit&&n.limit<1/0&&(E.length>n.limit?E.length=n.limit:e.length===n.limit&&E.length<n.limit&&(s.dirty=!0)),c?Object.freeze(E):E)}function bi(e,n){return te(e.lower,n.lower)===0&&te(e.upper,n.upper)===0&&!!e.lowerOpen==!!n.lowerOpen&&!!e.upperOpen==!!n.upperOpen}function Go(e,n){return(function(r,o,s,c){if(r===void 0)return o!==void 0?-1:0;if(o===void 0)return 1;if((o=te(r,o))===0){if(s&&c)return 0;if(s)return 1;if(c)return-1}return o})(e.lower,n.lower,e.lowerOpen,n.lowerOpen)<=0&&0<=(function(r,o,s,c){if(r===void 0)return o!==void 0?1:0;if(o===void 0)return-1;if((o=te(r,o))===0){if(s&&c)return 0;if(s)return-1;if(c)return 1}return o})(e.upper,n.upper,e.upperOpen,n.upperOpen)}function Yo(e,n,r,o){e.subscribers.add(r),o.addEventListener("abort",function(){var s,c;e.subscribers.delete(r),e.subscribers.size===0&&(s=e,c=n,setTimeout(function(){s.subscribers.size===0&&Be(c,s)},3e3))})}var Xo={stack:"dbcore",level:0,name:"Cache",create:function(e){var n=e.schema.name;return u(u({},e),{transaction:function(r,o,s){var c,f,d=e.transaction(r,o,s);return o==="readwrite"&&(f=(c=new AbortController).signal,s=function(p){return function(){if(c.abort(),o==="readwrite"){for(var m=new Set,w=0,h=r;w<h.length;w++){var E=h[w],g=ot["idb://".concat(n,"/").concat(E)];if(g){var b=e.table(E),_=g.optimisticOps.filter(function(z){return z.trans===d});if(d._explicit&&p&&d.mutatedParts)for(var x=0,O=Object.values(g.queries.query);x<O.length;x++)for(var S=0,C=(F=O[x]).slice();S<C.length;S++)ur((K=C[S]).obsSet,d.mutatedParts)&&(Be(F,K),K.subscribers.forEach(function(z){return m.add(z)}));else if(0<_.length){g.optimisticOps=g.optimisticOps.filter(function(z){return z.trans!==d});for(var R=0,N=Object.values(g.queries.query);R<N.length;R++)for(var F,K,j,q=0,M=(F=N[R]).slice();q<M.length;q++)(K=M[q]).res!=null&&d.mutatedParts&&(p&&!K.dirty?(j=Object.isFrozen(K.res),j=vi(K.res,K.req,_,b,K,j),K.dirty?(Be(F,K),K.subscribers.forEach(function(z){return m.add(z)})):j!==K.res&&(K.res=j,K.promise=L.resolve({result:j}))):(K.dirty&&Be(F,K),K.subscribers.forEach(function(z){return m.add(z)})))}}}m.forEach(function(z){return z()})}}},d.addEventListener("abort",s(!1),{signal:f}),d.addEventListener("error",s(!1),{signal:f}),d.addEventListener("complete",s(!0),{signal:f})),d},table:function(r){var o=e.table(r),s=o.schema.primaryKey;return u(u({},o),{mutate:function(c){var f=U.trans;if(s.outbound||f.db._options.cache==="disabled"||f.explicit||f.idbtrans.mode!=="readwrite")return o.mutate(c);var d=ot["idb://".concat(n,"/").concat(r)];return d?(f=o.mutate(c),c.type!=="add"&&c.type!=="put"||!(50<=c.values.length||pr(s,c).some(function(p){return p==null}))?(d.optimisticOps.push(c),c.mutatedParts&&bn(c.mutatedParts),f.then(function(p){0<p.numFailures&&(Be(d.optimisticOps,c),(p=gi(0,c,p))&&d.optimisticOps.push(p),c.mutatedParts&&bn(c.mutatedParts))}),f.catch(function(){Be(d.optimisticOps,c),c.mutatedParts&&bn(c.mutatedParts)})):f.then(function(p){var m=gi(0,u(u({},c),{values:c.values.map(function(w,h){var E;return p.failures[h]?w:(w=(E=s.keyPath)!==null&&E!==void 0&&E.includes(".")?V(w):u({},w),se(w,s.keyPath,p.results[h]),w)})}),p);d.optimisticOps.push(m),queueMicrotask(function(){return c.mutatedParts&&bn(c.mutatedParts)})}),f):o.mutate(c)},query:function(c){if(!yi(U,o)||!mi("query",c))return o.query(c);var f=((m=U.trans)===null||m===void 0?void 0:m.db._options.cache)==="immutable",h=U,d=h.requery,p=h.signal,m=(function(b,_,x,O){var S=ot["idb://".concat(b,"/").concat(_)];if(!S)return[];if(!(_=S.queries[x]))return[null,!1,S,null];var C=_[(O.query?O.query.index.name:null)||""];if(!C)return[null,!1,S,null];switch(x){case"query":var R=C.find(function(N){return N.req.limit===O.limit&&N.req.values===O.values&&bi(N.req.query.range,O.query.range)});return R?[R,!0,S,C]:[C.find(function(N){return("limit"in N.req?N.req.limit:1/0)>=O.limit&&(!O.values||N.req.values)&&Go(N.req.query.range,O.query.range)}),!1,S,C];case"count":return R=C.find(function(N){return bi(N.req.query.range,O.query.range)}),[R,!!R,S,C]}})(n,r,"query",c),w=m[0],h=m[1],E=m[2],g=m[3];return w&&h?w.obsSet=c.obsSet:(h=o.query(c).then(function(b){var _=b.result;if(w&&(w.res=_),f){for(var x=0,O=_.length;x<O;++x)Object.freeze(_[x]);Object.freeze(_)}else b.result=V(_);return b}).catch(function(b){return g&&w&&Be(g,w),Promise.reject(b)}),w={obsSet:c.obsSet,promise:h,subscribers:new Set,type:"query",req:c,dirty:!1},g?g.push(w):(g=[w],(E=E||(ot["idb://".concat(n,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[c.query.index.name||""]=g)),Yo(w,g,d,p),w.promise.then(function(b){return{result:vi(b.result,c,E?.optimisticOps,o,w,f)}})}})}})}};function wn(e,n){return new Proxy(e,{get:function(r,o,s){return o==="db"?n:Reflect.get(r,o,s)}})}var Ne=(le.prototype.version=function(e){if(isNaN(e)||e<.1)throw new H.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new H.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var n=this._versions,r=n.filter(function(o){return o._cfg.version===e})[0];return r||(r=new this.Version(e),n.push(r),n.sort(Fo),r.stores({}),this._state.autoSchema=!1,r)},le.prototype._whenReady=function(e){var n=this;return this.idbdb&&(this._state.openComplete||U.letThrough||this._vip)?e():new L(function(r,o){if(n._state.openComplete)return o(new H.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return void o(new H.DatabaseClosed);n.open().catch(oe)}n._state.dbReadyPromise.then(r,o)}).then(e)},le.prototype.use=function(e){var n=e.stack,r=e.create,o=e.level,s=e.name;return s&&this.unuse({stack:n,name:s}),e=this._middlewares[n]||(this._middlewares[n]=[]),e.push({stack:n,create:r,level:o??10,name:s}),e.sort(function(c,f){return c.level-f.level}),this},le.prototype.unuse=function(e){var n=e.stack,r=e.name,o=e.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(s){return o?s.create!==o:!!r&&s.name!==r})),this},le.prototype.open=function(){var e=this;return nt(qe,function(){return $o(e)})},le.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,n=mt.indexOf(this);if(0<=n&&mt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new L(function(r){e.dbReadyResolve=r}),e.openCanceller=new L(function(r,o){e.cancelOpen=o}))},le.prototype.close=function(r){var n=(r===void 0?{disableAutoOpen:!0}:r).disableAutoOpen,r=this._state;n?(r.isBeingOpened&&r.cancelOpen(new H.DatabaseClosed),this._close(),r.autoOpen=!1,r.dbOpenError=new H.DatabaseClosed):(this._close(),r.autoOpen=this._options.autoOpen||r.isBeingOpened,r.openComplete=!1,r.dbOpenError=null)},le.prototype.delete=function(e){var n=this;e===void 0&&(e={disableAutoOpen:!0});var r=0<arguments.length&&typeof arguments[0]!="object",o=this._state;return new L(function(s,c){function f(){n.close(e);var d=n._deps.indexedDB.deleteDatabase(n.name);d.onsuccess=ue(function(){var p,m,w;p=n._deps,m=n.name,w=p.indexedDB,p=p.IDBKeyRange,or(w)||m===an||ir(w,p).delete(m).catch(oe),s()}),d.onerror=De(c),d.onblocked=n._fireOnBlocked}if(r)throw new H.InvalidArgument("Invalid closeOptions argument to db.delete()");o.isBeingOpened?o.dbReadyPromise.then(f):f()})},le.prototype.backendDB=function(){return this.idbdb},le.prototype.isOpen=function(){return this.idbdb!==null},le.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},le.prototype.hasFailed=function(){return this._state.dbOpenError!==null},le.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(le.prototype,"tables",{get:function(){var e=this;return P(this._allTables).map(function(n){return e._allTables[n]})},enumerable:!1,configurable:!0}),le.prototype.transaction=function(){var e=(function(n,r,o){var s=arguments.length;if(s<2)throw new H.InvalidArgument("Too few arguments");for(var c=new Array(s-1);--s;)c[s-1]=arguments[s];return o=c.pop(),[n,Pt(c),o]}).apply(this,arguments);return this._transaction.apply(this,e)},le.prototype._transaction=function(e,n,r){var o=this,s=U.trans;s&&s.db===this&&e.indexOf("!")===-1||(s=null);var c,f,d=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(f=n.map(function(m){if(m=m instanceof o.Table?m.name:m,typeof m!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return m}),e=="r"||e===Hn)c=Hn;else{if(e!="rw"&&e!=Gn)throw new H.InvalidArgument("Invalid transaction mode: "+e);c=Gn}if(s){if(s.mode===Hn&&c===Gn){if(!d)throw new H.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&f.forEach(function(m){if(s&&s.storeNames.indexOf(m)===-1){if(!d)throw new H.SubTransaction("Table "+m+" not included in parent transaction.");s=null}}),d&&s&&!s.active&&(s=null)}}catch(m){return s?s._promise(null,function(w,h){h(m)}):ce(m)}var p=(function m(w,h,E,g,b){return L.resolve().then(function(){var _=U.transless||U,x=w._createTransaction(h,E,w._dbSchema,g);if(x.explicit=!0,_={trans:x,transless:_},g)x.idbtrans=g.idbtrans;else try{x.create(),x.idbtrans._explicit=!0,w._state.PR1398_maxLoop=3}catch(C){return C.name===jn.InvalidState&&w.isOpen()&&0<--w._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),w.close({disableAutoOpen:!1}),w.open().then(function(){return m(w,h,E,null,b)})):ce(C)}var O,S=Se(b);return S&&yt(),_=L.follow(function(){var C;(O=b.call(x,x))&&(S?(C=ze.bind(null,null),O.then(C,C)):typeof O.next=="function"&&typeof O.throw=="function"&&(O=dr(O)))},_),(O&&typeof O.then=="function"?L.resolve(O).then(function(C){return x.active?C:ce(new H.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):_.then(function(){return O})).then(function(C){return g&&x._resolve(),x._completion.then(function(){return C})}).catch(function(C){return x._reject(C),ce(C)})})}).bind(null,this,c,f,s,r);return s?s._promise(c,p,"lock"):U.trans?nt(U.transless,function(){return o._whenReady(p)}):this._whenReady(p)},le.prototype.table=function(e){if(!T(this._allTables,e))throw new H.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},le);function le(e,n){var r=this;this._middlewares={},this.verno=0;var o=le.dependencies;this._options=n=u({addons:le.addons,autoOpen:!0,indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},o=n.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var s,c,f,d,p,m={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:oe,dbReadyPromise:null,cancelOpen:oe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};m.dbReadyPromise=new L(function(h){m.dbReadyResolve=h}),m.openCanceller=new L(function(h,E){m.cancelOpen=E}),this._state=m,this.name=e,this.on=Kt(this,"populate","blocked","versionchange","close",{ready:[Mn,oe]}),this.once=function(h,E){var g=function(){for(var b=[],_=0;_<arguments.length;_++)b[_]=arguments[_];r.on(h).unsubscribe(g),E.apply(r,b)};return r.on(h,g)},this.on.ready.subscribe=ne(this.on.ready.subscribe,function(h){return function(E,g){le.vip(function(){var b,_=r._state;_.openComplete?(_.dbOpenError||L.resolve().then(E),g&&h(E)):_.onReadyBeingFired?(_.onReadyBeingFired.push(E),g&&h(E)):(h(E),b=r,g||h(function x(){b.on.ready.unsubscribe(E),b.on.ready.unsubscribe(x)}))})}}),this.Collection=(s=this,Nt(Do.prototype,function(O,x){this.db=s;var g=Gr,b=null;if(x)try{g=x()}catch(S){b=S}var _=O._ctx,x=_.table,O=x.hook.reading.fire;this._ctx={table:x,index:_.index,isPrimKey:!_.index||x.schema.primKey.keyPath&&_.index===x.schema.primKey.name,range:g,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:b,or:_.or,valueMapper:O!==At?O:null}})),this.Table=(c=this,Nt(ei.prototype,function(h,E,g){this.db=c,this._tx=g,this.name=h,this.schema=E,this.hook=c._allTables[h]?c._allTables[h].hook:Kt(null,{creating:[Eo,oe],reading:[xo,At],updating:[Oo,oe],deleting:[ko,oe]})})),this.Transaction=(f=this,Nt(Ko.prototype,function(h,E,g,b,_){var x=this;h!=="readonly"&&E.forEach(function(O){O=(O=g[O])===null||O===void 0?void 0:O.yProps,O&&(E=E.concat(O.map(function(S){return S.updatesTable})))}),this.db=f,this.mode=h,this.storeNames=E,this.schema=g,this.chromeTransactionDurability=b,this.idbtrans=null,this.on=Kt(this,"complete","error","abort"),this.parent=_||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new L(function(O,S){x._resolve=O,x._reject=S}),this._completion.then(function(){x.active=!1,x.on.complete.fire()},function(O){var S=x.active;return x.active=!1,x.on.error.fire(O),x.parent?x.parent._reject(O):S&&x.idbtrans&&x.idbtrans.abort(),ce(O)})})),this.Version=(d=this,Nt(zo.prototype,function(h){this.db=d,this._cfg={version:h,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(p=this,Nt(oi.prototype,function(h,E,g){if(this.db=p,this._ctx={table:h,index:E===":id"?null:E,or:g},this._cmp=this._ascending=te,this._descending=function(b,_){return te(_,b)},this._max=function(b,_){return 0<te(b,_)?b:_},this._min=function(b,_){return te(b,_)<0?b:_},this._IDBKeyRange=p._deps.IDBKeyRange,!this._IDBKeyRange)throw new H.MissingAPI})),this.on("versionchange",function(h){0<h.newVersion?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close({disableAutoOpen:!1})}),this.on("blocked",function(h){!h.newVersion||h.newVersion<h.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(h.oldVersion/10))}),this._maxKey=Ft(n.IDBKeyRange),this._createTransaction=function(h,E,g,b){return new r.Transaction(h,E,g,r._options.chromeTransactionDurability,b)},this._fireOnBlocked=function(h){r.on("blocked").fire(h),mt.filter(function(E){return E.name===r.name&&E!==r&&!E._state.vcFired}).map(function(E){return E.on("versionchange").fire(h)})},this.use(Vo),this.use(Xo),this.use(Ho),this.use(Wo),this.use(Uo);var w=new Proxy(this,{get:function(h,E,g){if(E==="_vip")return!0;if(E==="table")return function(_){return wn(r.table(_),w)};var b=Reflect.get(h,E,g);return b instanceof ei?wn(b,w):E==="tables"?b.map(function(_){return wn(_,w)}):E==="_createTransaction"?function(){return wn(b.apply(this,arguments),w)}:b}});this.vip=w,o.forEach(function(h){return h(r)})}var xn,Pe=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Qo=(mr.prototype.subscribe=function(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})},mr.prototype[Pe]=function(){return this},mr);function mr(e){this._subscribe=e}try{xn={indexedDB:y.indexedDB||y.mozIndexedDB||y.webkitIndexedDB||y.msIndexedDB,IDBKeyRange:y.IDBKeyRange||y.webkitIDBKeyRange}}catch{xn={indexedDB:null,IDBKeyRange:null}}function _i(e){var n,r=!1,o=new Qo(function(s){var c=Se(e),f,d=!1,p={},m={},w={get closed(){return d},unsubscribe:function(){d||(d=!0,f&&f.abort(),h&&Ue.storagemutated.unsubscribe(g))}};s.start&&s.start(w);var h=!1,E=function(){return Vn(b)},g=function(_){vn(p,_),ur(m,p)&&E()},b=function(){var _,x,O;!d&&xn.indexedDB&&(p={},_={},f&&f.abort(),f=new AbortController,O=(function(S){var C=ht();try{c&&yt();var R=Le(e,S);return R=c?R.finally(ze):R}finally{C&&pt()}})(x={subscr:_,signal:f.signal,requery:E,querier:e,trans:null}),Promise.resolve(O).then(function(S){r=!0,n=S,d||x.signal.aborted||(p={},(function(C){for(var R in C)if(T(C,R))return;return 1})(m=_)||h||(Ue(Mt,g),h=!0),Vn(function(){return!d&&s.next&&s.next(S)}))},function(S){r=!1,["DatabaseClosedError","AbortError"].includes(S?.name)||d||Vn(function(){d||s.error&&s.error(S)})}))};return setTimeout(E,0),w});return o.hasValue=function(){return r},o.getValue=function(){return n},o}var at=Ne;function gr(e){var n=Ve;try{Ve=!0,Ue.storagemutated.fire(e),fr(e,!0)}finally{Ve=n}}I(at,u(u({},Xt),{delete:function(e){return new at(e,{addons:[]}).delete()},exists:function(e){return new at(e,{addons:[]}).open().then(function(n){return n.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return n=at.dependencies,r=n.indexedDB,n=n.IDBKeyRange,(or(r)?Promise.resolve(r.databases()).then(function(o){return o.map(function(s){return s.name}).filter(function(s){return s!==an})}):ir(r,n).toCollection().primaryKeys()).then(e)}catch{return ce(new H.MissingAPI)}var n,r},defineClass:function(){return function(e){B(this,e)}},ignoreTransaction:function(e){return U.trans?nt(U.transless,e):e()},vip:ar,async:function(e){return function(){try{var n=dr(e.apply(this,arguments));return n&&typeof n.then=="function"?n:L.resolve(n)}catch(r){return ce(r)}}},spawn:function(e,n,r){try{var o=dr(e.apply(r,n||[]));return o&&typeof o.then=="function"?o:L.resolve(o)}catch(s){return ce(s)}},currentTransaction:{get:function(){return U.trans||null}},waitFor:function(e,n){return n=L.resolve(typeof e=="function"?at.ignoreTransaction(e):e).timeout(n||6e4),U.trans?U.trans.waitFor(n):n},Promise:L,debug:{get:function(){return Ce},set:function(e){Lr(e)}},derive:W,extend:B,props:I,override:ne,Events:Kt,on:Ue,liveQuery:_i,extendObservabilitySet:vn,getByKeyPath:pe,setByKeyPath:se,delByKeyPath:function(e,n){typeof n=="string"?se(e,n,void 0):"length"in n&&[].map.call(n,function(r){se(e,r,void 0)})},shallowClone:lt,deepClone:V,getObjectDiff:hr,cmp:te,asap:he,minKey:-1/0,addons:[],connections:mt,errnames:jn,dependencies:xn,cache:ot,semVer:"4.2.1",version:"4.2.1".split(".").map(function(e){return parseInt(e)}).reduce(function(e,n,r){return e+n/Math.pow(10,2*r)})})),at.maxKey=Ft(at.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ue(Mt,function(e){Ve||(e=new CustomEvent(Qn,{detail:e}),Ve=!0,dispatchEvent(e),Ve=!1)}),addEventListener(Qn,function(e){e=e.detail,Ve||gr(e)}));var _t,Ve=!1,wi=function(){};return typeof BroadcastChannel<"u"&&((wi=function(){(_t=new BroadcastChannel(Qn)).onmessage=function(e){return e.data&&gr(e.data)}})(),typeof _t.unref=="function"&&_t.unref(),Ue(Mt,function(e){Ve||_t.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Ne.disableBfCache&&e.persisted){Ce&&console.debug("Dexie: handling persisted pagehide"),_t?.close();for(var n=0,r=mt;n<r.length;n++)r[n].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Ne.disableBfCache&&e.persisted&&(Ce&&console.debug("Dexie: handling persisted pageshow"),wi(),gr({all:new ve(-1/0,[[]])}))})),L.rejectionMapper=function(e,n){return!e||e instanceof ft||e instanceof TypeError||e instanceof SyntaxError||!e.name||!qr[e.name]?e:(n=new qr[e.name](n||e.message,e),"stack"in e&&G(n,"stack",{get:function(){return this.inner.stack}}),n)},Lr(Ce),u(Ne,Object.freeze({__proto__:null,Dexie:Ne,liveQuery:_i,Entity:Yr,cmp:te,PropModification:Bt,replacePrefix:function(e,n){return new Bt({replacePrefix:[e,n]})},add:function(e){return new Bt({add:e})},remove:function(e){return new Bt({remove:e})},default:Ne,RangeSet:ve,mergeRanges:zt,rangesOverlap:li}),{default:Ne}),Ne})})(In)),In.exports}var sa=aa();const Cr=Ji(sa),Ii=Symbol.for("Dexie"),Dn=globalThis[Ii]||(globalThis[Ii]=Cr);if(Cr.semVer!==Dn.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Cr.semVer} and ${Dn.semVer}`);const{liveQuery:Xs,mergeRanges:Qs,rangesOverlap:Js,RangeSet:Zs,cmp:eu,Entity:tu,PropModification:nu,replacePrefix:ru,add:iu,remove:ou,DexieYProvider:au}=Dn,ua="dexie_kv_db";let Ae=Vt(void 0),$t=Vt(!1);const Er={async init_db(){if(ge(Ae)&&ge($t))return ge(Ae);try{return Me(Ae,new Dn(ua),!0),ge(Ae).version(1).stores({items:"++id, &only_key, any_type_value, update_time, remark"}),await ge(Ae).open(),Me($t,!0),ge(Ae)}catch(t){throw console.error("Êï∞ÊçÆÂ∫ìÂàùÂßãÂåñÂ§±Ë¥•:",t),t}},async ensureDB(){return!ge(Ae)||!ge($t)?await this.init_db():ge(Ae)},get_time_s_date(t,i=""){let a;i?a=new Date(typeof i=="number"?i:parseInt(i,10)):a=new Date,isNaN(a.getTime())&&(a=new Date);let u=a.getSeconds(),l=a.getMinutes(),y=a.getHours(),P=a.getDate(),v=a.getMonth()+1,B=a.getFullYear(),A=["Âë®Êó•","Âë®‰∏Ä","Âë®‰∫å","Âë®‰∏â","Âë®Âõõ","Âë®‰∫î","Âë®ÂÖ≠"][a.getDay()];u=u<10?"0"+u:u,l=l<10?"0"+l:l,y=y<10?"0"+y:y,P=P<10?"0"+P:P,v=v<10?"0"+v:v;let k=t;return k=k.replaceAll("Y",B),k=k.replaceAll("m",v),k=k.replaceAll("d",P),k=k.replaceAll("H",y),k=k.replaceAll("i",l),k=k.replaceAll("s",u),k=k.replaceAll("W",A),k*1},async test_db(){let t=this;try{let i=[{only_key:"test",any_type_value:{test:2025},update_time:t.get_time_s_date("YmdHis"),remark:"ÊµãËØï"}];const a=await this.update_db_data(i);return console.log("ÊµãËØïÊï∞ÊçÆÊèíÂÖ•ÊàêÂäü, IDs:",a),a}catch(i){return console.error("ÊµãËØïÂ§±Ë¥•:",i),[]}},async update_db_data(t=[]){let i=this;if(!Array.isArray(t)||t.length===0)return console.warn("Ë¶ÅÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÊ†ºÂºè‰∏çÊ≠£Á°ÆÊàñ‰∏∫Á©∫"),[];try{const a=await this.ensureDB(),u=[];return await a.transaction("rw",a.items,async()=>{for(const l of t){if(!l.only_key||l.only_key.indexOf("%")!==-1||l.only_key.indexOf("&")!==-1||l.only_key.indexOf("^")!==-1||l.only_key.indexOf("$")!==-1||l.only_key.indexOf("!")!==-1){console.warn("only_keyÁº∫Â§±ÊàñÂê´ÊúâÈùûÊ≥ïÂ≠óÁ¨¶, Ë∑≥Ëøá:",l);continue}const y=await a.items.where("only_key").equals(l.only_key).first(),P=i.get_time_s_date("YmdHis");if(y)await a.items.update(y.id,{any_type_value:l.any_type_value,update_time:P,remark:l.remark!==void 0?l.remark:y.remark}),u.push(y.id);else{const v={only_key:l.only_key,any_type_value:l.any_type_value,update_time:l.update_time||P,remark:l.remark||""},B=await a.items.add(v);u.push(B)}}}),u}catch(a){return console.error("Êõ¥Êñ∞Êï∞ÊçÆÂ§±Ë¥•:",a),[]}},async get_db_data(t="test"){if(t.indexOf("%")!==-1||t.indexOf("&")!==-1||t.indexOf("^")!==-1||t.indexOf("$")!==-1||t.indexOf("!")!==-1)return console.warn("only_keyÂê´ÊúâÈùûÊ≥ïÂ≠óÁ¨¶:",t),null;try{const a=await(await this.ensureDB()).items.where("only_key").equals(t).toArray();return a.length>0?a[0]:null}catch(i){return console.error("Êü•ËØ¢Êï∞ÊçÆÂ§±Ë¥•:",i),null}},async get_has_prefix_key_db_datas(t="test"){if(t.indexOf("%")!==-1||t.indexOf("&")!==-1||t.indexOf("^")!==-1||t.indexOf("$")!==-1||t.indexOf("!")!==-1)return console.warn("only_keyÂê´ÊúâÈùûÊ≥ïÂ≠óÁ¨¶:",t),[];try{return await(await this.ensureDB()).items.where("only_key").startsWith(t).toArray()}catch(i){return console.error("Êü•ËØ¢ÂâçÁºÄÊï∞ÊçÆÂ§±Ë¥•:",i),[]}},async get_contains_key_db_datas(t=""){if(t.indexOf("%")!==-1||t.indexOf("&")!==-1||t.indexOf("^")!==-1||t.indexOf("$")!==-1||t.indexOf("!")!==-1)return console.warn("only_keyÂê´ÊúâÈùûÊ≥ïÂ≠óÁ¨¶:",t),[];try{return(await(await this.ensureDB()).items.toArray()).filter(u=>u.only_key&&u.only_key.includes(t))}catch(i){return console.error("Êü•ËØ¢ÂåÖÂê´Â≠óÁ¨¶ÁöÑÊï∞ÊçÆÂ§±Ë¥•:",i),[]}},async del_db_data(t="test"){if(t.indexOf("%")!==-1||t.indexOf("&")!==-1||t.indexOf("^")!==-1||t.indexOf("$")!==-1||t.indexOf("!")!==-1)return console.warn("only_keyÂê´ÊúâÈùûÊ≥ïÂ≠óÁ¨¶:",t),!1;try{return await(await this.ensureDB()).items.where("only_key").equals(t).delete()>0}catch(i){return console.error("Âà†Èô§Êï∞ÊçÆÂ§±Ë¥•:",i),!1}},async del_timeout_db_datas(t,i){if(!t||!i)return console.warn("ËØ∑Êèê‰æõÊúâÊïàÁöÑÊó∂Èó¥ËåÉÂõ¥"),0;try{const a=await this.ensureDB(),u=Number(t),l=Number(i);return isNaN(u)||isNaN(l)?(console.warn("Êó∂Èó¥ÂèÇÊï∞Êó†Êïà"),0):await a.items.where("update_time").between(u,l).delete()}catch(a){return console.error("Âà†Èô§Êó∂Èó¥ÊÆµÊï∞ÊçÆÂ§±Ë¥•:",a),0}},async del_has_prefix_key_db_datas(t="test"){if(t.indexOf("%")!==-1||t.indexOf("&")!==-1||t.indexOf("^")!==-1||t.indexOf("$")!==-1||t.indexOf("!")!==-1)return console.warn("only_keyÂê´ÊúâÈùûÊ≥ïÂ≠óÁ¨¶:",t),0;try{return await(await this.ensureDB()).items.where("only_key").startsWith(t).delete()}catch(i){return console.error("Âà†Èô§ÂâçÁºÄÊï∞ÊçÆÂ§±Ë¥•:",i),0}},async get_all_db_data(){try{return await(await this.ensureDB()).items.toArray()}catch(t){return console.error("Ëé∑ÂèñÊâÄÊúâÊï∞ÊçÆÂ§±Ë¥•:",t),[]}},async get_db_data_count(){try{return await(await this.ensureDB()).items.count()}catch(t){return console.error("ÁªüËÆ°Êï∞ÊçÆÊï∞ÈáèÂ§±Ë¥•:",t),0}},async del_many_db_data(t=[]){try{const i=await this.ensureDB();let a=0;return await i.transaction("rw",i.items,async()=>{for(const u of t){if(u.indexOf("%")!==-1||u.indexOf("&")!==-1||u.indexOf("^")!==-1||u.indexOf("$")!==-1||u.indexOf("!")!==-1){console.warn("only_keyÂê´ÊúâÈùûÊ≥ïÂ≠óÁ¨¶:",u);continue}const l=await i.items.where("only_key").equals(u).delete();a+=l}}),a}catch(i){return console.error("ÊâπÈáèÂà†Èô§Êï∞ÊçÆÂ§±Ë¥•:",i),0}},async close_db(){if(ge(Ae)&&ge($t))try{await ge(Ae).close(),Me(Ae,null),Me($t,!1)}catch(t){console.error("ÂÖ≥Èó≠Êï∞ÊçÆÂ∫ìÂ§±Ë¥•:",t)}}},On=Ht({alert_show:"hide",alert_msg:""}),Tn=Ht({loading_show:"hide",loading_msg:""});var ca=Object.defineProperty,Zi=t=>{throw TypeError(t)},la=(t,i,a)=>i in t?ca(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a,He=(t,i,a)=>la(t,typeof i!="symbol"?i+"":i,a),fa=(t,i,a)=>i.has(t)||Zi("Cannot "+a),Ci=(t,i,a)=>(fa(t,i,"read from private field"),i.get(t)),da=(t,i,a)=>i.has(t)?Zi("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(t):i.set(t,a);function su(t){return t==null?[]:Array.isArray(t)?t:[t]}var Di=t=>t?.constructor.name==="Array",ha=(t,i)=>{if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(!eo(t[a],i[a]))return!1;return!0},eo=(t,i)=>{if(Object.is(t,i))return!0;if(t==null&&i!=null||t!=null&&i==null)return!1;if(typeof t?.isEqual=="function"&&typeof i?.isEqual=="function")return t.isEqual(i);if(typeof t=="function"&&typeof i=="function")return t.toString()===i.toString();if(Di(t)&&Di(i))return ha(Array.from(t),Array.from(i));if(typeof t!="object"||typeof i!="object")return!1;const a=Object.keys(i??Object.create(null)),u=a.length;for(let l=0;l<u;l++)if(!Reflect.has(t,a[l]))return!1;for(let l=0;l<u;l++){const y=a[l];if(!eo(t[y],i[y]))return!1}return!0},pa=t=>t!=null&&typeof t=="object",kr=t=>typeof t=="string",to=t=>typeof t=="function",ya=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),ma=t=>Object.prototype.toString.call(t),no=Function.prototype.toString,ga=no.call(Object),va=t=>{if(!pa(t)||ma(t)!="[object Object]"||wa(t))return!1;const i=Object.getPrototypeOf(t);if(i===null)return!0;const a=ya(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&no.call(a)==ga},ba=t=>typeof t=="object"&&t!==null&&"$$typeof"in t&&"props"in t,_a=t=>typeof t=="object"&&t!==null&&"__v_isVNode"in t,wa=t=>ba(t)||_a(t),Sn=(t,...i)=>(typeof t=="function"?t(...i):t)??void 0,uu=t=>t(),Dr=(...t)=>(...i)=>{t.forEach(function(a){a?.(...i)})},ro=(()=>{let t=0;return()=>(t++,t.toString(36))})();function io(t){if(!va(t)||t===void 0)return t;const i=Reflect.ownKeys(t).filter(u=>typeof u=="string"),a={};for(const u of i){const l=t[u];l!==void 0&&(a[u]=io(l))}return a}function xa(t,i){const a={},u={},l=new Set(i),y=Reflect.ownKeys(t);for(const P of y)l.has(P)?u[P]=t[P]:a[P]=t[P];return[u,a]}var cu=t=>function(a){return xa(a,t)},Pn=()=>performance.now(),Cn,Ea=class{constructor(t){this.onTick=t,He(this,"frameId",null),He(this,"pausedAtMs",null),He(this,"context"),He(this,"cancelFrame",()=>{this.frameId!==null&&(cancelAnimationFrame(this.frameId),this.frameId=null)}),He(this,"setStartMs",i=>{this.context.startMs=i}),He(this,"start",()=>{if(this.frameId!==null)return;const i=Pn();this.pausedAtMs!==null?(this.context.startMs+=i-this.pausedAtMs,this.pausedAtMs=null):this.context.startMs=i,this.frameId=requestAnimationFrame(Ci(this,Cn))}),He(this,"pause",()=>{this.frameId!==null&&(this.cancelFrame(),this.pausedAtMs=Pn())}),He(this,"stop",()=>{this.frameId!==null&&(this.cancelFrame(),this.pausedAtMs=null)}),da(this,Cn,i=>{if(this.context.now=i,this.context.deltaMs=i-this.context.startMs,this.onTick(this.context)===!1){this.stop();return}this.frameId=requestAnimationFrame(Ci(this,Cn))}),this.context={now:0,startMs:Pn(),deltaMs:0}}get elapsedMs(){return this.pausedAtMs!==null?this.pausedAtMs-this.context.startMs:Pn()-this.context.startMs}};Cn=new WeakMap;function Or(t,i){const a=new Ea(({deltaMs:u})=>{if(u>=i)return t(),!1});return a.start(),()=>a.stop()}function Br(...t){t.length===1?t[0]:t[1],t.length===2&&t[0]}function lu(t,i){if(t==null)throw new Error(i())}function ka(t,i,a){let u=[];for(const l of i)t[l]==null&&u.push(l);if(u.length>0)throw new Error(`[zag-js${` > ${a}`}] missing required props: ${u.join(", ")}`)}var Oa=Object.defineProperty,Ta=(t,i,a)=>i in t?Oa(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a,Tr=(t,i,a)=>Ta(t,typeof i!="symbol"?i+"":i,a),oo=()=>{},Bn=t=>typeof t=="object"&&t!==null,Sa=2147483647,wt=t=>t?"":void 0,Pa=1,Aa=9,Ia=11,we=t=>Bn(t)&&t.nodeType===Pa&&typeof t.nodeName=="string",Kr=t=>Bn(t)&&t.nodeType===Aa,Ca=t=>Bn(t)&&t===t.window,ao=t=>we(t)?t.localName||"":"#document";function Da(t){return["html","body","#document"].includes(ao(t))}var Ra=t=>Bn(t)&&t.nodeType!==void 0,St=t=>Ra(t)&&t.nodeType===Ia&&"host"in t,Ba=t=>we(t)&&t.localName==="input",Ka=t=>we(t)?t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0:!1;function Na(t){if(!t)return!1;const i=t.getRootNode();return so(i)===t}var ja=/(textarea|select)/;function Ma(t){if(t==null||!we(t))return!1;try{return Ba(t)&&t.selectionStart!=null||ja.test(t.localName)||t.isContentEditable||t.getAttribute("contenteditable")==="true"||t.getAttribute("contenteditable")===""}catch{return!1}}function Ut(t,i){if(!t||!i||!we(t)||!we(i))return!1;const a=i.getRootNode?.();if(t===i||t.contains(i))return!0;if(a&&St(a)){let u=i;for(;u;){if(t===u)return!0;u=u.parentNode||u.host}}return!1}function ct(t){return Kr(t)?t:Ca(t)?t.document:t?.ownerDocument??document}function Fa(t){return ct(t).documentElement}function Gt(t){return St(t)?Gt(t.host):Kr(t)?t.defaultView??window:we(t)?t.ownerDocument?.defaultView??window:window}function so(t){let i=t.activeElement;for(;i?.shadowRoot;){const a=i.shadowRoot.activeElement;if(!a||a===i)break;i=a}return i}function qa(t){if(ao(t)==="html")return t;const i=t.assignedSlot||t.parentNode||St(t)&&t.host||Fa(t);return St(i)?i.host:i}function Nr(t){let i;try{if(i=t.getRootNode({composed:!0}),Kr(i)||St(i))return i}catch{}return t.ownerDocument??document}var Sr=new WeakMap;function fu(t){return Sr.has(t)||Sr.set(t,Gt(t).getComputedStyle(t)),Sr.get(t)}var jr=new Set(["menu","listbox","dialog","grid","tree","region"]),La=t=>jr.has(t),uo=t=>t.getAttribute("aria-controls")?.split(" ")||[];function za(t,i){const a=new Set,u=Nr(t),l=y=>{const P=y.querySelectorAll("[aria-controls]");for(const v of P){if(v.getAttribute("aria-expanded")!=="true")continue;const B=uo(v);for(const A of B){if(!A||a.has(A))continue;a.add(A);const k=u.getElementById(A);if(k){const T=k.getAttribute("role"),I=k.getAttribute("aria-modal")==="true";if(T&&La(T)&&!I&&(k===i||k.contains(i)||l(k)))return!0}}}return!1};return l(t)}function $a(t,i){const a=Nr(t),u=new Set,l=y=>{const P=y.querySelectorAll("[aria-controls]");for(const v of P){if(v.getAttribute("aria-expanded")!=="true")continue;const B=uo(v);for(const A of B){if(!A||u.has(A))continue;u.add(A);const k=a.getElementById(A);if(k){const T=k.getAttribute("role"),I=k.getAttribute("aria-modal")==="true";T&&jr.has(T)&&!I&&(i(k),l(k))}}}};l(t)}function du(t){const i=new Set;return $a(t,a=>{t.contains(a)||i.add(a)}),Array.from(i)}function Wa(t){const i=t.getAttribute("role");return!!(i&&jr.has(i))}function Ua(t){return t.hasAttribute("aria-controls")&&t.getAttribute("aria-expanded")==="true"}function hu(t){return Ua(t)?!0:!!t.querySelector?.('[aria-controls][aria-expanded="true"]')}function pu(t){if(!t.id)return!1;const i=Nr(t),a=CSS.escape(t.id),u=`[aria-controls~="${a}"][aria-expanded="true"], [aria-controls="${a}"][aria-expanded="true"]`;return!!(i.querySelector(u)&&Wa(t))}var co=()=>typeof document<"u";function Va(){return navigator.userAgentData?.platform??navigator.platform}var Mr=t=>co()&&t.test(Va()),Ri=()=>co()&&!!navigator.maxTouchPoints,Ha=()=>Mr(/^iPhone/i),Ga=()=>Mr(/^iPad/i)||lo()&&navigator.maxTouchPoints>1,yu=()=>Ha()||Ga(),lo=()=>Mr(/^Mac/i);function Ya(t){return t.composedPath?.()??t.nativeEvent?.composedPath?.()}function Rn(t){return Ya(t)?.[0]??t.target}var Xa=t=>t.button===2||lo()&&t.ctrlKey&&t.button===0,Ot=(t,i,a,u)=>{const l=typeof t=="function"?t():t;return l?.addEventListener(i,a,u),()=>{l?.removeEventListener(i,a,u)}},fo=t=>we(t)&&t.tagName==="IFRAME",Qa=/^(audio|video|details)$/;function ho(t){const i=t.getAttribute("tabindex");return i?parseInt(i,10):NaN}var Ja=t=>!Number.isNaN(ho(t)),Za=t=>ho(t)<0;function es(t,i){if(!i)return null;if(i===!0)return t.shadowRoot||null;const a=i(t);return(a===!0?t.shadowRoot:a)||null}function po(t,i,a){const u=[...t],l=[...t],y=new Set,P=new Map;t.forEach((B,A)=>P.set(B,A));let v=0;for(;v<l.length;){const B=l[v++];if(!B||y.has(B))continue;y.add(B);const A=es(B,i);if(A){const k=Array.from(A.querySelectorAll(Kn)).filter(a),T=P.get(B);if(T!==void 0){const I=T+1;u.splice(I,0,...k),k.forEach((D,G)=>{P.set(D,I+G)});for(let D=I+k.length;D<u.length;D++)P.set(u[D],D)}else{const I=u.length;u.push(...k),k.forEach((D,G)=>{P.set(D,I+G)})}l.push(...k)}}return u}var Kn="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false']), details > summary:first-of-type",ts=(t,i={})=>{if(!t)return[];const{includeContainer:a=!1,getShadowRoot:u}=i,l=Array.from(t.querySelectorAll(Kn));(a==!0||a=="if-empty"&&l.length===0)&&we(t)&&Tt(t)&&l.unshift(t);const P=[];for(const v of l)if(Tt(v)){if(fo(v)&&v.contentDocument){const B=v.contentDocument.body;P.push(...ts(B,{getShadowRoot:u}));continue}P.push(v)}return u?po(P,u,Tt):P};function Tt(t){return!we(t)||t.closest("[inert]")?!1:t.matches(Kn)&&Ka(t)}function ns(t,i={}){if(!t)return[];const{includeContainer:a,getShadowRoot:u}=i,l=Array.from(t.querySelectorAll(Kn));a&&Pr(t)&&l.unshift(t);const y=[];for(const P of l)if(Pr(P)){if(fo(P)&&P.contentDocument){const v=P.contentDocument.body;y.push(...ns(v,{getShadowRoot:u}));continue}y.push(P)}if(u){const P=po(y,u,Pr);return!P.length&&a?l:P}return!y.length&&a?l:y}function Pr(t){return we(t)&&t.tabIndex>0?!0:Tt(t)&&!Za(t)}function mu(t){return t.tabIndex<0&&(Qa.test(t.localName)||Ma(t))&&!Ja(t)?0:t.tabIndex}var yo=class mo{constructor(){Tr(this,"id",null),Tr(this,"fn_cleanup"),Tr(this,"cleanup",()=>{this.cancel()})}static create(){return new mo}request(i){this.cancel(),this.id=globalThis.requestAnimationFrame(()=>{this.id=null,this.fn_cleanup=i?.()})}cancel(){this.id!==null&&(globalThis.cancelAnimationFrame(this.id),this.id=null),this.fn_cleanup?.(),this.fn_cleanup=void 0}isActive(){return this.id!==null}};function ut(t){const i=yo.create();return i.request(t),i.cleanup}function Rr(t){const i=qa(t);return Da(i)?ct(i).body:we(i)&&os(i)?i:Rr(i)}var rs=/auto|scroll|overlay|hidden|clip/,is=new Set(["inline","contents"]);function os(t){const i=Gt(t),{overflow:a,overflowX:u,overflowY:l,display:y}=i.getComputedStyle(t);return rs.test(a+l+u)&&!is.has(y)}function as(t,i){if(!t)return oo;const a=Object.keys(i).reduce((u,l)=>(u[l]=t.style.getPropertyValue(l),u),{});return Object.assign(t.style,i),()=>{Object.assign(t.style,a),t.style.length===0&&t.removeAttribute("style")}}function gu(t,i,a){if(!t)return oo;const u=t.style.getPropertyValue(i);return t.style.setProperty(i,a),()=>{t.style.setProperty(i,u),t.style.length===0&&t.removeAttribute("style")}}function ss(t,i,a){const{signal:u}=i;return[new Promise((P,v)=>{const B=setTimeout(()=>{v(new Error(`Timeout of ${a}ms exceeded`))},a);u.addEventListener("abort",()=>{clearTimeout(B),v(new Error("Promise aborted"))}),t.then(A=>{u.aborted||(clearTimeout(B),P(A))}).catch(A=>{u.aborted||(clearTimeout(B),v(A))})}),()=>i.abort()]}function us(t,i){const{timeout:a,rootNode:u}=i,l=Gt(u),y=ct(u),P=new l.AbortController;return ss(new Promise(v=>{const B=t();if(B){v(B);return}const A=new l.MutationObserver(()=>{const k=t();k&&k.isConnected&&(A.disconnect(),v(k))});A.observe(y.body,{childList:!0,subtree:!0})}),P,a)}var cs=(...t)=>t.map(i=>i?.trim?.()).filter(Boolean).join(" "),ls=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g,Bi=t=>{const i={};let a;for(;a=ls.exec(t);)i[a[1]]=a[2];return i},fs=(t,i)=>{if(kr(t)){if(kr(i))return`${t};${i}`;t=Bi(t)}else kr(i)&&(i=Bi(i));return Object.assign({},t??{},i??{})};function vu(...t){let i={};for(let a of t){if(!a)continue;for(let l in i){if(l.startsWith("on")&&typeof i[l]=="function"&&typeof a[l]=="function"){i[l]=Dr(a[l],i[l]);continue}if(l==="className"||l==="class"){i[l]=cs(i[l],a[l]);continue}if(l==="style"){i[l]=fs(i[l],a[l]);continue}i[l]=a[l]!==void 0?a[l]:i[l]}for(let l in a)i[l]===void 0&&(i[l]=a[l]);const u=Object.getOwnPropertySymbols(a);for(let l of u)i[l]=a[l]}return i}function go(){return{and:(...t)=>function(a){return t.every(u=>a.guard(u))},or:(...t)=>function(a){return t.some(u=>a.guard(u))},not:t=>function(a){return!a.guard(t)}}}function bu(t){return t}function ds(){return{guards:go(),createMachine:t=>t,choose:t=>function({choose:a}){return a(t)?.actions}}}var hs=(t=>(t.NotStarted="Not Started",t.Started="Started",t.Stopped="Stopped",t))(hs||{}),_u="__init__";function wu(t){const i=()=>t.getRootNode?.()??document,a=()=>ct(i());return{...t,getRootNode:i,getDoc:a,getWin:()=>a().defaultView??window,getActiveElement:()=>so(i()),isActiveElement:Na,getById:P=>i().getElementById(P)}}var Wt=(t,i=[])=>({parts:(...a)=>{if(ps(i))return Wt(t,a);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...a)=>Wt(t,[...i,...a]),omit:(...a)=>Wt(t,i.filter(u=>!a.includes(u))),rename:a=>Wt(a,i),keys:()=>i,build:()=>[...new Set(i)].reduce((a,u)=>Object.assign(a,{[u]:{selector:[`&[data-scope="${xt(t)}"][data-part="${xt(u)}"]`,`& [data-scope="${xt(t)}"][data-part="${xt(u)}"]`].join(", "),attrs:{"data-scope":xt(t),"data-part":xt(u)}}}),{})}),xt=t=>t.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),ps=t=>t.length===0;function ys(t){const i={each(a){for(let u=0;u<t.frames?.length;u+=1){const l=t.frames[u];l&&a(l)}},addEventListener(a,u,l){return i.each(y=>{try{y.document.addEventListener(a,u,l)}catch{}}),()=>{try{i.removeEventListener(a,u,l)}catch{}}},removeEventListener(a,u,l){i.each(y=>{try{y.document.removeEventListener(a,u,l)}catch{}})}};return i}function ms(t){const i=t.frameElement!=null?t.parent:null;return{addEventListener:(a,u,l)=>{try{i?.addEventListener(a,u,l)}catch{}return()=>{try{i?.removeEventListener(a,u,l)}catch{}}},removeEventListener:(a,u,l)=>{try{i?.removeEventListener(a,u,l)}catch{}}}}var Ki="pointerdown.outside",Ni="focus.outside";function gs(t){for(const i of t)if(we(i)&&Tt(i))return!0;return!1}var vo=t=>"clientY"in t;function vs(t,i){if(!vo(i)||!t)return!1;const a=t.getBoundingClientRect();return a.width===0||a.height===0?!1:a.top<=i.clientY&&i.clientY<=a.top+a.height&&a.left<=i.clientX&&i.clientX<=a.left+a.width}function bs(t,i){return t.y<=i.y&&i.y<=t.y+t.height&&t.x<=i.x&&i.x<=t.x+t.width}function ji(t,i){if(!i||!vo(t))return!1;const a=i.scrollHeight>i.clientHeight,u=a&&t.clientX>i.offsetLeft+i.clientWidth,l=i.scrollWidth>i.clientWidth,y=l&&t.clientY>i.offsetTop+i.clientHeight,P={x:i.offsetLeft,y:i.offsetTop,width:i.clientWidth+(a?16:0),height:i.clientHeight+(l?16:0)},v={x:t.clientX,y:t.clientY};return bs(P,v)?u||y:!1}function _s(t,i){const{exclude:a,onFocusOutside:u,onPointerDownOutside:l,onInteractOutside:y,defer:P,followControlledElements:v=!0}=i;if(!t)return;const B=ct(t),A=Gt(t),k=ys(A),T=ms(A);function I(ne,Z){if(!we(Z)||!Z.isConnected||Ut(t,Z)||vs(t,ne)||v&&za(t,Z))return!1;const he=B.querySelector(`[aria-controls="${t.id}"]`);if(he){const se=Rr(he);if(ji(ne,se))return!1}const pe=Rr(t);return ji(ne,pe)?!1:!a?.(Z)}const D=new Set,G=St(t?.getRootNode());function W(ne){function Z(he){const pe=P&&!Ri()?ut:Ge=>Ge(),se=he??ne,lt=se?.composedPath?.()??[se?.target];pe(()=>{const Ge=G?lt[0]:Rn(ne);if(!(!t||!I(ne,Ge))){if(l||y){const Pt=Dr(l,y);t.addEventListener(Ki,Pt,{once:!0})}Mi(t,Ki,{bubbles:!1,cancelable:!0,detail:{originalEvent:se,contextmenu:Xa(se),focusable:gs(lt),target:Ge}})}})}ne.pointerType==="touch"?(D.forEach(he=>he()),D.add(Ot(B,"click",Z,{once:!0})),D.add(T.addEventListener("click",Z,{once:!0})),D.add(k.addEventListener("click",Z,{once:!0}))):Z()}const J=new Set,ie=setTimeout(()=>{J.add(Ot(B,"pointerdown",W,!0)),J.add(T.addEventListener("pointerdown",W,!0)),J.add(k.addEventListener("pointerdown",W,!0))},0);function de(ne){(P?ut:he=>he())(()=>{const he=ne?.composedPath?.()??[ne?.target],pe=G?he[0]:Rn(ne);if(!(!t||!I(ne,pe))){if(u||y){const se=Dr(u,y);t.addEventListener(Ni,se,{once:!0})}Mi(t,Ni,{bubbles:!1,cancelable:!0,detail:{originalEvent:ne,contextmenu:!1,focusable:Tt(pe),target:pe}})}})}return Ri()||(J.add(Ot(B,"focusin",de,!0)),J.add(T.addEventListener("focusin",de,!0)),J.add(k.addEventListener("focusin",de,!0))),()=>{clearTimeout(ie),D.forEach(ne=>ne()),J.forEach(ne=>ne())}}function ws(t,i){const{defer:a}=i,u=a?ut:y=>y(),l=[];return l.push(u(()=>{const y=typeof t=="function"?t():t;l.push(_s(y,i))})),()=>{l.forEach(y=>y?.())}}function Mi(t,i,a){const u=t.ownerDocument.defaultView||window,l=new u.CustomEvent(i,a);return t.dispatchEvent(l)}function xs(t,i){const a=u=>{u.key==="Escape"&&(u.isComposing||i?.(u))};return Ot(ct(t),"keydown",a,{capture:!0})}var Fi="layer:request-dismiss",ke={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(t=>t.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(t){const i=this.indexOf(t),a=this.topMostPointerBlockingLayer()?this.indexOf(this.topMostPointerBlockingLayer()?.node):-1;return i<a},isTopMost(t){return this.layers[this.count()-1]?.node===t},getNestedLayers(t){return Array.from(this.layers).slice(this.indexOf(t)+1)},getLayersByType(t){return this.layers.filter(i=>i.type===t)},getNestedLayersByType(t,i){const a=this.indexOf(t);return a===-1?[]:this.layers.slice(a+1).filter(u=>u.type===i)},getParentLayerOfType(t,i){const a=this.indexOf(t);if(!(a<=0))return this.layers.slice(0,a).reverse().find(u=>u.type===i)},countNestedLayersOfType(t,i){return this.getNestedLayersByType(t,i).length},isInNestedLayer(t,i){return this.getNestedLayers(t).some(a=>Ut(a.node,i))},isInBranch(t){return Array.from(this.branches).some(i=>Ut(i,t))},add(t){this.layers.push(t),this.syncLayers()},addBranch(t){this.branches.push(t)},remove(t){const i=this.indexOf(t);i<0||(i<this.count()-1&&this.getNestedLayers(t).forEach(u=>ke.dismiss(u.node,t)),this.layers.splice(i,1),this.syncLayers())},removeBranch(t){const i=this.branches.indexOf(t);i>=0&&this.branches.splice(i,1)},syncLayers(){this.layers.forEach((t,i)=>{t.node.style.setProperty("--layer-index",`${i}`),t.node.removeAttribute("data-nested"),t.node.removeAttribute("data-has-nested"),this.getParentLayerOfType(t.node,t.type)&&t.node.setAttribute("data-nested",t.type);const u=this.countNestedLayersOfType(t.node,t.type);u>0&&t.node.setAttribute("data-has-nested",t.type),t.node.style.setProperty("--nested-layer-count",`${u}`)})},indexOf(t){return this.layers.findIndex(i=>i.node===t)},dismiss(t,i){const a=this.indexOf(t);if(a===-1)return;const u=this.layers[a];ks(t,Fi,l=>{u.requestDismiss?.(l),l.defaultPrevented||u?.dismiss()}),Es(t,Fi,{originalLayer:t,targetLayer:i,originalIndex:a,targetIndex:i?this.indexOf(i):-1}),this.syncLayers()},clear(){this.remove(this.layers[0].node)}};function Es(t,i,a){const u=t.ownerDocument.defaultView||window,l=new u.CustomEvent(i,{cancelable:!0,bubbles:!0,detail:a});return t.dispatchEvent(l)}function ks(t,i,a){t.addEventListener(i,a,{once:!0})}var qi;function Li(){ke.layers.forEach(({node:t})=>{t.style.pointerEvents=ke.isBelowPointerBlockingLayer(t)?"none":"auto"})}function Os(t){t.style.pointerEvents=""}function Ts(t,i){const a=ct(t),u=[];return ke.hasPointerBlockingLayer()&&!a.body.hasAttribute("data-inert")&&(qi=document.body.style.pointerEvents,queueMicrotask(()=>{a.body.style.pointerEvents="none",a.body.setAttribute("data-inert","")})),i?.forEach(l=>{const[y,P]=us(()=>{const v=l();return we(v)?v:null},{timeout:1e3});y.then(v=>u.push(as(v,{pointerEvents:"auto"}))),u.push(P)}),()=>{ke.hasPointerBlockingLayer()||(queueMicrotask(()=>{a.body.style.pointerEvents=qi,a.body.removeAttribute("data-inert"),a.body.style.length===0&&a.body.removeAttribute("style")}),u.forEach(l=>l()))}}function Ss(t,i){const{warnOnMissingNode:a=!0}=i;if(a&&!t){Br("[@zag-js/dismissable] node is `null` or `undefined`");return}if(!t)return;const{onDismiss:u,onRequestDismiss:l,pointerBlocking:y,exclude:P,debug:v,type:B="dialog"}=i,A={dismiss:u,node:t,type:B,pointerBlocking:y,requestDismiss:l};ke.add(A),Li();function k(W){const J=Rn(W.detail.originalEvent);ke.isBelowPointerBlockingLayer(t)||ke.isInBranch(J)||(i.onPointerDownOutside?.(W),i.onInteractOutside?.(W),!W.defaultPrevented&&(v&&console.log("onPointerDownOutside:",W.detail.originalEvent),u?.()))}function T(W){const J=Rn(W.detail.originalEvent);ke.isInBranch(J)||(i.onFocusOutside?.(W),i.onInteractOutside?.(W),!W.defaultPrevented&&(v&&console.log("onFocusOutside:",W.detail.originalEvent),u?.()))}function I(W){ke.isTopMost(t)&&(i.onEscapeKeyDown?.(W),!W.defaultPrevented&&u&&(W.preventDefault(),u()))}function D(W){if(!t)return!1;const J=typeof P=="function"?P():P,ie=Array.isArray(J)?J:[J],de=i.persistentElements?.map(ne=>ne()).filter(we);return de&&ie.push(...de),ie.some(ne=>Ut(ne,W))||ke.isInNestedLayer(t,W)}const G=[y?Ts(t,i.persistentElements):void 0,xs(t,I),ws(t,{exclude:D,onFocusOutside:T,onPointerDownOutside:k,defer:i.defer})];return()=>{ke.remove(t),Li(),Os(t),G.forEach(W=>W?.())}}function xu(t,i){const{defer:a}=i,u=a?ut:y=>y(),l=[];return l.push(u(()=>{const y=to(t)?t():t;l.push(Ss(y,i))})),()=>{l.forEach(y=>y?.())}}function Ps(t,i={}){const{defer:a}=i,u=a?ut:y=>y(),l=[];return l.push(u(()=>{const y=to(t)?t():t;if(!y){Br("[@zag-js/dismissable] branch node is `null` or `undefined`");return}ke.addBranch(y),l.push(()=>{ke.removeBranch(y)})})),()=>{l.forEach(y=>y?.())}}var As=Wt("toast").parts("group","root","title","description","actionTrigger","closeTrigger"),kt=As.build(),Is=t=>`toast-group:${t}`,zi=(t,i)=>t.getById(`toast-group:${i}`),bo=t=>`toast:${t.id}`,$i=t=>t.getById(bo(t)),Wi=t=>`toast:${t.id}:title`,Ui=t=>`toast:${t.id}:description`,Cs=t=>`toast${t.id}:close`,Vi={info:5e3,error:5e3,success:2e3,loading:1/0,DEFAULT:5e3};function Ar(t,i){return t??Vi[i]??Vi.DEFAULT}var Ds=t=>typeof t=="string"?{left:t,right:t,bottom:t,top:t}:t;function Rs(t,i){const{prop:a,computed:u,context:l}=t,{offsets:y,gap:P}=a("store").attrs,v=l.get("heights"),B=Ds(y),A=a("dir")==="rtl",k=i.replace("-start",A?"-right":"-left").replace("-end",A?"-left":"-right"),T=k.includes("right"),I=k.includes("left"),D={position:"fixed",pointerEvents:u("count")>0?void 0:"none",display:"flex",flexDirection:"column","--gap":`${P}px`,"--first-height":`${v[0]?.height||0}px`,"--viewport-offset-left":B.left,"--viewport-offset-right":B.right,"--viewport-offset-top":B.top,"--viewport-offset-bottom":B.bottom,zIndex:Sa};let G="center";if(T&&(G="flex-end"),I&&(G="flex-start"),D.alignItems=G,k.includes("top")){const W=B.top;D.top=`max(env(safe-area-inset-top, 0px), ${W})`}if(k.includes("bottom")){const W=B.bottom;D.bottom=`max(env(safe-area-inset-bottom, 0px), ${W})`}if(!k.includes("left")){const W=B.right;D.insetInlineEnd=`calc(env(safe-area-inset-right, 0px) + ${W})`}if(!k.includes("right")){const W=B.left;D.insetInlineStart=`calc(env(safe-area-inset-left, 0px) + ${W})`}return D}function Bs(t,i){const{prop:a,context:u,computed:l}=t,y=a("parent"),P=y.computed("placement"),{gap:v}=y.prop("store").attrs,[B]=P.split("-"),A=u.get("mounted"),k=u.get("remainingTime"),T=l("height"),I=l("frontmost"),D=!I,G=!a("stacked"),W=a("stacked"),ie=a("type")==="loading"?Number.MAX_SAFE_INTEGER:k,de=l("heightIndex")*v+l("heightBefore"),ne={position:"absolute",pointerEvents:"auto","--opacity":"0","--remove-delay":`${a("removeDelay")}ms`,"--duration":`${ie}ms`,"--initial-height":`${T}px`,"--offset":`${de}px`,"--index":a("index"),"--z-index":l("zIndex"),"--lift-amount":"calc(var(--lift) * var(--gap))","--y":"100%","--x":"0"},Z=he=>Object.assign(ne,he);return B==="top"?Z({top:"0","--sign":"-1","--y":"-100%","--lift":"1"}):B==="bottom"&&Z({bottom:"0","--sign":"1","--y":"100%","--lift":"-1"}),A&&(Z({"--y":"0","--opacity":"1"}),W&&Z({"--y":"calc(var(--lift) * var(--offset))","--height":"var(--initial-height)"})),i||Z({"--opacity":"0",pointerEvents:"none"}),D&&G&&(Z({"--base-scale":"var(--index) * 0.05 + 1","--y":"calc(var(--lift-amount) * var(--index))","--scale":"calc(-1 * var(--base-scale))","--height":"var(--first-height)"}),i||Z({"--y":"calc(var(--sign) * 40%)"})),D&&W&&!i&&Z({"--y":"calc(var(--lift) * var(--offset) + var(--lift) * -100%)"}),I&&!i&&Z({"--y":"calc(var(--lift) * -100%)"}),ne}function Ks(t,i){const{computed:a}=t,u={position:"absolute",inset:"0",scale:"1 2",pointerEvents:i?"none":"auto"},l=y=>Object.assign(u,y);return a("frontmost")&&!i&&l({height:"calc(var(--initial-height) + 80%)"}),u}function Ns(){return{position:"absolute",left:"0",height:"calc(var(--gap) + 2px)",bottom:"100%",width:"100%"}}function js(t,i){const{context:a,prop:u,send:l,refs:y,computed:P}=t;return{getCount(){return a.get("toasts").length},getToasts(){return a.get("toasts")},getGroupProps(v={}){const{label:B="Notifications"}=v,{hotkey:A}=u("store").attrs,k=A.join("+").replace(/Key/g,"").replace(/Digit/g,""),T=P("placement"),[I,D="center"]=T.split("-");return i.element({...kt.group.attrs,dir:u("dir"),tabIndex:-1,"aria-label":`${T} ${B} ${k}`,id:Is(T),"data-placement":T,"data-side":I,"data-align":D,"aria-live":"polite",role:"region",style:Rs(t,T),onMouseEnter(){y.get("ignoreMouseTimer").isActive()||l({type:"REGION.POINTER_ENTER",placement:T})},onMouseMove(){y.get("ignoreMouseTimer").isActive()||l({type:"REGION.POINTER_ENTER",placement:T})},onMouseLeave(){y.get("ignoreMouseTimer").isActive()||l({type:"REGION.POINTER_LEAVE",placement:T})},onFocus(G){l({type:"REGION.FOCUS",target:G.relatedTarget})},onBlur(G){y.get("isFocusWithin")&&!Ut(G.currentTarget,G.relatedTarget)&&queueMicrotask(()=>l({type:"REGION.BLUR"}))}})},subscribe(v){return u("store").subscribe(()=>v(a.get("toasts")))}}}var{guards:Ms,createMachine:Fs}=ds(),{and:qs}=Ms,Ls=Fs({props({props:t}){return{dir:"ltr",id:ro(),...t,store:t.store}},initialState({prop:t}){return t("store").attrs.overlap?"overlap":"stack"},refs(){return{lastFocusedEl:null,isFocusWithin:!1,isPointerWithin:!1,ignoreMouseTimer:yo.create(),dismissableCleanup:void 0}},context({bindable:t}){return{toasts:t(()=>({defaultValue:[],sync:!0,hash:i=>i.map(a=>a.id).join(",")})),heights:t(()=>({defaultValue:[],sync:!0}))}},computed:{count:({context:t})=>t.get("toasts").length,overlap:({prop:t})=>t("store").attrs.overlap,placement:({prop:t})=>t("store").attrs.placement},effects:["subscribeToStore","trackDocumentVisibility","trackHotKeyPress"],watch({track:t,context:i,action:a}){t([()=>i.hash("toasts")],()=>{queueMicrotask(()=>{a(["collapsedIfEmpty","setDismissableBranch"])})})},exit:["clearDismissableBranch","clearLastFocusedEl","clearMouseEventTimer"],on:{"DOC.HOTKEY":{actions:["focusRegionEl"]},"REGION.BLUR":[{guard:qs("isOverlapping","isPointerOut"),target:"overlap",actions:["collapseToasts","resumeToasts","restoreFocusIfPointerOut"]},{guard:"isPointerOut",target:"stack",actions:["resumeToasts","restoreFocusIfPointerOut"]},{actions:["clearFocusWithin"]}],"TOAST.REMOVE":{actions:["removeToast","removeHeight","ignoreMouseEventsTemporarily"]},"TOAST.PAUSE":{actions:["pauseToasts"]}},states:{stack:{on:{"REGION.POINTER_LEAVE":[{guard:"isOverlapping",target:"overlap",actions:["clearPointerWithin","resumeToasts","collapseToasts"]},{actions:["clearPointerWithin","resumeToasts"]}],"REGION.OVERLAP":{target:"overlap",actions:["collapseToasts"]},"REGION.FOCUS":{actions:["setLastFocusedEl","pauseToasts"]},"REGION.POINTER_ENTER":{actions:["setPointerWithin","pauseToasts"]}}},overlap:{on:{"REGION.STACK":{target:"stack",actions:["expandToasts"]},"REGION.POINTER_ENTER":{target:"stack",actions:["setPointerWithin","pauseToasts","expandToasts"]},"REGION.FOCUS":{target:"stack",actions:["setLastFocusedEl","pauseToasts","expandToasts"]}}}},implementations:{guards:{isOverlapping:({computed:t})=>t("overlap"),isPointerOut:({refs:t})=>!t.get("isPointerWithin")},effects:{subscribeToStore({context:t,prop:i}){return i("store").subscribe(a=>{if(a.dismiss){t.set("toasts",u=>u.filter(l=>l.id!==a.id));return}t.set("toasts",u=>{const l=u.findIndex(y=>y.id===a.id);return l!==-1?[...u.slice(0,l),{...u[l],...a},...u.slice(l+1)]:[a,...u]})})},trackHotKeyPress({prop:t,send:i}){return Ot(document,"keydown",u=>{const{hotkey:l}=t("store").attrs;l.every(P=>u[P]||u.code===P)&&i({type:"DOC.HOTKEY"})},{capture:!0})},trackDocumentVisibility({prop:t,send:i,scope:a}){const{pauseOnPageIdle:u}=t("store").attrs;if(!u)return;const l=a.getDoc();return Ot(l,"visibilitychange",()=>{const y=l.visibilityState==="hidden";i({type:y?"PAUSE_ALL":"RESUME_ALL"})})}},actions:{setDismissableBranch({refs:t,context:i,computed:a,scope:u}){const l=i.get("toasts"),y=a("placement"),P=l.length>0;if(!P){t.get("dismissableCleanup")?.();return}if(P&&t.get("dismissableCleanup"))return;const B=Ps(()=>zi(u,y),{defer:!0});t.set("dismissableCleanup",B)},clearDismissableBranch({refs:t}){t.get("dismissableCleanup")?.()},focusRegionEl({scope:t,computed:i}){queueMicrotask(()=>{zi(t,i("placement"))?.focus()})},pauseToasts({prop:t}){t("store").pause()},resumeToasts({prop:t}){t("store").resume()},expandToasts({prop:t}){t("store").expand()},collapseToasts({prop:t}){t("store").collapse()},removeToast({prop:t,event:i}){t("store").remove(i.id)},removeHeight({event:t,context:i}){t?.id!=null&&queueMicrotask(()=>{i.set("heights",a=>a.filter(u=>u.id!==t.id))})},collapsedIfEmpty({send:t,computed:i}){!i("overlap")||i("count")>1||t({type:"REGION.OVERLAP"})},setLastFocusedEl({refs:t,event:i}){t.get("isFocusWithin")||!i.target||(t.set("isFocusWithin",!0),t.set("lastFocusedEl",i.target))},restoreFocusIfPointerOut({refs:t}){!t.get("lastFocusedEl")||t.get("isPointerWithin")||(t.get("lastFocusedEl")?.focus({preventScroll:!0}),t.set("lastFocusedEl",null),t.set("isFocusWithin",!1))},setPointerWithin({refs:t}){t.set("isPointerWithin",!0)},clearPointerWithin({refs:t}){t.set("isPointerWithin",!1),t.get("lastFocusedEl")&&!t.get("isFocusWithin")&&(t.get("lastFocusedEl")?.focus({preventScroll:!0}),t.set("lastFocusedEl",null))},clearFocusWithin({refs:t}){t.set("isFocusWithin",!1)},clearLastFocusedEl({refs:t}){t.get("lastFocusedEl")&&(t.get("lastFocusedEl")?.focus({preventScroll:!0}),t.set("lastFocusedEl",null),t.set("isFocusWithin",!1))},ignoreMouseEventsTemporarily({refs:t}){t.get("ignoreMouseTimer").request()},clearMouseEventTimer({refs:t}){t.get("ignoreMouseTimer").cancel()}}}});function Eu(t,i){const{state:a,send:u,prop:l,scope:y,context:P,computed:v}=t,B=a.hasTag("visible"),A=a.hasTag("paused"),k=P.get("mounted"),T=v("frontmost"),I=l("parent").computed("placement"),D=l("type"),G=l("stacked"),W=l("title"),J=l("description"),ie=l("action"),[de,ne="center"]=I.split("-");return{type:D,title:W,description:J,placement:I,visible:B,paused:A,closable:!!l("closable"),pause(){u({type:"PAUSE"})},resume(){u({type:"RESUME"})},dismiss(){u({type:"DISMISS",src:"programmatic"})},getRootProps(){return i.element({...kt.root.attrs,dir:l("dir"),id:bo(y),"data-state":B?"open":"closed","data-type":D,"data-placement":I,"data-align":ne,"data-side":de,"data-mounted":wt(k),"data-paused":wt(A),"data-first":wt(T),"data-sibling":wt(!T),"data-stack":wt(G),"data-overlap":wt(!G),role:"status","aria-atomic":"true","aria-describedby":J?Ui(y):void 0,"aria-labelledby":W?Wi(y):void 0,tabIndex:0,style:Bs(t,B),onKeyDown(Z){Z.defaultPrevented||Z.key=="Escape"&&(u({type:"DISMISS",src:"keyboard"}),Z.preventDefault())}})},getGhostBeforeProps(){return i.element({"data-ghost":"before",style:Ks(t,B)})},getGhostAfterProps(){return i.element({"data-ghost":"after",style:Ns()})},getTitleProps(){return i.element({...kt.title.attrs,id:Wi(y)})},getDescriptionProps(){return i.element({...kt.description.attrs,id:Ui(y)})},getActionTriggerProps(){return i.button({...kt.actionTrigger.attrs,type:"button",onClick(Z){Z.defaultPrevented||(ie?.onClick?.(),u({type:"DISMISS",src:"user"}))}})},getCloseTriggerProps(){return i.button({id:Cs(y),...kt.closeTrigger.attrs,type:"button","aria-label":"Dismiss notification",onClick(Z){Z.defaultPrevented||u({type:"DISMISS",src:"user"})}})}}}var{not:zs}=go(),ku={props({props:t}){return ka(t,["id","type","parent","removeDelay"],"toast"),{closable:!0,...t,duration:Ar(t.duration,t.type)}},initialState({prop:t}){return t("type")==="loading"||t("duration")===1/0?"visible:persist":"visible"},context({prop:t,bindable:i}){return{remainingTime:i(()=>({defaultValue:Ar(t("duration"),t("type"))})),createdAt:i(()=>({defaultValue:Date.now()})),mounted:i(()=>({defaultValue:!1})),initialHeight:i(()=>({defaultValue:0}))}},refs(){return{closeTimerStartTime:Date.now(),lastCloseStartTimerStartTime:0}},computed:{zIndex:({prop:t})=>{const i=t("parent").context.get("toasts"),a=i.findIndex(u=>u.id===t("id"));return i.length-a},height:({prop:t})=>t("parent").context.get("heights").find(u=>u.id===t("id"))?.height??0,heightIndex:({prop:t})=>t("parent").context.get("heights").findIndex(a=>a.id===t("id")),frontmost:({prop:t})=>t("index")===0,heightBefore:({prop:t})=>{const i=t("parent").context.get("heights"),a=i.findIndex(u=>u.id===t("id"));return i.reduce((u,l,y)=>y>=a?u:u+l.height,0)},shouldPersist:({prop:t})=>t("type")==="loading"||t("duration")===1/0},watch({track:t,prop:i,send:a}){t([()=>i("message")],()=>{const u=i("message");u&&a({type:u,src:"programmatic"})}),t([()=>i("type"),()=>i("duration")],()=>{a({type:"UPDATE"})})},on:{UPDATE:[{guard:"shouldPersist",target:"visible:persist",actions:["resetCloseTimer"]},{target:"visible:updating",actions:["resetCloseTimer"]}],MEASURE:{actions:["measureHeight"]}},entry:["setMounted","measureHeight","invokeOnVisible"],effects:["trackHeight"],states:{"visible:updating":{tags:["visible","updating"],effects:["waitForNextTick"],on:{SHOW:{target:"visible"}}},"visible:persist":{tags:["visible","paused"],on:{RESUME:{guard:zs("isLoadingType"),target:"visible",actions:["setCloseTimer"]},DISMISS:{target:"dismissing"}}},visible:{tags:["visible"],effects:["waitForDuration"],on:{DISMISS:{target:"dismissing"},PAUSE:{target:"visible:persist",actions:["syncRemainingTime"]}}},dismissing:{entry:["invokeOnDismiss"],effects:["waitForRemoveDelay"],on:{REMOVE:{target:"unmounted",actions:["notifyParentToRemove"]}}},unmounted:{entry:["invokeOnUnmount"]}},implementations:{effects:{waitForRemoveDelay({prop:t,send:i}){return Or(()=>{i({type:"REMOVE",src:"timer"})},t("removeDelay"))},waitForDuration({send:t,context:i,computed:a}){if(!a("shouldPersist"))return Or(()=>{t({type:"DISMISS",src:"timer"})},i.get("remainingTime"))},waitForNextTick({send:t}){return Or(()=>{t({type:"SHOW",src:"timer"})},0)},trackHeight({scope:t,prop:i}){let a;return ut(()=>{const u=$i(t);if(!u)return;const l=()=>{const v=u.style.height;u.style.height="auto";const B=u.getBoundingClientRect().height;u.style.height=v;const A={id:i("id"),height:B};Hi(i("parent"),A)},y=t.getWin(),P=new y.MutationObserver(l);P.observe(u,{childList:!0,subtree:!0,characterData:!0}),a=()=>P.disconnect()}),()=>a?.()}},guards:{isLoadingType:({prop:t})=>t("type")==="loading",shouldPersist:({computed:t})=>t("shouldPersist")},actions:{setMounted({context:t}){ut(()=>{t.set("mounted",!0)})},measureHeight({scope:t,prop:i,context:a}){queueMicrotask(()=>{const u=$i(t);if(!u)return;const l=u.style.height;u.style.height="auto";const y=u.getBoundingClientRect().height;u.style.height=l,a.set("initialHeight",y);const P={id:i("id"),height:y};Hi(i("parent"),P)})},setCloseTimer({refs:t}){t.set("closeTimerStartTime",Date.now())},resetCloseTimer({context:t,refs:i,prop:a}){i.set("closeTimerStartTime",Date.now()),t.set("remainingTime",Ar(a("duration"),a("type")))},syncRemainingTime({context:t,refs:i}){t.set("remainingTime",a=>{const u=i.get("closeTimerStartTime"),l=Date.now()-u;return i.set("lastCloseStartTimerStartTime",Date.now()),a-l})},notifyParentToRemove({prop:t}){t("parent").send({type:"TOAST.REMOVE",id:t("id")})},invokeOnDismiss({prop:t,event:i}){t("onStatusChange")?.({status:"dismissing",src:i.src})},invokeOnUnmount({prop:t}){t("onStatusChange")?.({status:"unmounted"})},invokeOnVisible({prop:t}){t("onStatusChange")?.({status:"visible"})}}}};function Hi(t,i){const{id:a,height:u}=i;t.context.set("heights",l=>l.find(P=>P.id===a)?l.map(P=>P.id===a?{...P,height:u}:P):[{id:a,height:u},...l])}var $s=(t,i)=>({...i,...io(t)});function Ws(t={}){const i=$s(t,{placement:"bottom",overlap:!1,max:24,gap:16,offsets:"1rem",hotkey:["altKey","KeyT"],removeDelay:200,pauseOnPageIdle:!0});let a=[],u=[],l=new Set,y=[];const P=$=>(a.push($),()=>{const V=a.indexOf($);a.splice(V,1)}),v=$=>(a.forEach(V=>V($)),$),B=$=>{if(u.length>=i.max){y.push($);return}v($),u.unshift($)},A=()=>{for(;y.length>0&&u.length<i.max;){const $=y.shift();$&&(v($),u.unshift($))}},k=$=>{const V=$.id??`toast:${ro()}`,Ie=u.find(xe=>xe.id===V);return l.has(V)&&l.delete(V),Ie?u=u.map(xe=>xe.id===V?v({...xe,...$,id:V}):xe):B({id:V,duration:i.duration,removeDelay:i.removeDelay,type:"info",...$,stacked:!i.overlap,gap:i.gap}),V},T=$=>(l.add($),$?(a.forEach(V=>V({id:$,dismiss:!0})),u=u.filter(V=>V.id!==$),A()):(u.forEach(V=>{a.forEach(Ie=>Ie({id:V.id,dismiss:!0}))}),u=[],y=[]),$);return{attrs:i,subscribe:P,create:k,update:($,V)=>k({id:$,...V}),remove:T,dismiss:$=>{$!=null?u=u.map(V=>V.id===$?v({...V,message:"DISMISS"}):V):u=u.map(V=>v({...V,message:"DISMISS"}))},error:$=>k({...$,type:"error"}),success:$=>k({...$,type:"success"}),info:$=>k({...$,type:"info"}),warning:$=>k({...$,type:"warning"}),loading:$=>k({...$,type:"loading"}),getVisibleToasts:()=>u.filter($=>!l.has($.id)),getCount:()=>u.length,promise:($,V,Ie={})=>{if(!V||!V.loading){Br("[zag-js > toast] toaster.promise() requires at least a 'loading' option to be specified");return}const xe=k({...Ie,...V.loading,promise:$,type:"loading"});let Fe=!0,Ye;const Be=Sn($).then(async fe=>{if(Ye=["resolve",fe],Us(fe)&&!fe.ok){Fe=!1;const Se=Sn(V.error,`HTTP Error! status: ${fe.status}`);k({...Ie,...Se,id:xe,type:"error"})}else if(V.success!==void 0){Fe=!1;const Se=Sn(V.success,fe);k({...Ie,...Se,id:xe,type:"success"})}}).catch(async fe=>{if(Ye=["reject",fe],V.error!==void 0){Fe=!1;const Se=Sn(V.error,fe);k({...Ie,...Se,id:xe,type:"error"})}}).finally(()=>{Fe&&T(xe),V.finally?.()});return{id:xe,unwrap:()=>new Promise((fe,Se)=>Be.then(()=>Ye[0]==="reject"?Se(Ye[1]):fe(Ye[1])).catch(Se))}},pause:$=>{$!=null?u=u.map(V=>V.id===$?v({...V,message:"PAUSE"}):V):u=u.map(V=>v({...V,message:"PAUSE"}))},resume:$=>{$!=null?u=u.map(V=>V.id===$?v({...V,message:"RESUME"}):V):u=u.map(V=>v({...V,message:"RESUME"}))},isVisible:$=>!l.has($)&&!!u.find(V=>V.id===$),isDismissed:$=>l.has($),expand:()=>{u=u.map($=>v({...$,stacked:!0}))},collapse:()=>{u=u.map($=>v({...$,stacked:!1}))}}}var Us=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Ou={connect:js,machine:Ls};const Vs=Ws({placement:"top-end"}),An=Ht({toaster:Vs}),Gi=Ht({lang_index:""}),Yi=Ht({app_uid:""});let Ir=Vt(0),Xi=Vt(0),Et=Vt("size_init");const Qi={test(t){console.log("test=",t)},console_log(...t){},console_error(...t){},url_path(t){return""+t},redirect_pathname(t){const i=t.url_pathname,a=t.url_params;(function(){xi(i+a,{replaceState:!0,invalidateAll:!0}).then(l=>{})})()},get_agent(){return navigator.userAgent},get_href(){return kn.url.href},get_host(){return kn.url.host},get_route(){let t=this;{let i=kn.route;return typeof i=="string"?i:typeof i=="object"?i.id:t.json_to_string(i)}},get_params(){return kn.url.search},search_param(t){let i=this;return i.search_href_param(i.get_params(),t)},search_href_param(t,i){let a=this,u="";t?u=t:u=a.get_href();let l=new RegExp("([?]|&|#)"+i+"=([^&|^#]*)(&|$|#)"),y=u.match(l);return y?decodeURIComponent(y[2]):""},js_rand(t,i){return Math.floor(Math.random()*(i-t+1)+t)},set_local_data(t,i){return t=this.url_encode(t),localStorage.setItem(t,i),localStorage.getItem(t)},get_local_data(t){t=this.url_encode(t);{let a=localStorage.getItem(t);return a||""}},del_local_data(t){return t=this.url_encode(t),localStorage.removeItem(t)},clear_local_data(){return localStorage.clear()},get_time_s(){return Math.floor(new Date().getTime()/1e3)},get_time_ms(){return new Date().getTime()},get_time_date(t){return this.get_time_s_date(t,"")},get_time_s_date(t,i){let a;i?a=new Date(i*1):a=new Date;let u=a.getSeconds();u<10&&(u="0"+u);let l=a.getMinutes();l<10&&(l="0"+l);let y=a.getHours();y<10&&(y="0"+y);let P=a.getDate();P<10&&(P="0"+P);let v=a.getMonth()+1;v<10&&(v="0"+v);let B=a.getFullYear(),A=["week1","week2","week3","week4","week5","week6","week7"][a.getDay()];return t=t.replaceAll("Y",B),t=t.replaceAll("m",v),t=t.replaceAll("d",P),t=t.replaceAll("H",y),t=t.replaceAll("i",l),t=t.replaceAll("s",u),t=t.replaceAll("W",A),t},get_time_ms_format(t,i){return i?i=i*1:i=this.get_time_ms(),this.get_time_s_date(t,i)},format_date(t,i){i=i+"";let a=i.slice(0,4),u=i.slice(4,6),l=i.slice(6,8),y=i.slice(8,10),P=i.slice(10,12),v=i.slice(12,14),B=t;return B=B.replaceAll("Y",a),B=B.replaceAll("m",u),B=B.replaceAll("d",l),B=B.replaceAll("H",y),B=B.replaceAll("i",P),B=B.replaceAll("s",v),B},is_weixin(){return window.navigator.userAgent.toLowerCase().match(/micromessenger/i)==="micromessenger"},is_qq(){let t=window.navigator.userAgent.toLowerCase();return t.indexOf("qq")!==-1&&t.indexOf("qqbrowser")===-1},is_dingding(){return window.navigator.userAgent.toLowerCase().indexOf("dingtalk")!==-1},is_work_weixin(){return window.navigator.userAgent.toLowerCase().indexOf("wxwork")!==-1},is_feishu(){return window.navigator.userAgent.toLowerCase().indexOf("lark")!==-1},make_uid(t=""){let i=this,a=i.js_rand(1e10,999999999999),u=window.navigator.userAgent.toLowerCase(),l=(navigator.language?navigator.language:"-").toLowerCase(),y=i.get_time_date("YmdHisW"),P="";return P=window.location.href.toLowerCase(),i.md5(t+"@"+u+"@"+y+"@"+P+"@"+window.innerWidth+"@"+a+"@"+l)},get_theme_model(){return window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"},md5(t){return t?ra(t):""},base64_encode(t){try{return btoa(t)}catch{return""}},base64_decode(t){try{return atob(t)}catch{return""}},url_encode(t){return encodeURIComponent(t)},url_decode(t){return decodeURIComponent(t)},text_encode(t){return this.string_to_unicode(t)},text_decode(t){return this.unicode_to_string(t)},string_to_unicode(t){let i="";for(let a=0;a<t.length;a++)i?i+=","+t.charCodeAt(a):i=t.charCodeAt(a);return i},unicode_to_string(t){const i=t.split(",");let a="";for(let u=0;u<i.length;u++)a+=String.fromCharCode(i[u]);return a},hex16_to_string(t){return decodeURIComponent(t)},string_to_hex16(t){let i="";for(let a=0;a<t.length;a++)i?i+="&#x"+t.charCodeAt(a).toString(16)+";":i="&#x"+t.charCodeAt(a).toString(16)+";";return i},string_to_json(t){let i,a=t;return typeof a=="string"?i=JSON.parse(a):i=a,i},json_to_string(t){let i,a=t;return typeof a=="object"?i=JSON.stringify(a):i=a,i},string_star(t,i,a){let u=t.length-i-a,l="";for(let y=0;y<u;y++)l+="*";return t.substring(0,i)+l+t.substring(t.length-a)},get_file_ext(t){let i=t.split("/");return i.length?i[i.length-1]:""},is_video(t){try{let i=t.substring(t.lastIndexOf("."));return i=i.toLowerCase(),[".mp4",".mkv",".avi",".flv",".mov",".m4v",".rmvb",".rm",".webm",".asf",".wmv"].includes(i)}catch{return!1}},is_audio(t){try{let i=t.substring(t.lastIndexOf("."));return i=i.toLowerCase(),[".mp3",".wav",".m3u",".m4a",".flac"].includes(i)}catch{return!1}},is_img(t){try{let i=t.substring(t.lastIndexOf("."));return i=i.toLowerCase(),[".gif",".png",".jpg",".jpeg",".webp",".ico",".jpg2",".tiff",".tif",".bmp",".svg"].includes(i)}catch{return!1}},is_mobile_screen(){let t=window.screen.width,i=window.screen.height,a=1280,u=280,l=40;return t<u||i<u||Math.abs(t-i)<l?-1:t>a||i>a?0:1},is_mobile_pwa(){return window.navigator?.standalone||document.referrer.includes("android-app://")},is_pc_pwa(){return["fullscreen","standalone","minimal-ui"].some(i=>window.matchMedia("(display-mode: "+i+")").matches)},html_to_plain_text(t){function i(u,l={img:" [üèûÔ∏è] ",audio:" [üéµ] ",video:" [üé¨] "}){return u.replace(/<img[^>]*alt="([^"]*)"[^>]*>/gi,(y,P)=>" [üèûÔ∏è "+P+"] "||l.img).replace(/<audio[^>]*title="([^"]*)"[^>]*>.*?<\/audio>/gi,(y,P)=>" [üéµ "+P+"] "||l.audio).replace(/<video[^>]*title="([^"]*)"[^>]*>.*?<\/video>/gi,(y,P)=>" [üé¨ "+P+"] "||l.video)}t=i(t);let a=document.createElement("div");return a.innerHTML=t,a.innerText||a.textContent},js_call_py_or_go(t,i){let a=this;return new Promise(u=>{{a.notice("config Error"),u({state:0,msg:"configÂèÇÊï∞ÈîôËØØ",content:{key:t,body_dict:{}}});return}})},js_watch_window_display(){document.addEventListener("visibilitychange",()=>{})},is_wails(){return this.get_agent().toLowerCase().indexOf("wails")!==-1},is_gthon(){return this.get_agent().toLowerCase().indexOf("gthon")!==-1},get_lang_index(t){function i(u){return u.indexOf("zh")>=0?"zh":u.indexOf("en")>=0?"en":u.indexOf("jp")>=0?"jp":u.indexOf("fr")>=0?"fr":u.indexOf("de")>=0?"de":u.indexOf("ru")>=0?"ru":u.indexOf("es")>=0?"es":u.indexOf("ko")>=0?"ko":u.indexOf("vi")>=0?"vi":"en"}function a(u=""){return u.length>=2?u.toLowerCase():navigator.language.toLowerCase()}return i(a(t))},get_lang(){let t=this,i="",a=Gi.lang_index;return a.length>=2&&(i=a),t.get_lang_index(i)},get_translate(t="",i=""){let a=this;if(!(i.length>=2)){let l=Gi.lang_index;l.length>=2&&(i=l)}let u=a.get_lang_index(i);return je[t]&&je[t][u]?je[t][u]:je._null[u]?je._null[u]:je._null.en},open_url(t="",i="_self"){t.length>=1&&(i==="_self"?xi(t,{replaceState:!0,invalidateAll:!0,noScroll:!0}).then(a=>{}):window.open(t,i))},open_url_no_cache(t="./?reload=no-cache",i="_self"){t.length>=1&&(i==="_self"?(history.replaceState(null,"",t),window.location.replace(t)):(history.replaceState(null,"",t),window.open(t,i)))},open_url_with_default_browser(t=""){let i=this,a="_blank";i.is_gthon()||i.is_wails()?i.js_call_py_or_go("open_url_with_default_browser",{lang:i.get_lang(),url:t,target:a}).then(u=>{}):i.open_url(t,a)},fresh_page(t=500){t<=0&&(t=0),setTimeout(function(){window.location.reload()},t)},get_app_uid(){let t=this,i=Pi.app.app_class+"app_uid";return new Promise(a=>{Qi.js_call_py_or_go("get_data",{data_key:i}).then(u=>{let l=u.content.data;l?(Yi.app_uid=l,a(l)):(l=t.md5(t.make_uid(Pi.app.app_class)),Qi.js_call_py_or_go("set_data",{data_key:i,data_value:l,data_timeout_s:10*365*24*3600}).then(y=>{Yi.app_uid=y.content.data,a(y.content.data)}))})})},ping(t){return new Promise((i,a)=>{ia(t,{},5).then(u=>{let l=0,y="";u.state!==404?(l=1,y="Êé•Âè£ËÆøÈóÆÊàêÂäüÔºå‰ΩÜstatusÁä∂ÊÄÅÂèØËÉΩÊòØ200„ÄÅ30X„ÄÇ"):(l=404,y="Ë∂ÖÊó∂ÊàñËÄÖÊé•Âè£Êó†Êïà„ÄÇ"),i({state:l,msg:y,result:u})}).catch(u=>{i({state:404,msg:"",result:{}})})})},set_db_data(t,i){let a=this;t=a.url_encode(t).replaceAll("%","_").replaceAll("$","-").replaceAll("!","_-").replaceAll("^","_-");let u=[{only_key:t,any_type_value:i,update_time:a.get_time_s_date("YmdHis")*1,remark:"func-set"}];return new Promise(l=>{Er.update_db_data(u).then(y=>{y.length>=1?a.get_db_data(t).then(P=>{l(P)}):l("")})})},get_db_data(t){return t=this.url_encode(t).replaceAll("%","_").replaceAll("$","-").replaceAll("!","_-").replaceAll("^","_-"),new Promise(a=>{Er.get_db_data(t).then(u=>{a(u?u.any_type_value:"")})})},del_db_data(t){return t=this.url_encode(t).replaceAll("%","_").replaceAll("$","-").replaceAll("!","_-").replaceAll("^","_-"),new Promise(a=>{Er.del_db_data(t).then(u=>{a(u)})})},converted_path(t=""){return t=t.replaceAll("\\","/"),t=t.replaceAll("//","/"),t.endsWith("/")&&(t=t.slice(0,-1)),t},filepath_to_filename(t=""){t=this.converted_path(t);let a=t.split("/");return t.length>0&&t?a[a.length-1]:""},replaceLast(t,i,a){const u=t.lastIndexOf(i);return u===-1?t:t.substring(0,u)+a+t.substring(u+i.length)},loading_show(t="",i="long"){let a=this;clearTimeout(ge(Ir)),i==="long"||(i<=1e3&&(i=5e3),Me(Ir,setTimeout(function(){a.loading_hide()},i),!0)),Tn.loading_show="show",Tn.loading_msg=t},loading_hide(){clearTimeout(ge(Ir)),Tn.loading_show="hide",Tn.loading_msg=""},alert_msg(t,i){clearTimeout(ge(Xi)),i==="long"||(i<=1e3&&(i=3e3),Me(Xi,setTimeout(function(){On.alert_show="hide",On.alert_msg=""},i),!0)),On.alert_show="show",On.alert_msg=t},notice(t="",i="",a=5e3,u="info"){switch(a<=1e3&&(a=3e3),u){case"info":An.toaster.info({title:t,description:i,duration:a});break;case"warn":An.toaster.warning({title:t,description:i,duration:a});break;case"error":An.toaster.error({title:t,description:i,duration:a});break;default:An.toaster.info({title:t,description:i,duration:a});break}},change_window_size(){let t=this;ge(Et)==="size_init"?Me(Et,"size_full_height"):ge(Et)==="size_full_height"?Me(Et,"size_full_window"):Me(Et,"size_init"),t.js_call_py_or_go("change_window_size",{size_tag:ge(Et),width:0,height:0}).then(i=>{console.log("change_window_size=",i)})}};export{Kr as A,hu as B,pu as C,Tt as D,yu as E,fu as F,gu as G,as as H,_u as I,bu as J,Wt as K,xu as L,hs as M,cu as N,Ou as O,ku as P,Eu as Q,Tn as R,An as S,On as T,Yi as U,to as a,eo as b,Pi as c,kr as d,lu as e,Qi as f,Br as g,wu as h,uu as i,io as j,we as k,$a as l,vu as m,ct as n,du as o,za as p,ns as q,ut as r,ts as s,su as t,mu as u,Ot as v,Gi as w,so as x,Pr as y,Rn as z};
