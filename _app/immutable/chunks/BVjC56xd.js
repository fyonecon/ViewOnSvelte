import{w as P,i as re,h as I,q as L,v as fe,g as ce,U as x,O as le,P as de,Q as X,y as q,l as O,C as ge,aK as pe,aL as Y,G as ve,aM as z,L as U,N as he,a3 as me,at as _e,aN as Q,aO as Ee,aP as ye,an as Se,aQ as Z,aR as xe,I as se,K as ae,aS as B,aT as Ce,J as Ne,m as we,E as be,aU as Re,aV as Te,a8 as Me,z as ke,Z as Ae,aa as ze,ak as oe,ar as W,V as Ie,aW as ue,A as Fe,B as Ve}from"./C5LA6A6C.js";import{B as De}from"./D-qMGKLK.js";import{m as Oe,i as $e,a as F,b as Pe,e as Le,M as V,t as qe,d as Be,w as j,I as H,g as He,h as Je}from"./DXQ6A7q_.js";function ot(e,n){return n}function Ke(e,n,t){for(var f=[],p=n.length,u,c=n.length,i=0;i<p;i++){let d=n[i];ae(d,()=>{if(u){if(u.pending.delete(d),u.done.add(d),u.pending.size===0){var _=e.outrogroups;G(Q(u.done)),_.delete(u),_.size===0&&(e.outrogroups=null)}}else c-=1},!1)}if(c===0){var g=f.length===0&&t!==null;if(g){var s=t,l=s.parentNode;Ce(l),l.append(s),e.items.clear()}G(n,!g)}else u={pending:new Set(n),done:new Set},(e.outrogroups??=new Set).add(u)}function G(e,n=!0){for(var t=0;t<e.length;t++)Ne(e[t],n)}var ee;function ut(e,n,t,f,p,u=null){var c=e,i=new Map;{var g=e;c=I?L(fe(g)):g.appendChild(P())}I&&ce();var s=null,l=me(()=>{var h=t();return _e(h)?h:h==null?[]:Q(h)}),d,_=!0;function R(){m.fallback=s,Ue(m,d,c,n,f),s!==null&&(d.length===0?(s.f&z)===0?se(s):(s.f^=z,D(s,null,c)):ae(s,()=>{s=null}))}var o=re(()=>{d=x(l);var h=d.length;let b=!1;if(I){var C=le(c)===de;C!==(h===0)&&(c=X(),L(c),q(!1),b=!0)}for(var T=new Set,N=ve,E=he(),S=0;S<h;S+=1){I&&O.nodeType===ge&&O.data===pe&&(c=O,b=!0,q(!1));var M=d[S],r=f(M,S),a=_?null:i.get(r);a?(a.v&&Y(a.v,M),a.i&&Y(a.i,S),E&&N.skipped_effects.delete(a.e)):(a=We(i,_?c:ee??=P(),M,r,S,p,n,t),_||(a.e.f|=z),i.set(r,a)),T.add(r)}if(h===0&&u&&!s&&(_?s=U(()=>u(c)):(s=U(()=>u(ee??=P())),s.f|=z)),I&&h>0&&L(X()),!_)if(E){for(const[y,v]of i)T.has(y)||N.skipped_effects.add(v.e);N.oncommit(R),N.ondiscard(()=>{})}else R();b&&q(!0),x(l)}),m={effect:o,items:i,outrogroups:null,fallback:s};_=!1,I&&(c=O)}function Ue(e,n,t,f,p){var u=n.length,c=e.items,i=e.effect.first,g,s=null,l=[],d=[],_,R,o,m;for(m=0;m<u;m+=1){if(_=n[m],R=p(_,m),o=c.get(R).e,e.outrogroups!==null)for(const r of e.outrogroups)r.pending.delete(o),r.done.delete(o);if((o.f&z)!==0)if(o.f^=z,o===i)D(o,null,t);else{var h=s?s.next:i;o===e.effect.last&&(e.effect.last=o.prev),o.prev&&(o.prev.next=o.next),o.next&&(o.next.prev=o.prev),A(e,s,o),A(e,o,h),D(o,h,t),s=o,l=[],d=[],i=s.next;continue}if((o.f&B)!==0&&se(o),o!==i){if(g!==void 0&&g.has(o)){if(l.length<d.length){var b=d[0],C;s=b.prev;var T=l[0],N=l[l.length-1];for(C=0;C<l.length;C+=1)D(l[C],b,t);for(C=0;C<d.length;C+=1)g.delete(d[C]);A(e,T.prev,N.next),A(e,s,T),A(e,N,b),i=b,s=N,m-=1,l=[],d=[]}else g.delete(o),D(o,i,t),A(e,o.prev,o.next),A(e,o,s===null?e.effect.first:s.next),A(e,s,o),s=o;continue}for(l=[],d=[];i!==null&&i!==o;)(g??=new Set).add(i),d.push(i),i=i.next;if(i===null)continue}(o.f&z)===0&&l.push(o),s=o,i=o.next}if(e.outrogroups!==null){for(const r of e.outrogroups)r.pending.size===0&&(G(Q(r.done)),e.outrogroups?.delete(r));e.outrogroups.size===0&&(e.outrogroups=null)}if(i!==null||g!==void 0){var E=[];if(g!==void 0)for(o of g)(o.f&B)===0&&E.push(o);for(;i!==null;)(i.f&B)===0&&i!==e.fallback&&E.push(i),i=i.next;var S=E.length;if(S>0){var M=u===0?t:null;Ke(e,E,M)}}}function We(e,n,t,f,p,u,c,i){var g=(c&Ee)!==0?(c&ye)===0?Se(t,!1,!1):Z(t):null,s=(c&xe)!==0?Z(p):null;return{v:g,i:s,e:U(()=>(u(n,g??t,s??p,i),()=>{e.delete(f)}))}}function D(e,n,t){if(e.nodes)for(var f=e.nodes.start,p=e.nodes.end,u=n&&(n.f&z)===0?n.nodes.start:t;f!==null;){var c=we(f);if(u.before(f),f===p)return;f=c}}function A(e,n,t){n===null?e.effect.first=t:n.next=t,t===null?e.effect.last=n:t.prev=n}function it(e,n,...t){var f=new De(e);re(()=>{const p=n()??null;f.ensure(p,p&&(u=>p(u,...t)))},be)}function ft(e){const n=Symbol();return{key:n,consume(){return Te(n)||e},provide(t){return Re(n,t)}}}function Ge(e){return new Proxy({},{get(n,t){return t==="style"?f=>e({style:f}).style:e}})}var ct=()=>e=>Array.from(new Set(e));const te={className:"class",defaultChecked:"checked",defaultValue:"value",htmlFor:"for",onBlur:"onfocusout",onChange:"oninput",onFocus:"onfocusin",onDoubleClick:"ondblclick"};function ie(e){let n="";for(let t in e){const f=e[t];f!=null&&(t.startsWith("--")||(t=t.replace(/[A-Z]/g,p=>`-${p.toLowerCase()}`)),n+=`${t}:${f};`)}return n}const Qe=new Set("viewBox,className,preserveAspectRatio,fillRule,clipPath,clipRule,strokeWidth,strokeLinecap,strokeLinejoin,strokeDasharray,strokeDashoffset,strokeMiterlimit".split(","));function Xe(e){return e in te?te[e]:Qe.has(e)?e:e.toLowerCase()}function Ye(e,n){return e==="style"&&typeof n=="object"?ie(n):n}const lt=Ge(e=>{const n={};for(const t in e)n[Xe(t)]=Ye(t,e[t]);return n}),Ze=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g,je=e=>{const n={};let t;for(;t=Ze.exec(e);)n[t[1]]=t[2];return n};function dt(...e){const n=[];for(const f of e)f&&"class"in f&&f.class!=null&&n.push(f.class);const t=Oe(...e);return n.length>0&&(t.class=n.length===1?n[0]:n),"style"in t&&(typeof t.style=="string"&&(t.style=je(t.style)),t.style=ie(t.style)),t}function $(e){const n=e().defaultValue??e().value,t=e().isEqual??Object.is;let f=Me(ke(n));const p=W(()=>e().value!==void 0);let u={current:Ae(()=>x(f))},c={current:void 0};ze(()=>{const s=x(p)?e().value:x(f);u={current:s},c={current:s}});const i=s=>{const l=F(s)?s(u.current):s,d=c.current;e().debug&&console.log(`[bindable > ${e().debug}] setValue`,{next:l,prev:d}),x(p)||Ie(f,l,!0),t(l,d)||e().onChange?.(l,d)};function g(){return x(p)?e().value:x(f)}return{initial:n,ref:u,get:g,set(s){(e().sync?oe:$e)(()=>i(s))},invoke(s,l){e().onChange?.(s,l)},hash(s){return e().hash?.(s)??String(s)}}}$.cleanup=e=>{ue(()=>e())};$.ref=e=>{let n=e;return{get:()=>n,set:t=>{n=t}}};function et(e){const n={current:e};return{get(t){return n.current[t]},set(t,f){n.current[t]=f}}}const J=e=>typeof e=="function"?e():e,tt=(e,n)=>{let t=[],f=!0;Fe(()=>{if(f){t=e.map(u=>J(u)),f=!1;return}let p=!1;for(let u=0;u<e.length;u++)if(!Pe(t[u],J(e[u]))){p=!0;break}p&&(t=e.map(u=>J(u)),n())})};function K(e){return F(e)?e():e}function gt(e,n){const t=W(()=>{const{id:r,ids:a,getRootNode:y}=K(n);return He({id:r,ids:a,getRootNode:y})}),f=(...r)=>{e.debug&&console.log(...r)},p=W(()=>e.props?.({props:Je(K(n)),scope:x(t)})??K(n)),u=nt(()=>x(p)),c=e.context?.({prop:u,bindable:$,get scope(){return x(t)},flush:ne,getContext(){return i},getComputed(){return N},getRefs(){return o},getEvent(){return _()}}),i={get(r){return c?.[r].get()},set(r,a){c?.[r].set(a)},initial(r){return c?.[r].initial},hash(r){const a=c?.[r].get();return c?.[r].hash(a)}};let g=new Map,s={current:null},l={current:null},d={current:{type:""}};const _=()=>({...d.current,current(){return d.current},previous(){return l.current}}),R=()=>({...E,hasTag(r){const a=E.get();return!!e.states[a]?.tags?.includes(r)},matches(...r){const a=E.get();return r.includes(a)}}),o=et(e.refs?.({prop:u,context:i})??{}),m=()=>({state:R(),context:i,event:_(),prop:u,send:M,action:h,guard:b,track:tt,refs:o,computed:N,flush:ne,scope:x(t),choose:T}),h=r=>{const a=F(r)?r(m()):r;if(!a)return;const y=a.map(v=>{const w=e.implementations?.actions?.[v];return w||j(`[zag-js] No implementation found for action "${JSON.stringify(v)}"`),w});for(const v of y)v?.(m())},b=r=>F(r)?r(m()):e.implementations?.guards?.[r](m()),C=r=>{const a=F(r)?r(m()):r;if(!a)return;const y=a.map(w=>{const k=e.implementations?.effects?.[w];return k||j(`[zag-js] No implementation found for effect "${JSON.stringify(w)}"`),k}),v=[];for(const w of y){const k=w?.(m());k&&v.push(k)}return()=>v.forEach(w=>w?.())},T=r=>qe(r).find(a=>{let y=!a.guard;return Be(a.guard)?y=!!b(a.guard):F(a.guard)&&(y=a.guard(m())),y}),N=r=>{Le(e.computed,()=>"[zag-js] No computed object found on machine");const a=e.computed[r];return a({context:i,event:_(),prop:u,refs:o,scope:x(t),computed:N})},E=$(()=>({defaultValue:e.initialState({prop:u}),onChange(r,a){a&&(g.get(a)?.(),g.delete(a)),a&&h(e.states[a]?.exit),h(s.current?.actions);const y=C(e.states[r]?.effects);if(y&&g.set(r,y),a===H){h(e.entry);const v=C(e.effects);v&&g.set(H,v)}h(e.states[r]?.entry)}}));let S=V.NotStarted;Ve(()=>{const r=S===V.Started;S=V.Started,f(r?"rehydrating...":"initializing..."),E.invoke(E.initial,H)}),ue(()=>{f("unmounting..."),S=V.Stopped,g.forEach(r=>r?.()),g=new Map,s.current=null,h(e.exit)});const M=r=>{if(S!==V.Started)return;l.current=d.current,d.current=r;let a=E.get();const y=e.states[a].on?.[r.type]??e.on?.[r.type],v=T(y);if(!v)return;s.current=v;const w=v.target??a;f("transition",r.type,v.target||a,`(${v.actions})`);const k=w!==a;k?E.set(w):v.reenter&&!k?E.invoke(a,a):h(v.actions)};return e.watch?.(m()),{get state(){return R()},send:M,context:i,prop:u,get scope(){return x(t)},refs:o,computed:N,get event(){return _()},getStatus:()=>S}}function nt(e){return function(t){return e()[t]}}function ne(e){oe(()=>{queueMicrotask(()=>e())})}export{ct as a,ft as c,ut as e,ot as i,dt as m,lt as n,it as s,gt as u};
